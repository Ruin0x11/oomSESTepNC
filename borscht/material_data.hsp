*mRefDefine
	dim matval, 4
	dim matref, 5, 400
	dim matspot, 5, 400
	sdim matname, 40, 400
	sdim matdesc, 80, 400
	p = 0
	matref(MATREF_LEVEL, p) = 0, 1, 240
	matname(p) = lang("端材", "scraps")
	matdesc(p) = lang("様々な素材のあまりもの", "Too much of a material.")
	matspot(0, p) = ATX_REMAIN1
	p = 1
	matref(MATREF_LEVEL, p) = 5, 1, 240
	matname(p) = lang("マジックマス", "magic mass")
	matdesc(p) = lang("質の低い魔力の塊", "A low quality piece of magic.")
	matspot(0, p) = ATX_REMAIN1
	p = 2
	matref(MATREF_LEVEL, p) = 10, 1, 240
	matname(p) = lang("革", "leather")
	matdesc(p) = lang("なめした皮", "tanned leather.")
	matspot(0, p) = ATX_REMAIN1
	p = 3
	matref(MATREF_LEVEL, p) = 15, 1, 240
	matname(p) = lang("魔法のインク", "magic ink")
	matdesc(p) = lang("魔力を秘めたインク", "magic ink.")
	matspot(0, p) = ATX_REMAIN1
	p = 4
	matref(MATREF_LEVEL, p) = 20, 3, 240
	matname(p) = lang("希少な端材", "rare scraps")
	matdesc(p) = lang("希少な素材のあまりもの", "Too much of a material.")
	matspot(0, p) = ATX_REMAIN1
	p = 5
	matref(MATREF_LEVEL, p) = 25, 3, 240
	matname(p) = lang("魔力の結晶", "magic fragment")
	matdesc(p) = lang("魔力が込められている", "This is magical.")
	matspot(0, p) = ATX_REMAIN1
	p = 6
	matref(MATREF_LEVEL, p) = 30, 3, 240
	matname(p) = lang("魔獣の革", "hexenbiest Leather")
	matdesc(p) = lang("獰猛な革", "fierce leather.")
	matspot(0, p) = ATX_REMAIN1
	p = 7
	matref(MATREF_LEVEL, p) = 40, 5, 240
	matname(p) = lang("魂のかけら", "fragment soul")
	matdesc(p) = lang("ほんのりと輝いている", "It is shining.")
	matspot(0, p) = ATX_REMAIN1
	p = 10
	matref(MATREF_LEVEL, p) = 0, 1, 209
	matname(p) = lang("石ころ", "stone")
	matdesc(p) = lang("なんの変哲もない石ころ", "stone.")
	matspot(0, p) = ATX_MINE1
	p = 11
	matref(MATREF_LEVEL, p) = 5, 1, 209
	matname(p) = lang("鉄鉱石", "iron ore")
	matdesc(p) = lang("小さな鉄鉱石", "tiny ore.")
	matspot(0, p) = ATX_MINE1
	p = 12
	matref(MATREF_LEVEL, p) = 10, 1, 209
	matname(p) = lang("金鉱石", "gold ore")
	matdesc(p) = lang("小さな金鉱石", "tiny ore.")
	matspot(0, p) = ATX_MINE1
	p = 13
	matref(MATREF_LEVEL, p) = 15, 1, 209
	matname(p) = lang("エメラルド鉱石", "emerald ore")
	matdesc(p) = lang("小さなエメラルド鉱石", "tiny ore.")
	matspot(0, p) = ATX_MINE1
	p = 14
	matref(MATREF_LEVEL, p) = 20, 3, 209
	matname(p) = lang("ダイア鉱石", "diamond ore")
	matdesc(p) = lang("小さなダイア鉱石", "tiny ore.")
	matspot(0, p) = ATX_MINE1
	p = 15
	matref(MATREF_LEVEL, p) = 25, 3, 209
	matname(p) = lang("水晶鉱石", "crystal ore")
	matdesc(p) = lang("小さな水晶鉱石", "tiny ore.")
	matspot(0, p) = ATX_MINE1
	p = 16
	matref(MATREF_LEVEL, p) = 30, 3, 209
	matname(p) = lang("混沌の石", "stone of chaos")
	matdesc(p) = lang("混沌の力が封じられた石", "chaos chaos.")
	matspot(0, p) = ATX_MINE1
	p = 17
	matref(MATREF_LEVEL, p) = 40, 5, 209
	matname(p) = lang("エーテル鉱石", "ether ore")
	matdesc(p) = lang("エーテルの力が込められた鉱石", "tiny ore.")
	matspot(0, p) = ATX_MINE1
	p = 20
	matref(MATREF_LEVEL, p) = 0, 1, 310
	matname(p) = lang("雑魚", "small fry")
	matdesc(p) = lang("どこにでも居る魚", "found anywhere.")
	matspot(0, p) = ATX_WATER1
	p = 21
	matref(MATREF_LEVEL, p) = 5, 1, 310
	matname(p) = lang("燃魚", "fire fish")
	matdesc(p) = lang("熱を発し身を守る魚", "fire fish.")
	matspot(0, p) = ATX_WATER1
	p = 22
	matref(MATREF_LEVEL, p) = 10, 1, 310
	matname(p) = lang("氷魚", "cold fish")
	matdesc(p) = lang("つららを身に纏う魚", "cold fish.")
	matspot(0, p) = ATX_WATER1
	p = 23
	matref(MATREF_LEVEL, p) = 15, 1, 310
	matname(p) = lang("電魚", "elect fish")
	matdesc(p) = lang("電気を身に纏う魚", "elect fish.")
	matspot(0, p) = ATX_WATER1
	p = 24
	matref(MATREF_LEVEL, p) = 20, 3, 310
	matname(p) = lang("闇魚", "dark fish")
	matdesc(p) = lang("敵の目をくらませる魚", "dark fish.")
	matspot(0, p) = ATX_WATER1
	p = 25
	matref(MATREF_LEVEL, p) = 25, 3, 310
	matname(p) = lang("音魚", "sound fish")
	matdesc(p) = lang("音を発し敵を威嚇する魚", "sound fish.")
	matspot(0, p) = ATX_WATER1
	p = 26
	matref(MATREF_LEVEL, p) = 30, 3, 310
	matname(p) = lang("毒魚", "harm fish")
	matdesc(p) = lang("その身に毒を持つ魚", "harm fish.")
	matspot(0, p) = ATX_WATER1
	p = 27
	matref(MATREF_LEVEL, p) = 40, 5, 310
	matname(p) = lang("幻魚", "vision fish")
	matdesc(p) = lang("幻影で敵から逃れる魚", "vision fish.")
	matspot(0, p) = ATX_WATER1
	p = 30
	matref(MATREF_LEVEL, p) = 0, 1, 240
	matname(p) = lang("木の枝", "tree branch")
	matdesc(p) = lang("脆い木の枝", "tree branch.")
	matspot(0, p) = ATX_BUSH1
	p = 31
	matref(MATREF_LEVEL, p) = 5, 1, 240
	matname(p) = lang("草の束", "bunch of grass")
	matdesc(p) = lang("様々な種類の草の束", "bunch of grass.")
	matspot(0, p) = ATX_BUSH1
	p = 32
	matref(MATREF_LEVEL, p) = 10, 1, 240
	matname(p) = lang("頑丈な枝", "sturdy branch")
	matdesc(p) = lang("しっかりとした枝", "firm branches.")
	matspot(0, p) = ATX_BUSH1
	p = 33
	matref(MATREF_LEVEL, p) = 15, 1, 240
	matname(p) = lang("魔力草", "magic grass")
	matdesc(p) = lang("魔力を蓄えた草", "magic grass.")
	matspot(0, p) = ATX_BUSH1
	p = 34
	matref(MATREF_LEVEL, p) = 20, 3, 240
	matname(p) = lang("唸る草", "meadow grass")
	matdesc(p) = lang("変な音を出す草", "meadow grass.")
	matspot(0, p) = ATX_BUSH1
	p = 35
	matref(MATREF_LEVEL, p) = 25, 3, 240
	matname(p) = lang("呪いの草", "cursed grass")
	matdesc(p) = lang("呪われた草", "cursed grass.")
	matspot(0, p) = ATX_BUSH1
	p = 36
	matref(MATREF_LEVEL, p) = 30, 3, 240
	matname(p) = lang("聖なる草", "holy grass")
	matdesc(p) = lang("祝福された草", "holy grass.")
	matspot(0, p) = ATX_BUSH1
	p = 37
	matref(MATREF_LEVEL, p) = 40, 5, 240
	matname(p) = lang("世界樹の樹液", "sap of yaggdrasil")
	matdesc(p) = lang("どんな傷も癒す樹液", "It's pretty rare.")
	matspot(0, p) = ATX_BUSH1
	p = 40
	matref(MATREF_LEVEL, p) = 1, 3, 209
	matname(p) = lang("汚れたマテリアルの元", "dirty materials")
	matdesc(p) = lang("様々なマテリアルの元", "source of various materials.")
	matspot(0, p) = ATX_GLOBAL1
	p = 41
	matref(MATREF_LEVEL, p) = 10, 5, 209
	matname(p) = lang("マテリアルの元", "materials")
	matdesc(p) = lang("様々なマテリアルの元", "source of various materials.")
	matspot(0, p) = ATX_GLOBAL1
	p = 42
	matref(MATREF_LEVEL, p) = 25, 7, 209
	matname(p) = lang("澄んだマテリアルの元", "unruffled materials")
	matdesc(p) = lang("様々なマテリアルの元", "source of various materials.")
	matspot(0, p) = ATX_GLOBAL1
	p = 43
	matref(MATREF_LEVEL, p) = 40, 10, 209
	matname(p) = lang("神秘のマテリアルの元", "mystical materials")
	matdesc(p) = lang("様々なマテリアルの元", "source of various materials.")
	matspot(0, p) = ATX_GLOBAL1
	p = 50
	matref(MATREF_LEVEL, p) = 1, 20, 434
	matname(p) = lang("カジノチップ", "Casino chip")
	matdesc(p) = lang("カジノで使うチップ", "Chips used in casinos.")
	matspot(0, p) = ATX_GLOBAL1
	p = 51
	matref(MATREF_LEVEL, p) = 1, 30, 437
	matname(p) = lang("100Yen硬貨", "100 Yen coin")
	matdesc(p) = lang("異国のお金", "Foreign money.")
	matspot(0, p) = ATX_GLOBAL1
	p = 52
	matref(MATREF_LEVEL, p) = 1, 40, 437
	matname(p) = lang("500Yen硬貨", "500 Yen coin")
	matdesc(p) = lang("異国のお金", "Foreign money.")
	matspot(0, p) = ATX_GLOBAL1
	p = 53
	matref(MATREF_LEVEL, p) = 0, 999999, 434
	matname(p) = lang("季節の欠片", "Season chip")
	matdesc(p) = lang("季節の移り変わりを感じる", "Feel the changing of the seasons.")
	p = 399
	matref(MATREF_LEVEL, p) = 0, 999999, 209
	matname(p) = lang("いにしえのマテリアル", "old material")
	matdesc(p) = lang("古き時代のマテリアルの遺り", "old material.")
	return

*label_1264
	dim another_matref, 5, 100
	sdim another_matname, 40, 100
	sdim another_matdesc, 80, 100
	another_matref(0, 0) = 0, 1, 240
	another_matname(0) = lang("クズ(異界)", "Garbage(A)")
	another_matdesc(0) = lang("何の価値もないクズ", "Just garbage.")
	p = 0
	another_matref(0, 1) = 0, 2, 434
	another_matname(1) = lang("カジノチップ(異界)", "Casino chip(A)")
	another_matdesc(1) = lang("カジノで使うチップ", "Chips used in casinos.")
	p = 1
	another_matref(0, 40) = 0, 4, 437
	another_matname(40) = lang("100Yen硬貨(異界)", "100 Yen coin(A)")
	another_matdesc(40) = lang("異国のお金", "Foreign money.")
	p = 40
	another_matref(0, 41) = 0, 20, 437
	another_matname(41) = lang("500Yen硬貨(異界)", "500 Yen coin(A)")
	another_matdesc(41) = lang("異国のお金", "Foreign money.")
	p = 41
	another_matref(0, 43) = 0, 1, 470
	another_matname(43) = lang("紙(異界)", "Paper(A)")
	another_matdesc(43) = lang("白紙", "Blank paper.")
	p = 43
	another_matref(0, 2) = 0, 1, 239
	another_matname(2) = lang("炭(異界)", "Charcoal(A)")
	another_matdesc(2) = lang("良質な炭", "This is good quality charcoal.")
	p = 2
	another_matref(0, 3) = 0, 1, 239
	another_matname(3) = lang("流木(異界)", "Driftwood(A)")
	another_matdesc(3) = lang("あまり質の良くない木材", "Common driftwood.")
	p = 3
	another_matref(0, 48) = 0, 1, 209
	another_matname(48) = lang("石ころ(異界)", "Pebble(A)")
	another_matdesc(48) = lang("どこにでも落ちている", "These are around everywhere.")
	p = 48
	another_matref(0, 6) = 0, 2, 239
	another_matname(6) = lang("杖(異界)", "Stick(A)")
	another_matdesc(6) = lang("杖", "A specially shaped piece of wood.")
	p = 6
	another_matref(0, 45) = 0, 1, 155
	another_matname(45) = lang("布きれ(異界)", "Cloth(A)")
	another_matdesc(45) = lang("ただの布きれ", "A piece of cloth.")
	p = 45
	another_matref(0, 38) = 0, 1, 8
	another_matname(38) = lang("わめく狂人(異界)", "Yelling madman(A)")
	another_matdesc(38) = lang("黙らない", "It never shuts up.")
	p = 38
	another_matref(0, 30) = 0, 3, 7
	another_matname(30) = lang("マジックマス(異界)", "Magic mass(A)")
	another_matdesc(30) = lang("謎の魔力の塊", "Unknown magical mass.")
	p = 30
	another_matref(0, 23) = 1, 1, 7
	another_matname(23) = lang("電気(異界)", "Electricity(A)")
	another_matdesc(23) = lang("放電している", "It is discharging.")
	p = 23
	another_matref(0, 44) = 2, 3, 7
	another_matname(44) = lang("生成機械(異界)", "Generator(A)")
	another_matdesc(44) = lang("何かを生み出す機械", "This machine generates something.")
	p = 44
	another_matref(0, 50) = 0, 1, 209
	another_matname(50) = lang("魔力の結晶(異界)", "Magic fragment(A)")
	another_matdesc(50) = lang("魔力が込められている", "This is magical.")
	p = 50
	another_matref(0, 46) = 0, 1, 239
	another_matname(46) = lang("枝(異界)", "Branch(A)")
	another_matdesc(46) = lang("枝", "Broken off of a tree.")
	p = 46
	another_matref(0, 33) = 0, 1, 155
	another_matname(33) = lang("革(異界)", "Leather(A)")
	another_matdesc(33) = lang("なめした皮", "A tanned hide.")
	p = 33
	another_matref(0, 53) = 0, 1, 202
	another_matname(53) = lang("ツル(異界)", "Vein(A)")
	another_matdesc(53) = lang("ツル", "Vein.")
	p = 53
	another_matref(0, 47) = 0, 1, 239
	another_matname(47) = lang("頑丈な枝(異界)", "Thick wood(A)")
	another_matdesc(47) = lang("なかなか折れない", "This doesn't break down easily.")
	p = 47
	another_matref(0, 37) = 1, 2, 471
	another_matname(37) = lang("曲がった杖(異界)", "Curved stick(A)")
	another_matdesc(37) = lang("杖の役割を果たさない", "Almost unusable.")
	p = 37
	another_matref(0, 54) = 0, 1, 354
	another_matname(54) = lang("接着剤(異界)", "Adhesive(A)")
	another_matdesc(54) = lang("ネトネトしている", "It's sticky.")
	p = 54
	another_matref(0, 49) = 0, 1, 150
	another_matname(49) = lang("記憶の欠片(異界)", "Memory fragment(A)")
	another_matdesc(49) = lang("思い出が残っている", " Reminds you of something.")
	p = 49
	another_matref(0, 35) = 0, 1, 470
	another_matname(35) = lang("魔法の紙(異界)", "Magic paper(A)")
	another_matdesc(35) = lang("魔力を秘めた紙", "Magical paper.")
	p = 35
	another_matref(0, 36) = 0, 1, 354
	another_matname(36) = lang("魔法のインク(異界)", "Magic ink(A)")
	another_matdesc(36) = lang("魔力を秘めたインク", "Wizards love to use it.")
	p = 36
	another_matref(0, 12) = 0, 1, 354
	another_matname(12) = lang("海水(異界)", "Seawater(A)")
	another_matdesc(12) = lang("しょっぱい水", "Very salty.")
	p = 12
	another_matref(0, 5) = 0, 1, 354
	another_matname(5) = lang("水滴(異界)", "Waterdrop(A)")
	another_matdesc(5) = lang("水滴", "A drop of water.")
	p = 5
	another_matref(0, 10) = 0, 1, 354
	another_matname(10) = lang("天使の涙(異界)", "Angel's tear(A)")
	another_matdesc(10) = lang("不思議な輝きを放つ涙", "Hard to gather.")
	p = 10
	another_matref(0, 25) = 0, 1, 354
	another_matname(25) = lang("お湯(異界)", "Hot water(A)")
	another_matdesc(25) = lang("なぜか冷めない", "Somehow it's not cooling down.")
	p = 25
	another_matref(0, 11) = 0, 1, 354
	another_matname(11) = lang("魔女の涙(異界)", "Witch's tear(A)")
	another_matdesc(11) = lang("決して乾かない涙", "Never dries up.")
	p = 11
	another_matref(0, 20) = 1, 1, 7
	another_matname(20) = lang("雪(異界)", "Snow(A)")
	another_matdesc(20) = lang("なぜか溶けない", "It won't melt somehow.")
	p = 20
	another_matref(0, 7) = 0, 1, 209
	another_matname(7) = lang("ミスリルの欠片(異界)", "Mithril fragment(A)")
	another_matdesc(7) = lang("ミスリルを含んだ鉱石の欠片", "Contains mithril.")
	p = 7
	another_matref(0, 9) = 0, 1, 209
	another_matname(9) = lang("鉄の欠片(異界)", "Iron fragment(A)")
	another_matdesc(9) = lang("鉄分を含んだ鉱石の欠片", "Contains iron.")
	p = 9
	another_matref(0, 26) = 0, 1, 209
	another_matname(26) = lang("火炎石(異界)", "Fire stone(A)")
	another_matdesc(26) = lang("熱を帯びた石", "This is hot.")
	p = 26
	another_matref(0, 27) = 0, 1, 209
	another_matname(27) = lang("冷凍石(異界)", "Ice stone(A)")
	another_matdesc(27) = lang("冷たい石", "This is cool.")
	p = 27
	another_matref(0, 28) = 0, 1, 209
	another_matname(28) = lang("帯電石(異界)", "Discharging stone(A)")
	another_matdesc(28) = lang("電気を帯びた石", "It's electrified.")
	p = 28
	another_matref(0, 52) = 0, 1, 209
	another_matname(52) = lang("上等な石(異界)", "Fine stone(A)")
	another_matdesc(52) = lang("状態の良い石", "A good quality stone.")
	p = 52
	another_matref(0, 8) = 0, 1, 209
	another_matname(8) = lang("エーテルの欠片(異界)", "Ether fragment(A)")
	another_matdesc(8) = lang("エーテルを含んだ鉱石の欠片", "Contains ether.")
	p = 8
	another_matref(0, 22) = 1, 2, 209
	another_matname(22) = lang("元素の欠片(異界)", "Element fragment(A)")
	another_matdesc(22) = lang("元素の力を宿した石", "Elemental.")
	p = 22
	another_matref(0, 51) = 3, 4, 209
	another_matname(51) = lang("混沌の石(異界)", "Chaos stone(A)")
	another_matdesc(51) = lang("混沌の力が封じられた石", "Chaotic.")
	p = 51
	another_matref(0, 13) = 0, 1, 170
	another_matname(13) = lang("唸る草(異界)", "Howling weed(A)")
	another_matdesc(13) = lang("変な音を出す草", "It's making a whining sound.")
	p = 13
	another_matref(0, 14) = 0, 1, 170
	another_matname(14) = lang("赤い草(異界)", "Red weed(A)")
	another_matdesc(14) = lang("ほんのり赤い草", "A faintly reddish weed.")
	p = 14
	another_matref(0, 15) = 0, 1, 170
	another_matname(15) = lang("青い草(異界)", "Blue weed(A)")
	another_matdesc(15) = lang("ほんのり青い草", "A faintly blueish weed.")
	p = 15
	another_matref(0, 16) = 0, 1, 170
	another_matname(16) = lang("呪いの草(異界)", "Curse weed(A)")
	another_matdesc(16) = lang("呪われた草", "A cursed weed.")
	p = 16
	another_matref(0, 42) = 0, 1, 170
	another_matname(42) = lang("薬草(異界)", "Medicinal weed(A)")
	another_matdesc(42) = lang("少し傷を癒す", "Slightly cures wounds.")
	p = 42
	another_matref(0, 29) = 0, 1, 170
	another_matname(29) = lang("浮き草(異界)", "Floating weed(A)")
	another_matdesc(29) = lang("とても軽い草", "Very light.")
	p = 29
	another_matref(0, 17) = 1, 1, 170
	another_matname(17) = lang("聖なる草(異界)", "Holy weed(A)")
	another_matdesc(17) = lang("祝福された草", "It's blessed.")
	p = 17
	another_matref(0, 24) = 1, 1, 8
	another_matname(24) = lang("黒い霧(異界)", "Black mist(A)")
	another_matdesc(24) = lang("真っ黒な霧", "It's as black as coal.")
	p = 24
	another_matref(0, 34) = 2, 4, 354
	another_matname(34) = lang("世界樹の樹液(異界)", "Sap of Yaggdrasil(A)")
	another_matdesc(34) = lang("どんな傷も癒す樹液", "It's pretty rare.")
	p = 34
	another_matref(0, 4) = 0, 1, 436
	another_matname(4) = lang("鳥の羽(異界)", "Bird's feather(A)")
	another_matdesc(4) = lang("普通の鳥の羽", "A piece of Feather.")
	p = 4
	another_matref(0, 18) = 0, 2, 301
	another_matname(18) = lang("ウサギの尻尾(異界)", "Rabbit's tail(A)")
	another_matdesc(18) = lang("幸運を呼ぶ尻尾", "Scut.")
	p = 18
	another_matref(0, 31) = 0, 1, 304
	another_matname(31) = lang("ヒトの遺伝子(異界)", "Human gene(A)")
	another_matdesc(31) = lang("普通の遺伝子", "It's common.")
	p = 31
	another_matref(0, 39) = 0, 1, 301
	another_matname(39) = lang("クマの尻尾(異界)", "Bear's tail(A)")
	another_matdesc(39) = lang("とても短い", "Very short.")
	p = 39
	another_matref(0, 19) = 0, 1, 304
	another_matname(19) = lang("トロールの遺伝子(異界)", "Troll gene(A)")
	another_matdesc(19) = lang("再生する遺伝子", "It's regenerating.")
	p = 19
	another_matref(0, 32) = 0, 1, 304
	another_matname(32) = lang("魔女の瞳(異界)", "Witch's eye(A)")
	another_matdesc(32) = lang("まだ動いている", "These eyes are still moving.")
	p = 32
	another_matref(0, 21) = 0, 1, 209
	another_matname(21) = lang("フェアリーダスト(異界)", "Fairy dust(A)")
	another_matdesc(21) = lang("妖精の燐粉", "Fairies leave it.")
	p = 21
	return

#defcfunc prodcheck int prodcheck_prm0
	locvar_prodcheck_f = 1
	if ( matval(1) > sdata(matval, prodcheck_prm0) ) {
		locvar_prodcheck_f = -1
	}
	repeat 6
		locvar_prodcheck_j = matneed(cnt * 2), matneed(cnt * 2 + 1)
		if ( locvar_prodcheck_j == (-1) ) {
			break
		}
		if ( mat(locvar_prodcheck_j) < locvar_prodcheck_j(1) ) {
			locvar_prodcheck_f = -1
		}
	loop
	return locvar_prodcheck_f

#defcfunc prodcheck_another
	locvar_prodcheck_f = 1
	repeat 6
		locvar_prodcheck_j = matneed(cnt * 2), matneed(cnt * 2 + 1)
		if ( locvar_prodcheck_j == (-1) ) {
			break
		}
		if ( mat(locvar_prodcheck_j) < locvar_prodcheck_j(1) ) {
			locvar_prodcheck_f = -1
		}
	loop
	return locvar_prodcheck_f

#defcfunc prodcheck_custom int prodcheck_custom_prm0
	locvar_prodcheck_f = 1
	if ( matval(1) > sdata(matval, prodcheck_custom_prm0) ) {
		locvar_prodcheck_f = -1
	}
	repeat 6
		locvar_prodcheck_j = matneed(cnt * 2), matneed(cnt * 2 + 1)
		if ( locvar_prodcheck_j == (-1) ) {
			break
		}
		if ( ncgdata(STARTING_NCGDATA_ANOTHER_MATERIALS + locvar_prodcheck_j) < locvar_prodcheck_j(1) ) {
			locvar_prodcheck_f = -1
		}
	loop
	return locvar_prodcheck_f

#deffunc calcweaponfix int calcweaponfix_itemid, int calcweaponfix_prm1
	pierce = 0
	rangemap_pow = 100, 20, 20, 20, 20, 20, 20, 20, 20, 20
	rangemap_hit = 100, 20, 20, 20, 20, 20, 20, 20, 20, 20
	if ( calcweaponfix_itemid == ITEM_ID_VIOLENCE_TRIGGER ) {
		pierce = 0
		rangemap_pow = 80, 100, 100, 90, 80, 70
		rangemap_hit = 80, 100, 100, 90, 80, 70
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SKULL_BOW ) {
		pierce = 15
		rangemap_pow = 80, 90, 100, 100, 100, 90, 80, 60, 40
		rangemap_hit = 50, 80, 100, 100, 80, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_KITCHEN_KNIFE ) {
		pierce = 40
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_LIGHTSABRE ) {
		pierce = 100
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_MAUSER_C96_CUSTOM ) {
		pierce = 35
		rangemap_pow = 100, 90, 80, 70, 50, 30, 30, 30
		rangemap_hit = 100, 90, 90, 80, 70, 70, 50, 30
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_CARNEADES_PLANK ) {
		pierce = useritemdata(44, iCItemIdx(calcweaponfix_prm1))
		repeat 10
			rangemap_pow(cnt) = useritemdata(45 + cnt, iCItemIdx(calcweaponfix_prm1))
			rangemap_hit(cnt) = useritemdata(55 + cnt, iCItemIdx(calcweaponfix_prm1))
		loop
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_HIRYU_TO ) {
		pierce = 20
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_FRISIAS_TAIL ) {
		pierce = 65
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SCYTHE ) {
		pierce = 5
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_KILL_KILL_PIANO ) {
		pierce = 0
		rangemap_pow = 80, 100, 90, 60
		rangemap_hit = 60, 100, 70, 30
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SHENAS_PANTY ) {
		pierce = 5
		rangemap_pow = 50, 100, 50
		rangemap_hit = 50, 100, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_VANILLA_ROCK ) {
		pierce = 50
		rangemap_pow = 60, 100, 70
		rangemap_hit = 60, 100, 70
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_GRENADE ) {
		pierce = 0
		rangemap_pow = 60, 100, 70, 20, 20
		rangemap_hit = 80, 100, 90, 80, 60
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SHURIKEN ) {
		pierce = 15
		rangemap_pow = 60, 100, 70
		rangemap_hit = 60, 100, 70
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_LUCKY_DAGGER ) {
		pierce = 10
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_HOLY_LANCE ) {
		pierce = 30
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_KUMIROMI_SCYTHE ) {
		pierce = 15
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_WINCHESTER_PREMIUM ) {
		pierce = 30
		rangemap_pow = 200, 40
		rangemap_hit = 50, 60, 70, 80, 80, 90, 90, 100, 100, 100
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_WIND_BOW ) {
		pierce = 20
		rangemap_pow = 50, 90, 100, 90, 80, 80, 70, 60, 50, 20
		rangemap_hit = 50, 90, 100, 100, 100, 90, 80, 70, 60, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_PANTY ) {
		pierce = 5
		rangemap_pow = 50, 100, 50
		rangemap_hit = 50, 100, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_RAIL_GUN ) {
		pierce = 5
		rangemap_pow = 100, 100, 100, 100, 100, 100, 100, 50
		rangemap_hit = 100, 100, 100, 100, 100, 100, 100, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_LASER_GUN ) {
		pierce = 5
		rangemap_pow = 100, 100, 100, 100, 100, 100, 100
		rangemap_hit = 100, 100, 100, 100, 100, 100, 100
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SHOT_GUN ) {
		pierce = 30
		rangemap_pow = 100, 60
		rangemap_hit = 50, 60, 70, 80, 80, 90, 90, 100, 100, 100
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_CROSSBOW ) {
		pierce = 25
		rangemap_pow = 80, 100, 90, 80, 70, 60, 50
		rangemap_hit = 80, 100, 90, 80, 70, 60, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_RANKIS ) {
		pierce = 40
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_WAKIZASHI ) {
		pierce = 5
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_HALBERD ) {
		pierce = 30
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_MACHINE_GUN ) {
		pierce = 0
		rangemap_pow = 80, 100, 100, 90, 80, 70
		rangemap_hit = 80, 100, 100, 90, 80, 70
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SHORT_BOW ) {
		pierce = 15
		rangemap_pow = 70, 100, 100, 80, 60
		rangemap_hit = 70, 100, 100, 80, 60
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_TRIDENT ) {
		pierce = 25
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SCIMITAR ) {
		pierce = 10
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_KATANA ) {
		pierce = 20
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SPEAR ) {
		pierce = 25
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SICKLE ) {
		pierce = 5
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_STONE ) {
		pierce = 5
		rangemap_pow = 60, 100, 70
		rangemap_hit = 60, 100, 70
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_BOW_OF_VINDALE ) {
		pierce = 20
		rangemap_pow = 50, 90, 100, 90, 80, 80, 70, 60, 50, 20
		rangemap_hit = 50, 90, 100, 100, 130, 150, 180, 200, 200, 200
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_ETHER_DAGGER ) {
		pierce = 20
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_RAGNAROK ) {
		pierce = 20
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_MOURNBLADE ) {
		pierce = 15
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_SCYTHE_OF_THE_VOID ) {
		pierce = 15
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_PISTOL ) {
		pierce = 10
		rangemap_pow = 100, 90, 70, 50
		rangemap_hit = 100, 90, 70, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_LONG_BOW ) {
		pierce = 20
		rangemap_pow = 50, 90, 100, 90, 80, 80, 70, 60, 50
		rangemap_hit = 50, 90, 100, 90, 80, 80, 70, 60, 50
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_ZANTETSUKEN ) {
		pierce = 25
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_DIABLOS ) {
		pierce = 10
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_DAGGER ) {
		pierce = 10
		return 1
	}
	if ( calcweaponfix_itemid == ITEM_ID_LONG_SWORD ) {
		pierce = 5
		return 1
	}
	return 0

*recipe_ref
	matneed = -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
	if ( matid == 10000 ) {
		matval = SKILL_NORMAL_CARPENTRY, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 2
		return 1
	}
	if ( matid == 10001 ) {
		matval = SKILL_NORMAL_CARPENTRY, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 4
		return 1
	}
	if ( matid == 10002 ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 2
		return 1
	}
	if ( matid == 10003 ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 4
		return 1
	}
	if ( matid == 10004 ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 2
		return 1
	}
	if ( matid == 10005 ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 4
		return 1
	}
	if ( matid == 10006 ) {
		matval = SKILL_NORMAL_CARPENTRY, 33, 100
		matneed = MATERIAL_PAPER, 2
		return 1
	}
	if ( matid == 10007 ) {
		matval = SKILL_NORMAL_CARPENTRY, 33, 100
		matneed = MATERIAL_PAPER, 4
		return 1
	}
	if ( matid == ITEM_ID_BRAZIER_STAND ) {
		matval = SKILL_NORMAL_CARPENTRY, 3, 100
		matneed = MATERIAL_GARBAGE, 2, MATERIAL_ANGELS_TEAR, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_FLAG ) {
		matval = SKILL_NORMAL_CARPENTRY, 3, 100
		matneed = MATERIAL_GARBAGE, 2, MATERIAL_MAGIC_MASS, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_TOMBSTONE ) {
		matval = SKILL_NORMAL_CARPENTRY, 3, 100
		matneed = MATERIAL_ANGELS_TEAR, 4
		return 1
	}
	if ( matid == ITEM_ID_ROUND_CHAIR ) {
		matval = SKILL_NORMAL_CARPENTRY, 6, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_CHARCOAL, 2
		return 1
	}
	if ( matid == ITEM_ID_SQUARE_CHAIR ) {
		matval = SKILL_NORMAL_CARPENTRY, 6, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_CHARCOAL, 2
		return 1
	}
	if ( matid == ITEM_ID_CHEAP_CHAIR ) {
		matval = SKILL_NORMAL_CARPENTRY, 6, 100
		matneed = MATERIAL_WITCHS_EYE, 3
		return 1
	}
	if ( matid == ITEM_ID_BOOKSHELF ) {
		matval = SKILL_NORMAL_CARPENTRY, 6, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_HUMAN_GENE, 1, MATERIAL_CHARCOAL, 1
		return 1
	}
	if ( matid == ITEM_ID_LUXURY_DRAWER ) {
		matval = SKILL_NORMAL_CARPENTRY, 9, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_MAGIC_MASS, 4
		return 1
	}
	if ( matid == ITEM_ID_CHEAP_BED ) {
		matval = SKILL_NORMAL_CARPENTRY, 9, 100
		matneed = MATERIAL_GARBAGE, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_MODERN_TABLE ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_DINING_TABLE ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_BAR_TABLE_ALPHA ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_BAR_TABLE_BETA ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_WRITING_DESK ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_NARROW_DINING_TABLE ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_ELEGANT_TABLE ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_SHED ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_COMFORTABLE_TABLE ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_BARREL ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_EYE, 4
		return 1
	}
	if ( matid == ITEM_ID_STYLISH_CHAIR ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_ANGELS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_LANTERN ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_TEAR, 2, MATERIAL_FAIRY_DUST, 1
		return 1
	}
	if ( matid == ITEM_ID_ANVIL ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_TEAR, 5
		return 1
	}
	if ( matid == ITEM_ID_POTION_RACK ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_GARBAGE, 4, MATERIAL_CASINO_CHIP, 2, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_CUPBOARD ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_TEAR, 4, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_TIDY_BOOKSHELF ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_HUMAN_GENE, 1, MATERIAL_CHARCOAL, 1
		return 1
	}
	if ( matid == ITEM_ID_KITCHEN ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6
		return 1
	}
	if ( matid == ITEM_ID_BUNK_BED ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_TEAR, 4, MATERIAL_WITCHS_EYE, 2
		return 1
	}
	if ( matid == ITEM_ID_STORAGE_RACK ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_WITCHS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_RACK_GOODS ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_WITCHS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_RACK_ACCESSORIES ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_WITCHS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_SMELTER ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_WITCHS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_OVEN ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_WITCHS_TEAR, 4, MATERIAL_FAIRY_DUST, 1
		return 1
	}
	if ( matid == ITEM_ID_FOOD_MAKER ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_WITCHS_TEAR, 4
		return 1
	}
	if ( matid == ITEM_ID_KITCHEN ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_WITCHS_TEAR, 4
		return 1
	}
	if ( matid == ITEM_ID_KITCHEN_OVEN ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_WITCHS_TEAR, 4, MATERIAL_FAIRY_DUST, 1
		return 1
	}
	if ( matid == ITEM_ID_SIGN ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 6
		return 1
	}
	if ( matid == ITEM_ID_SIGNPOST ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 6
		return 1
	}
	if ( matid == ITEM_ID_NOTICE_BOARD ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 6
		return 1
	}
	if ( matid == ITEM_ID_CRAFT_RACK ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_MAGIC_MASS, 4
		return 1
	}
	if ( matid == ITEM_ID_CRAFT_BOOK_SHELF ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_MAGIC_MASS, 4, MATERIAL_HUMAN_GENE, 2
		return 1
	}
	if ( matid == ITEM_ID_STREET_LAMP ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_TEAR, 4, MATERIAL_CASINO_CHIP, 4
		return 1
	}
	if ( matid == ITEM_ID_SMALL_DECORATIVE_PLANT ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_BANKS_ROSE ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_LARGE_DECORATIVE_PLANT ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_SAGE ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_GAZANIA ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_NERINE ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_ANEMONE ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_CARNATION ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 4, MATERIAL_HUMAN_GENE, 4
		return 1
	}
	if ( matid == ITEM_ID_PLANT_ADORNED_PILLAR ) {
		matval = SKILL_NORMAL_CARPENTRY, 27, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 6, MATERIAL_HUMAN_GENE, 6
		return 1
	}
	if ( matid == ITEM_ID_PLANT_ADORNED_PILLAR ) {
		matval = SKILL_NORMAL_CARPENTRY, 27, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_ANGELS_TEAR, 6, MATERIAL_HUMAN_GENE, 6
		return 1
	}
	if ( matid == ITEM_ID_ELEGANT_TABLE ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_SEAWATER, 2
		return 1
	}
	if ( matid == ITEM_ID_LUXURY_BED ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_WITCHS_EYE, 6, MATERIAL_CHARCOAL, 4
		return 1
	}
	if ( matid == ITEM_ID_HIGH_GRADE_DRESSER ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_WITCHS_TEAR, 4
		return 1
	}
	if ( matid == ITEM_ID_KOTATSU ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_CHARCOAL, 4, MATERIAL_WATERDROP, 2
		return 1
	}
	if ( matid == ITEM_ID_DOWNSTAIRS ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_ANGELS_TEAR, 8, MATERIAL_WATERDROP, 4
		return 1
	}
	if ( matid == ITEM_ID_UPSTAIRS ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_ANGELS_TEAR, 8, MATERIAL_WATERDROP, 4
		return 1
	}
	if ( matid == ITEM_ID_RED_TREASURE_MACHINE ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_WITCHS_TEAR, 6, MATERIAL_RED_WEED, 2, MATERIAL_WATERDROP, 2
		return 1
	}
	if ( matid == ITEM_ID_BLUE_TREASURE_MACHINE ) {
		matval = SKILL_NORMAL_CARPENTRY, 30, 100
		matneed = MATERIAL_WITCHS_TEAR, 6, MATERIAL_RED_WEED, 2, MATERIAL_WATERDROP, 2
		return 1
	}
	if ( matid == ITEM_ID_HAPPY_BED ) {
		matval = SKILL_NORMAL_CARPENTRY, 40, 100
		matneed = MATERIAL_BIRDS_FEATHER, 10, MATERIAL_WATERDROP, 5, MATERIAL_RED_WEED, 4, MATERIAL_SEAWATER, 4
		return 1
	}
	if ( matid == ITEM_ID_ALTAR ) {
		matval = SKILL_NORMAL_CARPENTRY, 60, 100
		matneed = MATERIAL_BIRDS_FEATHER, 10, MATERIAL_CURSE_WEED, 4, MATERIAL_MITHRIL_FRAGMENT, 2
		return 1
	}
	if ( matid == ITEM_ID_WELL ) {
		matval = SKILL_NORMAL_CARPENTRY, 60, 100
		matneed = MATERIAL_ANGELS_TEAR, 10, MATERIAL_SNOW, 5, MATERIAL_MITHRIL_FRAGMENT, 2
		return 1
	}
	if ( matid == ITEM_ID_FOUNTAIN ) {
		matval = SKILL_NORMAL_CARPENTRY, 60, 100
		matneed = MATERIAL_ANGELS_TEAR, 10, MATERIAL_SNOW, 5, MATERIAL_MITHRIL_FRAGMENT, 2
		return 1
	}
	if ( matid == ITEM_ID_ROD_TELEPORTATION ) {
		matval = SKILL_NORMAL_CARPENTRY, 6, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_CASINO_CHIP, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_CURE_MINOR_WOUND ) {
		matval = SKILL_NORMAL_CARPENTRY, 6, 100
		matneed = MATERIAL_WITCHS_EYE, 2, MATERIAL_CASINO_CHIP, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_IDENTIFY ) {
		matval = SKILL_NORMAL_CARPENTRY, 9, 100
		matneed = MATERIAL_WITCHS_EYE, 3, MATERIAL_DRIFTWOOD, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_MAGIC_MISSILE ) {
		matval = SKILL_NORMAL_CARPENTRY, 9, 100
		matneed = MATERIAL_WITCHS_EYE, 3, MATERIAL_DRIFTWOOD, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_MAGIC_MAPPING ) {
		matval = SKILL_NORMAL_CARPENTRY, 9, 100
		matneed = MATERIAL_WITCHS_EYE, 3, MATERIAL_DRIFTWOOD, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_MAKE_DOOR ) {
		matval = SKILL_NORMAL_CARPENTRY, 9, 100
		matneed = MATERIAL_WITCHS_EYE, 3, MATERIAL_DRIFTWOOD, 1, MATERIAL_WITCHS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_SLOW ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_BIRDS_FEATHER, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_SILENCE ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_BIRDS_FEATHER, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_WEB ) {
		matval = SKILL_NORMAL_CARPENTRY, 12, 100
		matneed = MATERIAL_WITCHS_EYE, 4, MATERIAL_BIRDS_FEATHER, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_FIRE_BOLT ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_EYE, 5, MATERIAL_WATERDROP, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_ICE_BOLT ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_EYE, 5, MATERIAL_WATERDROP, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_LIGHTNING_BOLT ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_EYE, 5, MATERIAL_WATERDROP, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_FIRE_WALL ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_EYE, 5, MATERIAL_WATERDROP, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_ACID_GROUND ) {
		matval = SKILL_NORMAL_CARPENTRY, 15, 100
		matneed = MATERIAL_WITCHS_EYE, 5, MATERIAL_WATERDROP, 1, MATERIAL_SEAWATER, 1
		return 1
	}
	if ( matid == ITEM_ID_ROD_CURE ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_WITCHS_EYE, 6, MATERIAL_WATERDROP, 2, MATERIAL_SEAWATER, 2
		return 1
	}
	if ( matid == ITEM_ID_ROD_MANA ) {
		matval = SKILL_NORMAL_CARPENTRY, 18, 100
		matneed = MATERIAL_WITCHS_EYE, 6, MATERIAL_WATERDROP, 2, MATERIAL_SEAWATER, 2
		return 1
	}
	if ( matid == ITEM_ID_ROD_UNCURSE ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 6, MATERIAL_WATERDROP, 3, MATERIAL_HOWLING_WEED, 2
		return 1
	}
	if ( matid == ITEM_ID_ROD_SPEED ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 6, MATERIAL_WATERDROP, 3, MATERIAL_HOWLING_WEED, 2
		return 1
	}
	if ( matid == ITEM_ID_ROD_HOLY_LIGHT ) {
		matval = SKILL_NORMAL_CARPENTRY, 21, 100
		matneed = MATERIAL_WITCHS_EYE, 6, MATERIAL_WATERDROP, 3, MATERIAL_HOWLING_WEED, 2
		return 1
	}
	if ( matid == ITEM_ID_ROD_CHANGE_CREATURE ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_WITCHS_EYE, 7, MATERIAL_WATERDROP, 4, MATERIAL_HOWLING_WEED, 4
		return 1
	}
	if ( matid == ITEM_ID_ROD_ALCHEMY ) {
		matval = SKILL_NORMAL_CARPENTRY, 24, 100
		matneed = MATERIAL_WITCHS_EYE, 7, MATERIAL_WATERDROP, 4, MATERIAL_HOWLING_WEED, 4
		return 1
	}
	if ( matid == ITEM_ID_ROD_ALCHEMY ) {
		matval = SKILL_NORMAL_CARPENTRY, 27, 100
		matneed = MATERIAL_WITCHS_EYE, 8, MATERIAL_WATERDROP, 5, MATERIAL_HOWLING_WEED, 5
		return 1
	}
	if ( matid == ITEM_ID_ROD_DOMINATION ) {
		matval = SKILL_NORMAL_CARPENTRY, 35, 100
		matneed = MATERIAL_WITCHS_EYE, 10, MATERIAL_WATERDROP, 6, MATERIAL_RED_WEED, 4
		return 1
	}
	if ( matid == ITEM_ID_ROD_WISHING ) {
		matval = SKILL_NORMAL_CARPENTRY, 100, 100
		matneed = MATERIAL_WITCHS_EYE, 100, MATERIAL_WATERDROP, 50, MATERIAL_CURSE_WEED, 10, MATERIAL_MITHRIL_FRAGMENT, 10
		return 1
	}
	if ( matid == 10010 ) {
		matval = SKILL_NORMAL_ALCHEMY, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 2
		return 1
	}
	if ( matid == 10011 ) {
		matval = SKILL_NORMAL_ALCHEMY, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 4
		return 1
	}
	if ( matid == 10012 ) {
		matval = SKILL_NORMAL_ALCHEMY, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 2
		return 1
	}
	if ( matid == 10013 ) {
		matval = SKILL_NORMAL_ALCHEMY, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 4
		return 1
	}
	if ( matid == 10014 ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 2
		return 1
	}
	if ( matid == 10015 ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 4
		return 1
	}
	if ( matid == 10016 ) {
		matval = SKILL_NORMAL_ALCHEMY, 33, 100
		matneed = MATERIAL_PAPER, 2
		return 1
	}
	if ( matid == 10017 ) {
		matval = SKILL_NORMAL_ALCHEMY, 33, 100
		matneed = MATERIAL_PAPER, 4
		return 1
	}
	if ( matid == ITEM_ID_EMPTY_BOTTLE ) {
		matval = SKILL_NORMAL_ALCHEMY, 3, 100
		matneed = MATERIAL_FAIRY_DUST, 1, MATERIAL_ANGELS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_DIRTY_WATER ) {
		matval = SKILL_NORMAL_ALCHEMY, 3, 100
		matneed = MATERIAL_SNOW, 2, MATERIAL_ANGELS_TEAR, 1
		return 1
	}
	if ( matid == ITEM_ID_POTION_CURE_MINOR_WOUND ) {
		matval = SKILL_NORMAL_ALCHEMY, 3, 100
		matneed = MATERIAL_SNOW, 2, MATERIAL_ANGELS_TEAR, 1, MATERIAL_CASINO_CHIP, 1
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_CRIM_ALE ) {
		matval = SKILL_NORMAL_ALCHEMY, 3, 100
		matneed = MATERIAL_SNOW, 2, MATERIAL_HUMAN_GENE, 1
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_SULFURIC ) {
		matval = SKILL_NORMAL_ALCHEMY, 3, 100
		matneed = MATERIAL_SNOW, 2, MATERIAL_ANGELS_TEAR, 1, MATERIAL_CASINO_CHIP, 1
		return 1
	}
	if ( matid == ITEM_ID_POTION_BLINDNESS ) {
		matval = SKILL_NORMAL_ALCHEMY, 6, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_ANGELS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_CONFUSION ) {
		matval = SKILL_NORMAL_ALCHEMY, 6, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_ANGELS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_SLEEPING_DRUG ) {
		matval = SKILL_NORMAL_ALCHEMY, 6, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_ANGELS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_PARALYSIS ) {
		matval = SKILL_NORMAL_ALCHEMY, 6, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_ANGELS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_DYE ) {
		matval = SKILL_NORMAL_ALCHEMY, 6, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_ANGELS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POISON ) {
		matval = SKILL_NORMAL_ALCHEMY, 9, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_WITCHS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_SALT_SOLUTION ) {
		matval = SKILL_NORMAL_ALCHEMY, 9, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_WITCHS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_RESTORE_BODY ) {
		matval = SKILL_NORMAL_ALCHEMY, 9, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_WITCHS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_RESTORE_SPIRIT ) {
		matval = SKILL_NORMAL_ALCHEMY, 9, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_WITCHS_TEAR, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_DEFENDER ) {
		matval = SKILL_NORMAL_ALCHEMY, 12, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_SEAWATER, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_TROLL_BLOOD ) {
		matval = SKILL_NORMAL_ALCHEMY, 12, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_SEAWATER, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_CURE_MAJOR_WOUND ) {
		matval = SKILL_NORMAL_ALCHEMY, 12, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_SEAWATER, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_MOLOTOV ) {
		matval = SKILL_NORMAL_ALCHEMY, 12, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_SEAWATER, 1, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_WHISKY ) {
		matval = SKILL_NORMAL_ALCHEMY, 12, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_HUMAN_GENE, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_RESISTANCE ) {
		matval = SKILL_NORMAL_ALCHEMY, 15, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_SEAWATER, 2, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_SLOW ) {
		matval = SKILL_NORMAL_ALCHEMY, 15, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_SEAWATER, 2, MATERIAL_CASINO_CHIP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_CURE_CRITICAL_WOUND ) {
		matval = SKILL_NORMAL_ALCHEMY, 18, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_HOWLING_WEED, 2, MATERIAL_BIRDS_FEATHER, 2
		return 1
	}
	if ( matid == ITEM_ID_FIREPROOF_LIQUID ) {
		matval = SKILL_NORMAL_ALCHEMY, 18, 100
		matneed = MATERIAL_FAIRY_DUST, 4, MATERIAL_HOWLING_WEED, 2, MATERIAL_BIRDS_FEATHER, 2
		return 1
	}
	if ( matid == ITEM_ID_ACIDPROOF_LIQUID ) {
		matval = SKILL_NORMAL_ALCHEMY, 18, 100
		matneed = MATERIAL_ELECTRICITY, 4, MATERIAL_HOWLING_WEED, 2, MATERIAL_BIRDS_FEATHER, 2
		return 1
	}
	if ( matid == ITEM_ID_LOVE_POTION ) {
		matval = SKILL_NORMAL_ALCHEMY, 18, 100
		matneed = MATERIAL_ELECTRICITY, 4, MATERIAL_HOWLING_WEED, 2, MATERIAL_BIRDS_FEATHER, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_MUTATION ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_ELECTRICITY, 4, MATERIAL_HOWLING_WEED, 3, MATERIAL_BIRDS_FEATHER, 3
		return 1
	}
	if ( matid == ITEM_ID_POTION_CURE_MUTATION ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_ELECTRICITY, 4, MATERIAL_HOWLING_WEED, 3, MATERIAL_BIRDS_FEATHER, 3
		return 1
	}
	if ( matid == ITEM_ID_POTION_WEAKEN_RESISTANCE ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_ELECTRICITY, 4, MATERIAL_HOWLING_WEED, 3, MATERIAL_BIRDS_FEATHER, 3
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_SODA ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_ELECTRICITY, 4, MATERIAL_HOWLING_WEED, 3, MATERIAL_BIRDS_FEATHER, 3
		return 1
	}
	if ( matid == ITEM_ID_POTION_SPEED ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_ELECTRICITY, 4, MATERIAL_HOWLING_WEED, 3, MATERIAL_BIRDS_FEATHER, 3
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_MILK ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_SNOW, 4, MATERIAL_BLACK_MIST, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_SACRED_HEALER_JURE ) {
		matval = SKILL_NORMAL_ALCHEMY, 24, 100
		matneed = MATERIAL_ICE_STONE, 2, MATERIAL_RED_WEED, 1, MATERIAL_WATERDROP, 1
		return 1
	}
	if ( matid == ITEM_ID_BOTTLE_WATER ) {
		matval = SKILL_NORMAL_ALCHEMY, 24, 100
		matneed = MATERIAL_ICE_STONE, 2, MATERIAL_WATERDROP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_CURE_CORRUPTION ) {
		matval = SKILL_NORMAL_ALCHEMY, 27, 100
		matneed = MATERIAL_FIRE_STONE, 4, MATERIAL_RED_WEED, 3, MATERIAL_WATERDROP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_EVOLUTION ) {
		matval = SKILL_NORMAL_ALCHEMY, 27, 100
		matneed = MATERIAL_FIRE_STONE, 4, MATERIAL_RED_WEED, 3, MATERIAL_WATERDROP, 2
		return 1
	}
	if ( matid == ITEM_ID_POTION_DESCENT ) {
		matval = SKILL_NORMAL_ALCHEMY, 30, 100
		matneed = MATERIAL_ICE_STONE, 6, MATERIAL_RED_WEED, 6, MATERIAL_MITHRIL_FRAGMENT, 4
		return 1
	}
	if ( matid == ITEM_ID_POTION_OF_GREATER_CURE_CORRUPTION ) {
		matval = SKILL_NORMAL_ALCHEMY, 30, 100
		matneed = MATERIAL_ICE_STONE, 4, MATERIAL_RED_WEED, 6, MATERIAL_WATERDROP, 4
		return 1
	}
	if ( matid == ITEM_ID_POTION_POTENTIAL ) {
		matval = SKILL_NORMAL_ALCHEMY, 50, 100
		matneed = MATERIAL_ICE_STONE, 10, MATERIAL_CURSE_WEED, 4, MATERIAL_MITHRIL_FRAGMENT, 2
		return 1
	}
	if ( matid == ITEM_ID_WORTHLESS_FAKE_GOLD_BAR ) {
		matval = SKILL_NORMAL_ALCHEMY, 3, 100
		matneed = MATERIAL_GARBAGE, 2, MATERIAL_ANGELS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_BROKEN_SWORD ) {
		matval = SKILL_NORMAL_ALCHEMY, 6, 100
		matneed = MATERIAL_GARBAGE, 2, MATERIAL_WITCHS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_EARTH_CRYSTAL ) {
		matval = SKILL_NORMAL_ALCHEMY, 9, 100
		matneed = MATERIAL_CASINO_CHIP, 2, MATERIAL_ANGELS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_MANA_CRYSTAL ) {
		matval = SKILL_NORMAL_ALCHEMY, 9, 100
		matneed = MATERIAL_CASINO_CHIP, 2, MATERIAL_ANGELS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_SUN_CRYSTAL ) {
		matval = SKILL_NORMAL_ALCHEMY, 9, 100
		matneed = MATERIAL_CASINO_CHIP, 2, MATERIAL_ANGELS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_GOLD_BAR ) {
		matval = SKILL_NORMAL_ALCHEMY, 15, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_SEAWATER, 2
		return 1
	}
	if ( matid == ITEM_ID_RAW_EMERALD_ORE ) {
		matval = SKILL_NORMAL_ALCHEMY, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_HOWLING_WEED, 2
		return 1
	}
	if ( matid == ITEM_ID_RAW_DIAMOND_ORE ) {
		matval = SKILL_NORMAL_ALCHEMY, 21, 100
		matneed = MATERIAL_BIRDS_FEATHER, 2, MATERIAL_RED_WEED, 2
		return 1
	}
	if ( matid == 10020 ) {
		matval = SKILL_NORMAL_TAILORING, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 2
		return 1
	}
	if ( matid == 10021 ) {
		matval = SKILL_NORMAL_TAILORING, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 4
		return 1
	}
	if ( matid == 10022 ) {
		matval = SKILL_NORMAL_TAILORING, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 2
		return 1
	}
	if ( matid == 10023 ) {
		matval = SKILL_NORMAL_TAILORING, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 4
		return 1
	}
	if ( matid == 10024 ) {
		matval = SKILL_NORMAL_TAILORING, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 2
		return 1
	}
	if ( matid == 10025 ) {
		matval = SKILL_NORMAL_TAILORING, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 4
		return 1
	}
	if ( matid == 10026 ) {
		matval = SKILL_NORMAL_TAILORING, 33, 100
		matneed = MATERIAL_PAPER, 2
		return 1
	}
	if ( matid == 10027 ) {
		matval = SKILL_NORMAL_TAILORING, 33, 100
		matneed = MATERIAL_PAPER, 4
		return 1
	}
	if ( matid == ITEM_ID_SHOES ) {
		matval = SKILL_NORMAL_TAILORING, 3, 100
		matneed = MATERIAL_HUMAN_GENE, 2, MATERIAL_GARBAGE, 4
		return 1
	}
	if ( matid == ITEM_ID_LIGHT_CLOAK ) {
		matval = SKILL_NORMAL_TAILORING, 3, 100
		matneed = MATERIAL_CHARCOAL, 4, MATERIAL_GARBAGE, 4
		return 1
	}
	if ( matid == ITEM_ID_LIGHT_GLOVES ) {
		matval = SKILL_NORMAL_TAILORING, 3, 100
		matneed = MATERIAL_CHARCOAL, 2, MATERIAL_GARBAGE, 4
		return 1
	}
	if ( matid == ITEM_ID_BOOTS ) {
		matval = SKILL_NORMAL_TAILORING, 9, 100
		matneed = MATERIAL_HUMAN_GENE, 4, MATERIAL_GARBAGE, 4, MATERIAL_CHARCOAL, 2
		return 1
	}
	if ( matid == ITEM_ID_ROBE ) {
		matval = SKILL_NORMAL_TAILORING, 9, 100
		matneed = MATERIAL_HUMAN_GENE, 4, MATERIAL_GARBAGE, 4, MATERIAL_CHARCOAL, 2
		return 1
	}
	if ( matid == ITEM_ID_GLOVES ) {
		matval = SKILL_NORMAL_TAILORING, 9, 100
		matneed = MATERIAL_HUMAN_GENE, 4, MATERIAL_GARBAGE, 4, MATERIAL_CHARCOAL, 4
		return 1
	}
	if ( matid == ITEM_ID_PERIDOT ) {
		matval = SKILL_NORMAL_TAILORING, 12, 100
		matneed = MATERIAL_HUMAN_GENE, 4, MATERIAL_WITCHS_TEAR, 2
		return 1
	}
	if ( matid == ITEM_ID_AURORA_RING ) {
		matval = SKILL_NORMAL_TAILORING, 21, 100
		matneed = MATERIAL_BIRDS_FEATHER, 10, MATERIAL_ELECTRICITY, 4, MATERIAL_BLACK_MIST, 4
		return 1
	}
	if ( matid == ITEM_ID_PANTY ) {
		matval = SKILL_NORMAL_TAILORING, 21, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_CHARCOAL, 6
		return 1
	}
	if ( matid == ITEM_ID_POPE_ROBE ) {
		matval = SKILL_NORMAL_TAILORING, 21, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_CHARCOAL, 6, MATERIAL_BLUE_WEED, 4
		return 1
	}
	if ( matid == ITEM_ID_SEVEN_LEAGUE_BOOTS ) {
		matval = SKILL_NORMAL_TAILORING, 24, 100
		matneed = MATERIAL_LEATHER, 10, MATERIAL_CHARCOAL, 10, MATERIAL_HOT_WATER, 4
		return 1
	}
	if ( matid == ITEM_ID_VINDALE_CLOAK ) {
		matval = SKILL_NORMAL_TAILORING, 27, 100
		matneed = MATERIAL_STICK, 10, MATERIAL_MITHRIL_FRAGMENT, 2, MATERIAL_HOLY_WEED, 2
		return 1
	}
	if ( matid == ITEM_ID_PLUSH_DOLL ) {
		matval = SKILL_NORMAL_TAILORING, 6, 100
		matneed = MATERIAL_GARBAGE, 4, MATERIAL_CHARCOAL, 2
		return 1
	}
	if ( matid == ITEM_ID_CARGO_RAG_DOLL ) {
		matval = SKILL_NORMAL_TAILORING, 12, 100
		matneed = MATERIAL_CHARCOAL, 4, MATERIAL_BIRDS_FEATHER, 2
		return 1
	}
	if ( matid == ITEM_ID_GIFT ) {
		matval = SKILL_NORMAL_TAILORING, 15, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_SAP_OF_YAGGDRASIL, 2, MATERIAL_HOWLING_WEED, 2
		return 1
	}
	if ( godcheck() == "jure" ) {
		if ( cPiety(CHARA_PLAYER) >= 5000 ) {
			if ( matid == ITEM_ID_JURES_BODY_PILLOW ) {
				matval = SKILL_NORMAL_TAILORING, 21, 100
				matneed = MATERIAL_BIRDS_FEATHER, 66
				return 1
			}
		}
	}
	if ( matid == 10030 ) {
		matval = SKILL_NORMAL_JEWELER, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 2
		return 1
	}
	if ( matid == 10031 ) {
		matval = SKILL_NORMAL_JEWELER, 1, 100
		matneed = MATERIAL_100_YEN_COIN, 4
		return 1
	}
	if ( matid == 10032 ) {
		matval = SKILL_NORMAL_JEWELER, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 2
		return 1
	}
	if ( matid == 10033 ) {
		matval = SKILL_NORMAL_JEWELER, 12, 100
		matneed = MATERIAL_500_YEN_COIN, 4
		return 1
	}
	if ( matid == 10034 ) {
		matval = SKILL_NORMAL_JEWELER, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 2
		return 1
	}
	if ( matid == 10035 ) {
		matval = SKILL_NORMAL_JEWELER, 21, 100
		matneed = MATERIAL_MEDICINAL_WEED, 4
		return 1
	}
	if ( matid == 10036 ) {
		matval = SKILL_NORMAL_JEWELER, 33, 100
		matneed = MATERIAL_PAPER, 2
		return 1
	}
	if ( matid == 10037 ) {
		matval = SKILL_NORMAL_JEWELER, 33, 100
		matneed = MATERIAL_PAPER, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_IDENTIFY ) {
		matval = SKILL_NORMAL_JEWELER, 3, 100
		matneed = MATERIAL_GARBAGE, 2, MATERIAL_HUMAN_GENE, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_MINOR_TELEPORTATION ) {
		matval = SKILL_NORMAL_JEWELER, 3, 100
		matneed = MATERIAL_GARBAGE, 2, MATERIAL_HUMAN_GENE, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_ESCAPE ) {
		matval = SKILL_NORMAL_JEWELER, 6, 100
		matneed = MATERIAL_GARBAGE, 4, MATERIAL_HUMAN_GENE, 2, MATERIAL_DRIFTWOOD, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_MAGICAL_MAP ) {
		matval = SKILL_NORMAL_JEWELER, 6, 100
		matneed = MATERIAL_GARBAGE, 4, MATERIAL_HUMAN_GENE, 2, MATERIAL_DRIFTWOOD, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_TELEPORTATION ) {
		matval = SKILL_NORMAL_JEWELER, 6, 100
		matneed = MATERIAL_GARBAGE, 4, MATERIAL_HUMAN_GENE, 2, MATERIAL_DRIFTWOOD, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_ENCHANT_WEAPON ) {
		matval = SKILL_NORMAL_JEWELER, 9, 100
		matneed = MATERIAL_GARBAGE, 6, MATERIAL_HUMAN_GENE, 4, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_ENCHANT_ARMOR ) {
		matval = SKILL_NORMAL_JEWELER, 9, 100
		matneed = MATERIAL_GARBAGE, 6, MATERIAL_HUMAN_GENE, 4, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_INFERIOR_MATERIAL ) {
		matval = SKILL_NORMAL_JEWELER, 9, 100
		matneed = MATERIAL_GARBAGE, 6, MATERIAL_HUMAN_GENE, 4, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_INCOGNITO ) {
		matval = SKILL_NORMAL_JEWELER, 9, 100
		matneed = MATERIAL_GARBAGE, 4, MATERIAL_HUMAN_GENE, 2, MATERIAL_DRIFTWOOD, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_UNCURSE ) {
		matval = SKILL_NORMAL_JEWELER, 12, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_BLACK_MIST, 2, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_HOLY_VEIL ) {
		matval = SKILL_NORMAL_JEWELER, 12, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_BLACK_MIST, 2, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_CHANGE_MATERIAL ) {
		matval = SKILL_NORMAL_JEWELER, 12, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_SNOW, 4, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_HOLY_LIGHT ) {
		matval = SKILL_NORMAL_JEWELER, 12, 100
		matneed = MATERIAL_BIRDS_FEATHER, 4, MATERIAL_BLACK_MIST, 2, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_HOLY_RAIN ) {
		matval = SKILL_NORMAL_JEWELER, 15, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_BLACK_MIST, 4, MATERIAL_DRIFTWOOD, 4
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_GREATER_ENCHANT_WEAPON ) {
		matval = SKILL_NORMAL_JEWELER, 15, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_HOWLING_WEED, 2, MATERIAL_LEATHER, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_GREATER_ENCHANT_ARMOR ) {
		matval = SKILL_NORMAL_JEWELER, 15, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_HOWLING_WEED, 2, MATERIAL_LEATHER, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_RECHARGE ) {
		matval = SKILL_NORMAL_JEWELER, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_HOWLING_WEED, 4, MATERIAL_ELECTRICITY, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_GREATER_IDENTIFY ) {
		matval = SKILL_NORMAL_JEWELER, 18, 100
		matneed = MATERIAL_BIRDS_FEATHER, 6, MATERIAL_HOWLING_WEED, 4, MATERIAL_ELECTRICITY, 2
		return 1
	}
	if ( matid == ITEM_ID_SCROLL_SUPERIOR_MATERIAL ) {
		matval = SKILL_NORMAL_JEWELER, 21, 100
		matneed = MATERIAL_WATERDROP, 6, MATERIAL_LEATHER, 6, MATERIAL_MAGIC_PAPER, 1
		return 1
	}
	if ( matid == ITEM_ID_BOOK_RESURRECTION ) {
		matval = SKILL_NORMAL_JEWELER, 24, 100
		matneed = MATERIAL_WATERDROP, 6, MATERIAL_LEATHER, 6, MATERIAL_MAGIC_PAPER, 2
		return 1
	}
	if ( matid == ITEM_ID_FLYING_SCROLL ) {
		matval = SKILL_NORMAL_JEWELER, 27, 100
		matneed = MATERIAL_WATERDROP, 8, MATERIAL_CURSE_WEED, 2, MATERIAL_MAGIC_INK, 2
		return 1
	}
	if ( matid == ITEM_ID_SPELLBOOK_HARVEST ) {
		matval = SKILL_NORMAL_JEWELER, 30, 100
		matneed = MATERIAL_WATERDROP, 10, MATERIAL_MAGIC_INK, 2, MATERIAL_CURVED_STICK, 2
		return 1
	}
	return -1

*label_1274
	matneed = -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
	matval = -1
	if ( another_matref(1, matid - 100000) != 0 ) {
		matval = -1
		matneed = 40 + another_matref(0, matid - 100000), another_matref(1, matid - 100000)
		return 1
	}
	return -1

*label_1275
	matneed = -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
	matval = -1
	if ( usernpcmatval(1, matid - 1000000) != 0 ) {
		matval = usernpcmatval(0, matid - 1000000), usernpcmatval(1, matid - 1000000), usernpcmatval(2, matid - 1000000), usernpcmatval(3, matid - 1000000), usernpcmatval(4, matid - 1000000)
		matneed = usernpcmatneed(0, matid - 1000000), usernpcmatneed(1, matid - 1000000), usernpcmatneed(2, matid - 1000000), usernpcmatneed(3, matid - 1000000), usernpcmatneed(4, matid - 1000000), usernpcmatneed(5, matid - 1000000), usernpcmatneed(6, matid - 1000000), usernpcmatneed(7, matid - 1000000), usernpcmatneed(8, matid - 1000000), usernpcmatneed(9, matid - 1000000), usernpcmatneed(10, matid - 1000000), usernpcmatneed(11, matid - 1000000)
		return 1
	}
	return -1

*label_1276
	matneed = -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
	matval = -1
	if ( useritemmatval(1, matid - 2000000) != 0 ) {
		matval = useritemmatval(0, matid - 2000000), useritemmatval(1, matid - 2000000), useritemmatval(2, matid - 2000000), useritemmatval(3, matid - 2000000), useritemmatval(4, matid - 2000000)
		matneed = useritemmatneed(0, matid - 2000000), useritemmatneed(1, matid - 2000000), useritemmatneed(2, matid - 2000000), useritemmatneed(3, matid - 2000000), useritemmatneed(4, matid - 2000000), useritemmatneed(5, matid - 2000000), useritemmatneed(6, matid - 2000000), useritemmatneed(7, matid - 2000000), useritemmatneed(8, matid - 2000000), useritemmatneed(9, matid - 2000000), useritemmatneed(10, matid - 2000000), useritemmatneed(11, matid - 2000000)
		return 1
	}
	return -1

#defcfunc eleinfo int eleinfo_skillid, int eleinfo_mode
	if ( eleinfo_skillid == SKILL_RES_FIRE ) {
		if ( eleinfo_mode == 0 ) {
			return 3
		}
		else {
			return 108
		}
	}
	if ( eleinfo_skillid == SKILL_RES_COLD ) {
		if ( eleinfo_mode == 0 ) {
			return 12
		}
		else {
			return 106
		}
	}
	if ( eleinfo_skillid == SKILL_RES_LIGHTNING ) {
		if ( eleinfo_mode == 0 ) {
			return 5
		}
		else {
			return 107
		}
	}
	if ( eleinfo_skillid == SKILL_RES_CHAOS ) {
		if ( eleinfo_mode == 0 ) {
			return 8
		}
		else {
			return 114
		}
	}
	if ( eleinfo_skillid == SKILL_RES_DARKNESS ) {
		if ( eleinfo_mode == 0 ) {
			return 4
		}
		else {
			return 115
		}
	}
	if ( eleinfo_skillid == SKILL_RES_NERVE ) {
		if ( eleinfo_mode == 0 ) {
			return 9
		}
		else {
			return 111
		}
	}
	if ( eleinfo_skillid == SKILL_RES_SOUND ) {
		if ( eleinfo_mode == 0 ) {
			return 11
		}
		else {
			return 112
		}
	}
	if ( eleinfo_skillid == SKILL_RES_MIND ) {
		if ( eleinfo_mode == 0 ) {
			return 10
		}
		else {
			return 113
		}
	}
	if ( eleinfo_skillid == SKILL_RES_POISON ) {
		if ( eleinfo_mode == 0 ) {
			return 2
		}
		else {
			return 110
		}
	}
	if ( eleinfo_skillid == SKILL_RES_NETHER ) {
		if ( eleinfo_mode == 0 ) {
			return 7
		}
		else {
			return 109
		}
	}
	if ( eleinfo_skillid == SKILL_RESDMG_ACID ) {
		if ( eleinfo_mode == 0 ) {
			return 2
		}
		else {
			return 110
		}
	}
	return 0

#deffunc characreate int characreate_charid, int characreate_dbid, int characreate_x, int characreate_y
	characreatehack = -1
	if ( characreate_x == (-3) ) {
		cxinit = -1
		cyinit = -1
	}
	else {
		cxinit = characreate_x
		cyinit = characreate_y
	}
	if ( characreate_dbid == CREATURE_ID_BUG ) {
		dbid = -1
	}
	else {
		dbid = characreate_dbid
	}
	if ( dbid == (-2) ) {
		rc = characreate_charid
		gosub *label_4421
	}
	else {
		rc = characreate_charid
		gosub *label_1707
	}
	initlv = 0
	voidlv = 0
	characreatehack = 0
	if ( stat == 1 ) {
		resetfaction rc, 1
		if ( rc != CHARA_PLAYER ) {
			if ( characreate_x != (-1) ) {
				place_chara rc, cxinit, cyinit
			}
			if ( cId(rc) == CREATURE_ID_BLACK_CAT ) {
				believegod rc, godno2godid(4)
			}
			if ( cId(rc) == CREATURE_ID_CUTE_FAIRY ) {
				believegod rc, godno2godid(7)
			}
			if ( cId(rc) == CREATURE_ID_ANDROID ) {
				believegod rc, godno2godid(1)
			}
			if ( cId(rc) == CREATURE_ID_BLACK_ANGEL ) {
				believegod rc, godno2godid(2)
			}
			if ( cId(rc) == CREATURE_ID_EXILE ) {
				believegod rc, godno2godid(3)
			}
			if ( cId(rc) == CREATURE_ID_GOLDEN_KNIGHT ) {
				believegod rc, godno2godid(5)
			}
			if ( cId(rc) == CREATURE_ID_DEFENDER ) {
				believegod rc, godno2godid(6)
			}
			if ( cId(rc) == CREATURE_ID_LULWY ) {
				believegod rc, godno2godid(2)
			}
			if ( cId(rc) == CREATURE_ID_EHEKATL ) {
				believegod rc, godno2godid(4)
			}
			if ( cId(rc) == CREATURE_ID_GOD_INSIDE_EHEKATL ) {
				believegod rc, godno2godid(0)
				cbitmod CHARA_BIT_NO_GOD, rc, TRUE
			}
			if ( cId(rc) == CREATURE_ID_OPATOS ) {
				believegod rc, godno2godid(5)
			}
			if ( cId(rc) == CREATURE_ID_KUMIROMI ) {
				believegod rc, godno2godid(7)
			}
			if ( cId(rc) == CREATURE_ID_MANI ) {
				believegod rc, godno2godid(1)
			}
			if ( cId(rc) == CREATURE_ID_JURE_FANATIC ) {
				believegod rc, godno2godid(6)
			}
			if ( cId(rc) == CREATURE_ID_PART_TIME_WORKER ) {
				believegod rc, godno2godid(6)
			}
			if ( cId(rc) == CREATURE_ID_JURE ) {
				believegod rc, godno2godid(6)
			}
			if ( cId(rc) == CREATURE_ID_ITZPALT ) {
				believegod rc, godno2godid(3)
			}
			if ( cId(rc) == CREATURE_ID_USER & cUNID(rc) < usernpcmax ) {
				if ( userdatan2(3, cUNID(rc)) != "" ) {
					believegod rc, userdatan2(3, cUNID(rc))
					if ( userdatan2(3, cUNID(rc)) == "eyth" ) {
						cbitmod CHARA_BIT_NO_GOD, rc, TRUE
					}
				}
				else {
					repeat usergodmax
						if ( cUNID(rc) == findunid(usergoddatan(7, cnt)) - 1 ) {
							believegod rc, usergoddatan(2, cnt)
							break
						}
						if ( cUNID(rc) == findunid(usergoddatan(10, cnt)) - 1 ) {
							believegod rc, usergoddatan(2, cnt)
							break
						}
					loop
				}
			}
		}
		if ( rc == MAX_CHARA_NC ) {
			cExist(rc) = CHAR_STATE_DEAD
			modnpcmemory 1, rc, -1
			nc_skipflag = 0
			return 1
		}
	}
	else {
		rc = MAX_CHARA_NC
		nc_skipflag = 0
		return 0
	}
	nc_skipflag = 0
	return 1

#defcfunc relationbetween int relationbetween_arg1, int relationbetween_arg1
	if ( relationbetween_arg1 == 0 | petcheck(relationbetween_arg1) ) {
		if ( relationbetween_arg1 == 0 | petcheck(relationbetween_arg1) ) {
			return 10
		}
	}
	if ( ocHostileTargetTotal(relationbetween_arg1) ) {
		if ( ocHostileTarget1(relationbetween_arg1) - 1 == relationbetween_arg1 ) {
			if ( cAiAggro(relationbetween_arg1) > 0 ) {
				return -3
			}
		}
	}
	if ( cRole(relationbetween_arg1) == ROLE_GUARD ) {
		if ( cKarma(relationbetween_arg1) < (-30) ) {
			if ( cbit(CHARA_BIT_INCOGNITO, relationbetween_arg1) == FALSE ) {
				return -3
			}
		}
	}
	if ( relationbetween_arg1 == 0 | petcheck(relationbetween_arg1) ) {
		if ( cOrgRelation(relationbetween_arg1) == cRelation(relationbetween_arg1) ) {
			return 10
		}
	}
	else {
		if ( cOrgRelation(relationbetween_arg1) == cOrgRelation(relationbetween_arg1) ) {
			return 10
		}
	}
	if ( cOrgRelation(relationbetween_arg1) <= RELATION_ENEMY ) {
		if ( ocbit(14, relationbetween_arg1) ) {
			return 10
		}
		if ( cRelation(relationbetween_arg1) > RELATION_ENEMY ) {
			return -3
		}
	}
	else {
		if ( relationbetween_arg1 == 0 | petcheck(relationbetween_arg1) ) {
			return cRelation(relationbetween_arg1)
		}
		else {
			if ( relationbetween_arg1 == 0 | petcheck(relationbetween_arg1) ) {
				return cRelation(relationbetween_arg1)
			}
			else {
				if ( cOrgRelation(relationbetween_arg1) <= RELATION_ENEMY ) {
					return -3
				}
			}
		}
	}
	return 0

#defcfunc calcage int calcage_arg1
	if ( gYear  - cAge(calcage_arg1) < 0 ) {
		return lang("不明", "Unknown")
	}
	return gYear  - cAge(calcage_arg1)

#deffunc rowactend int rowactend_arg1
	if ( cRowAct(rowactend_arg1) != 20002 ) {
		cRowAct(rowactend_arg1) = ACTION_NONE
		cActionPeriod(rowactend_arg1) = 0
		cItemUsing(rowactend_arg1) = 0
	}
	return

#defcfunc findchara int findchara_charid, int findchara_prm1, int findchara_prm2
	locvar_findchara_p = 0
	repeat 188, 57
		dup roopbuf, cExist(cnt)
		dup roopbuf1, cRole(cnt)
		dup roopbuf2, cId(cnt)
		if ( roopbuf != 1 ) {
			if ( roopbuf != 2 | findchara_prm2 != 0 ) {
				continue
			}
		}
		if ( roopbuf1 == 10001 | roopbuf1 == 10018 | eqfaction(cnt, "petshop") ) {
			continue
		}
		if ( roopbuf2 == findchara_charid ) {
			if ( findchara_prm1 != 0 & cQuality(cnt) != findchara_prm1 ) {
				continue
			}
			locvar_findchara_p = cnt
			break
		}
	loop
	return locvar_findchara_p

#defcfunc findally int findally_charid
	locvar_findchara_p = -1
	repeat 16
		if ( cExist(cnt) != CHAR_STATE_ALIVE ) {
			continue
		}
		if ( cId(cnt) == findally_charid ) {
			locvar_findchara_p = cnt
			break
		}
	loop
	return locvar_findchara_p

#defcfunc implevel int implevel_arg1
	if ( implevel_arg1 < 10 ) {
		return 0
	}
	if ( implevel_arg1 < 25 ) {
		return 1
	}
	if ( implevel_arg1 < 50 - 10 ) {
		return 2
	}
	if ( implevel_arg1 < 75 ) {
		return 3
	}
	if ( implevel_arg1 < 100 ) {
		return 4
	}
	if ( implevel_arg1 < 150 ) {
		return 5
	}
	if ( implevel_arg1 < 200 ) {
		return 6
	}
	if ( implevel_arg1 < 300 ) {
		return 7
	}
	return 8

#deffunc modimp int modimp_charid, int modimp_arg2
	locvar_modimp_p = implevel(cImpression(modimp_charid))
	if ( modimp_arg2 < 0 ) {
		locvar_modimp_i = modimp_arg2
	}
	else {
		locvar_modimp_i = modimp_arg2 * 100 / (50 + locvar_modimp_p * locvar_modimp_p * locvar_modimp_p)
		if ( locvar_modimp_i == 0 ) {
			if ( locvar_modimp_p < rnd(10) ) {
				locvar_modimp_i = 1
			}
		}
	}
	cImpression(modimp_charid) += locvar_modimp_i
	locvar_modimp_p(1) = implevel(cImpression(modimp_charid))
	if ( locvar_modimp_p > locvar_modimp_p(1) ) {
		txtef COLOR_PURPLE
		txt -1, lang(cnName(modimp_charid) + "との関係が<" + _impression(locvar_modimp_p(1)) + ">になった…", "Your relation with " + cnName(modimp_charid) + " becomes <" + _impression(locvar_modimp_p(1)) + ">...")
		return
	}
	if ( locvar_modimp_p(1) > locvar_modimp_p ) {
		if ( cRelation(modimp_charid) != RELATION_ENEMY ) {
			txtef COLOR_GREEN
			txt -1, lang(cnName(modimp_charid) + "との関係が<" + _impression(locvar_modimp_p(1)) + ">になった！", "Your relation with " + cnName(modimp_charid) + " becomes <" + _impression(locvar_modimp_p(1)) + ">!")
		}
		return
	}
	return

#deffunc put_questtarget
	repeat 188, 57
		if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
			cbitmod CHARA_BIT_QUEST_TARGET, cnt, TRUE
			cRelation(cnt) = RELATION_ENEMY
		}
	loop
	return

#defcfunc exist_questtarget
	locvar_exist_questtarget_f = 0
	repeat 188, 57
		if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
			if ( cbit(CHARA_BIT_QUEST_TARGET, cnt) == TRUE ) {
				locvar_exist_questtarget_f++
			}
		}
	loop
	return locvar_exist_questtarget_f

#defcfunc exist_questtarget_ex
	locvar_exist_questtarget_f = 0
	repeat 188, 57
		if ( cOrgRelation(cnt) == RELATION_ALLY ) {
			continue
		}
		if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
			locvar_exist_questtarget_f++
		}
	loop
	return locvar_exist_questtarget_f

#deffunc check_quest
	if ( gArea  == AREA_VERNIS ) {
		if ( gLevel  == 3 ) {
			if ( exist_questtarget() == 0 ) {
				if ( sqSlime < 2 ) {
					sqSlime = 2
					snd SOUNDLIST_WRITE1
					txtef COLOR_GREEN
					txt -1, lang("ジャーナルが更新された。", "Your journal has been updated.")
				}
			}
		}
		if ( gLevel  == 4 ) {
			if ( exist_questtarget() == 0 ) {
				if ( sqRogue < 2 ) {
					sqRogue = 2
					snd SOUNDLIST_WRITE1
					txtef COLOR_GREEN
					txt -1, lang("ジャーナルが更新された。", "Your journal has been updated.")
				}
			}
		}
		if ( gLevel  == 5 ) {
			if ( exist_questtarget() == 0 ) {
				if ( sqNightmare < 3 ) {
					sqNightmare = 3
					snd SOUNDLIST_WRITE1
					txtef COLOR_GREEN
					txt -1, lang("ジャーナルが更新された。", "Your journal has been updated.")
				}
			}
		}
	}
	if ( gArea  == AREA_YOWYN ) {
		if ( gLevel  == 3 ) {
			if ( exist_questtarget() == 0 ) {
				if ( sqCat < 2 ) {
					sqCat = 2
					snd SOUNDLIST_WRITE1
					txtef COLOR_GREEN
					txt -1, lang("ジャーナルが更新された。", "Your journal has been updated.")
				}
			}
		}
		if ( gLevel  == 4 ) {
			if ( exist_questtarget() == 0 ) {
				if ( sqWar < 3 ) {
					sqWar = 3
					snd SOUNDLIST_WRITE1
					txtef COLOR_GREEN
					txt -1, lang("ジャーナルが更新された。", "Your journal has been updated.")
				}
			}
		}
	}
	if ( gArea  == AREA_LUMIEST ) {
		if ( gLevel  == 20 ) {
			if ( exist_questtarget() == 0 ) {
				if ( sqSewer < 2 ) {
					sqSewer = 2
					snd SOUNDLIST_WRITE1
					txtef COLOR_GREEN
					txt -1, lang("ジャーナルが更新された。", "Your journal has been updated.")
				}
			}
		}
	}
	if ( areaId(gArea ) == AREA_DUNGEON ) {
		if ( gLevel  == 0 ) {
			if ( exist_questtarget() == 0 ) {
				music = MUSICLIST_MCFANFARE
				musicloop = 1
				gQuestStatus = QUEST_STATE_SUCCESS
				gosub *music_play
				if ( ogEventDungeonAlien < 5 ) {
					ogEventDungeonAlien = 5
					txtef COLOR_GREEN
					txt -1, lang("エイリアンを全滅させた。戻ってメイド長に報告しよう。", "All aliens have been exterminated. Let's report back to the maid.")
				}
			}
			else {
				txtef COLOR_BLUE
				txt -1, lang("[殲滅対象]残り" + exist_questtarget() + "体" + "] ", "" + exist_questtarget() + " more to go.")
			}
		}
	}
	if ( gArea  == 50 ) {
		if ( gLevel  == 5 ) {
			if ( exist_questtarget_ex() == 0 ) {
				if ( ncgQuestSpiritOfDistraction < 11 ) {
					ncgQuestSpiritOfDistraction = 11
					snd SOUNDLIST_WRITE1
					txtef COLOR_GREEN
					txt -1, lang("ジャーナルが更新された。", "Your journal has been updated.")
				}
			}
		}
	}
	if ( ogQuestKnightsOfLittleGirls == 1 & gQuestStatus != QUEST_STATE_SUCCESS ) {
		if ( exist_escorttarget(166) == 0 ) {
			gosub *label_4328
		}
		else {
			if ( exist_questtarget() == 0 ) {
				gQuestStatus = QUEST_STATE_FAIL
				evadd 103
			}
			else {
				txtef COLOR_BLUE
				txt -1, lang("[殲滅対象]残り" + exist_questtarget() + "体" + "] ", "" + exist_questtarget() + " more to go.")
			}
		}
	}
	if ( ogQuestCatSister ) {
		if ( findchara(CREATURE_ID_YOUNGER_CAT_SISTER, 6, 1) == 0 ) {
			ogQuestCatSister = 0
		}
	}
	if ( ogQuestKnightsOfLittleGirls == 2 ) {
		if ( findchara(CREATURE_ID_BLACK_ANGEL, 6, 1) == 0 ) {
			ogQuestKnightsOfLittleGirls = 0
			gQuestStatus = QUEST_STATE_SUCCESS
			gQuest = QUEST_TYPE_NONE
			ogdata(60) = 0
		}
	}
	if ( gQuest == QUEST_TYPE_NONE ) {
		return
	}
	if ( gQuestStatus != QUEST_STATE_SUCCESS ) {
		if ( gQuestType == 1 | ogQuestKnightsOfLittleGirls == 2 ) {
			locvar_check_quest_p = 0
			repeat 188, 57
				if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
					if ( cRelation(cnt) == RELATION_ENEMY ) {
						locvar_check_quest_p++
					}
				}
			loop
			if ( areaId(gArea ) == AREA_ARENA ) {
				repeat 40 - 1, 16
					if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
						if ( ocFormerPet(cnt) == 20000 ) {
							locvar_check_quest_p++
						}
					}
				loop
			}
			if ( locvar_check_quest_p == 0 ) {
				if ( ogQuestKnightsOfLittleGirls == 2 ) {
					gQuestStatus = QUEST_STATE_FAIL
					evadd 110
				}
				else {
					evadd EVENT_QUEST_ELEMINATE
				}
			}
			else {
				txtef COLOR_BLUE
				txt -1, lang("[殲滅依頼]残り" + locvar_check_quest_p + "体" + "] ", "" + locvar_check_quest_p + " more to go.")
			}
		}
		if ( gQuest == QUEST_TYPE_CONQUER ) {
			if ( findchara(qParam1(gQuestRef), qdata(16, gQuestRef)) == 0 ) {
				evadd EVENT_QUEST_ELEMINATE
			}
		}
		if ( gQuest == 1021 ) {
			if ( gTimelimit > 0 ) {
				qParam1(gQuestRef) = 0
				qParam2(gQuestRef) = 0
				repeat 188, 57
					if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
						if ( eqfaction(cnt, "nc_sheep") ) {
							qParam1(gQuestRef)++
						}
						else {
							qParam2(gQuestRef)++
						}
					}
				loop
			}
			if ( qParam2(gQuestRef) > 0 ) {
				txtef COLOR_BLUE
				txt -1, lang("[防衛依頼]残り" + qParam2(gQuestRef) + "体" + "] ", "" + qParam2(gQuestRef) + " more to go.")
			}
			if ( rnd(3) == 0 ) {
			}
			if ( gTimelimit > 0 & qParam1(gQuestRef) == 0 ) {
				gTimelimit = 0
				evadd EVENT_QUEST_TIMEOUT
			}
			if ( gTimelimit > 0 & qParam2(gQuestRef) == 0 & qParam1(gQuestRef) > 0 ) {
				gTimelimit = 0
				evadd EVENT_QUEST_ELEMINATE
			}
		}
	}
	return

#deffunc refreshspeed int refreshspeed_arg1
	if ( cBodySpdFix(refreshspeed_arg1) == 0 ) {
		cSpeed(refreshspeed_arg1) = sSPD(refreshspeed_arg1)
	}
	else {
		cSpeed(refreshspeed_arg1) = limitmax(sSPD(refreshspeed_arg1) * limit(100 - cBodySpdFix(refreshspeed_arg1), 0, 100) / 100, 2147483647)
	}
	if ( refreshspeed_arg1 == 0 ) {
		if ( gettrait(refreshspeed_arg1, 97) ) {
			p(36) = stat
			locvar_refreshspeed_f = pethealthcheck()
			if ( locvar_refreshspeed_f ) {
				cSpeed(refreshspeed_arg1) += calc5traitmulti(p(36), cSpeed(refreshspeed_arg1))
			}
		}
	}
	if ( cHP(refreshspeed_arg1) >= cMHP(refreshspeed_arg1) * 9 / 10 ) {
		if ( nc_gettrait(refreshspeed_arg1, 115) > 0 ) {
			cSpeed(refreshspeed_arg1) = cSpeed(refreshspeed_arg1) / 2 * 3
		}
	}
	if ( cHP(refreshspeed_arg1) <= cMHP(refreshspeed_arg1) * 3 / 10 ) {
		if ( nc_gettrait(refreshspeed_arg1, 116) > 0 ) {
			cSpeed(refreshspeed_arg1) *= 2
		}
	}
	if ( cSpeed(refreshspeed_arg1) < 10 ) {
		cSpeed(refreshspeed_arg1) = 10
	}
	if ( ocbit(12, refreshspeed_arg1) ) {
		if ( findbuff(refreshspeed_arg1, 97) != (-1) ) {
			cSpeed(refreshspeed_arg1) += limitmax(limitmax(ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + findbuff(refreshspeed_arg1, 97) * 3 + 1, refreshspeed_arg1) / 50, 2000), 2147483647)
		}
		if ( eqfaction(refreshspeed_arg1, "aqua") ) {
			cSpeed(refreshspeed_arg1) = limitmax(cSpeed(refreshspeed_arg1) * 3, 2147483647)
		}
	}
	if ( nc_intb_nightmare ) {
		if ( refreshspeed_arg1 > 15 ) {
			if ( cRelation(refreshspeed_arg1) == RELATION_ENEMY ) {
				cSpeed(refreshspeed_arg1) = limitmax(cSpeed(refreshspeed_arg1) * 2, 2147483647)
			}
		}
	}
	cSpeedFix(refreshspeed_arg1) = 0
	ridetarget = 0
	rider = 0
	if ( refreshspeed_arg1 == 0 | (gRider != 0 & gRider == refreshspeed_arg1) ) {
		ridetarget = gRider
	}
	else {
		if ( gArea  == 49 ) {
			if ( eqfaction(refreshspeed_arg1, "horse") ) {
				if ( cSP(refreshspeed_arg1) <= cMSP(refreshspeed_arg1) / 2 ) {
					cSpeed(refreshspeed_arg1) = (cSpeed(refreshspeed_arg1) / 4 * 3 + limitmax(sdata(refreshspeed_arg1, 11) / 15, 500)) * horse_spcons(refreshspeed_arg1)
				}
				if ( cSP(refreshspeed_arg1) <= cMSP(refreshspeed_arg1) / 4 ) {
					cSpeed(refreshspeed_arg1) = (cSpeed(refreshspeed_arg1) / 2 + limitmax(sdata(refreshspeed_arg1, 11) / 15, 300)) * horse_spcons(refreshspeed_arg1)
				}
				if ( cSP(refreshspeed_arg1) <= cMSP(refreshspeed_arg1) / 20 ) {
					cSpeed(refreshspeed_arg1) = (10 + limitmax(sdata(refreshspeed_arg1, 11) / 15, 100)) * horse_spcons(refreshspeed_arg1)
					if ( cSpeed(refreshspeed_arg1) < 10 ) {
						cSpeed(refreshspeed_arg1) = 10
					}
				}
			}
			if ( cSpeed(refreshspeed_arg1) > 20000 ) {
				cSpeed(refreshspeed_arg1) = 20000
			}
			return
		}
		if ( ocPetBeingRiddenIdx(refreshspeed_arg1) != 0 ) {
			rider = ocPetBeingRiddenIdx(refreshspeed_arg1)
			ridetarget = refreshspeed_arg1
		}
		else {
			if ( ocPetRidingIdx(refreshspeed_arg1) != 0 ) {
				rider = refreshspeed_arg1
				ridetarget = ocPetRidingIdx(refreshspeed_arg1)
			}
			else {
				return
			}
		}
	}
	if ( gArea  == 49 ) {
		if ( refreshspeed_arg1 == 0 ) {
			if ( cSpeed(refreshspeed_arg1) > limitmax((100 - gdata(129) / 100 + 1) * 10, 1000) ) {
				cSpeed(refreshspeed_arg1) = limitmax((100 - gdata(129) / 100 + 1) * 10, 1000)
				return
			}
		}
	}
	if ( ridetarget != 0 ) {
		cSpeed(rider) = limitmax(sSPD(ridetarget) * limit(100 - cBodySpdFix(ridetarget), 0, 100) / 100 * 100 / limit(100 + sSPD(ridetarget) * limit(100 - cBodySpdFix(ridetarget), 0, 100) / 100 - sSTR(ridetarget) * 3 / 2 - sRiding(rider) * 2 - (cbit(CHARA_BIT_SUPERIOR_RIDING, ridetarget) == TRUE) * 50, 100, 1000), 2147483647)
		if ( rider != 0 ) {
			if ( cSpeed(CHARA_PLAYER) < cSpeed(rider) ) {
				cSpeed(rider) = cSpeed(CHARA_PLAYER)
			}
		}
		if ( cbit(CHARA_BIT_INFERIOR_RIDING, ridetarget) ) {
			cSpeed(rider) /= 10
		}
		if ( ridetarget == refreshspeed_arg1 ) {
			cSpeed(refreshspeed_arg1) = limit(sSTR(refreshspeed_arg1) + sRiding(rider), 10, sSPD(refreshspeed_arg1))
			return
		}
	}
	gspdorg = sorgex(18, 0)
	if ( gRider == 0 ) {
		locvar_refreshspeed_r = cHunger(CHARA_PLAYER) / 1000 * 1000
		if ( locvar_refreshspeed_r < 1000 ) {
			cSpeedFix(CHARA_PLAYER) -= 30
		}
		if ( locvar_refreshspeed_r < 2000 ) {
			cSpeedFix(CHARA_PLAYER) -= 10
		}
		if ( cSP(CHARA_PLAYER) < 0 ) {
			cSpeedFix(CHARA_PLAYER) -= 30
		}
		if ( cSP(CHARA_PLAYER) < 25 ) {
			cSpeedFix(CHARA_PLAYER) -= 20
		}
		if ( cSP(CHARA_PLAYER) < 50 ) {
			cSpeedFix(CHARA_PLAYER) -= 10
		}
	}
	if ( cBurden(CHARA_PLAYER) >= 3 ) {
		cSpeedFix(CHARA_PLAYER) -= 50
	}
	if ( cBurden(CHARA_PLAYER) == 2 ) {
		cSpeedFix(CHARA_PLAYER) -= 30
	}
	if ( cBurden(CHARA_PLAYER) == 1 ) {
		cSpeedFix(CHARA_PLAYER) -= 10
	}
	if ( mType == MAP_TYPE_WORLD | mType == (4 /*!!!@[MAP_TYPE_DUNGEON_RANGE @@@ MAP_TYPE_LOCAL]@!!! */) ) {
		if ( godcheck() == "serria" ) {
			if ( gCargoWeight > gCargoLimit * 3 ) {
				cSpeedFix(CHARA_PLAYER) -= 25 + 25 * (gCargoWeight / (gCargoLimit * 3 + 1))
			}
			else {
				if ( gCargoWeight * 3 / 2 > gCargoLimit * 3 ) {
					cSpeedFix(CHARA_PLAYER) -= 25 + 15 * (gCargoWeight * 2 / (gCargoLimit * 3 + 1))
				}
				else {
					if ( gCargoWeight * 2 > gCargoLimit * 3 ) {
						cSpeedFix(CHARA_PLAYER) -= 25 + 5 * (gCargoWeight * 3 / (gCargoLimit * 3 + 1))
					}
				}
			}
		}
		else {
			if ( gCargoWeight > gCargoLimit ) {
				cSpeedFix(CHARA_PLAYER) -= 25 + 25 * (gCargoWeight / (gCargoLimit + 1))
			}
			else {
				if ( gCargoWeight * 3 / 2 > gCargoLimit ) {
					cSpeedFix(CHARA_PLAYER) -= 25 + 15 * (gCargoWeight * 2 / (gCargoLimit + 1))
				}
				else {
					if ( gCargoWeight * 2 > gCargoLimit ) {
						cSpeedFix(CHARA_PLAYER) -= 25 + 5 * (gCargoWeight * 3 / (gCargoLimit + 1))
					}
				}
			}
		}
	}
	gspd = cSpeed(CHARA_PLAYER) * (100 + cTimeScale(CHARA_PLAYER)) / 100
	if ( gspd < 10 ) {
		gspd = 10
	}
	return

#deffunc ride_begin int ride_begin_arg1, int ride_begin_prm1
	if ( ride_begin_prm1 == 0 ) {
		txt -1, lang(name(ride_begin_arg1) + "に騎乗した(" + name(ride_begin_arg1) + "の速度: " + cSpeed(ride_begin_arg1) + "→", "You ride " + name(ride_begin_arg1) + ". (" + name(ride_begin_arg1) + "'s speed: " + cSpeed(ride_begin_arg1) + "->")
	}
	cbitmod CHARA_BIT_RIDE, ride_begin_arg1, TRUE
	mapChara(cX(ride_begin_arg1), cY(ride_begin_arg1)) = 0
	if ( ride_begin_prm1 == 0 ) {
		gRider = ride_begin_arg1
		create_pcpic 0, 1
		rowactend gRider
		refreshspeed gRider
		txt -1, "" + cSpeed(ride_begin_arg1) + ") "
		if ( cbit(CHARA_BIT_SUPERIOR_RIDING, gRider) ) {
			txt -1, lang("この生物は乗馬用にちょうどいい！", "You feel comfortable.")
		}
		if ( cbit(CHARA_BIT_INFERIOR_RIDING, gRider) ) {
			txt -1, lang("この生物はあなたを乗せるには非力すぎる。", "This creature is too weak to carry you.")
		}
	}
	else {
		ocPetRidingIdx(ride_begin_prm1) = ride_begin_arg1
		ocPetBeingRiddenIdx(ride_begin_arg1) = ride_begin_prm1
		if ( cbit(CHARA_BIT_PCC, ride_begin_prm1) == TRUE ) {
			create_pcpic ride_begin_prm1, 1
		}
		rowactend ride_begin_arg1
		refreshspeed ride_begin_arg1
	}
	return

#deffunc ride_end int ride_end_prm0
	if ( ride_end_prm0 == 0 ) {
		cbitmod CHARA_BIT_RIDE, gRider, FALSE
		rowactend gRider
		locvar_ride_end_p = gRider
		gRider = 0
		create_pcpic 0, 1
	}
	else {
		cbitmod CHARA_BIT_RIDE, ocPetRidingIdx(ride_end_prm0), FALSE
		ocPetBeingRiddenIdx(ocPetRidingIdx(ride_end_prm0)) = 0
		rowactend ocPetRidingIdx(ride_end_prm0)
		locvar_ride_end_p = ocPetRidingIdx(ride_end_prm0)
		ocPetRidingIdx(ride_end_prm0) = 0
		if ( cbit(CHARA_BIT_PCC, ride_end_prm0) == TRUE ) {
			create_pcpic ride_end_prm0, 1
		}
		refreshspeed ride_end_prm0
	}
	refreshspeed locvar_ride_end_p
	return

#deffunc chara_vanquish int chara_vanquish_charid
	if ( chara_vanquish_charid == gRider ) {
		ride_end
	}
	else {
		if ( ocPetBeingRiddenIdx(chara_vanquish_charid) != 0 ) {
			ride_end ocPetBeingRiddenIdx(chara_vanquish_charid)
		}
		else {
			if ( cExist(chara_vanquish_charid) == CHAR_STATE_ALIVE | cExist(chara_vanquish_charid) == CHAR_STATE_TEMP ) {
				mapChara(cX(chara_vanquish_charid), cY(chara_vanquish_charid)) = 0
			}
		}
	}
	cExist(chara_vanquish_charid) = CHAR_STATE_DEAD
	cRole(chara_vanquish_charid) = ROLE_NONE
	if ( cRoleFileId(chara_vanquish_charid) != 0 ) {
		zaiko = exedir + "tmp\\shop" + cRoleFileId(chara_vanquish_charid) + ".s2"
		tmpload "shop" + cRoleFileId(chara_vanquish_charid) + ".s2"
		exist zaiko
		if ( strsize != (-1) ) {
			delete zaiko
			fileadd zaiko, 1
		}
		cRoleFileId(chara_vanquish_charid) = 0
	}
	if ( chara_vanquish_charid >= MAX_CHARA_SAVE ) {
		addcrowd gCrowd, -1
	}
	check_quest
	return

#deffunc turn_aggro int turn_aggro_arg1, int turn_aggro_arg2, int turn_aggro_arg3
	if ( turn_aggro_arg2 == 0 | petcheck(turn_aggro_arg2) ) {
		cRelation(turn_aggro_arg1) = RELATION_ENEMY
	}
	cAiAggro(turn_aggro_arg1) = turn_aggro_arg3
	cEmoIcon(turn_aggro_arg1) = 18 + 100 * 2
	lockon turn_aggro_arg1, turn_aggro_arg2, 1
	return

#deffunc make_sound int make_sound_arg1, int make_sound_arg2, int make_sound_arg3, int make_sound_arg4, int make_sound_arg5, int make_sound_arg6
	repeat 245 - 1, 1
		if ( cExist(cnt) != CHAR_STATE_ALIVE ) {
			continue
		}
		if ( dist(make_sound_arg1, make_sound_arg2, cX(cnt), cY(cnt)) < make_sound_arg3 ) {
			if ( rnd(make_sound_arg4) == 0 ) {
				if ( cSleep(cnt) != 0 ) {
					cSleep(cnt) = 0
					if ( synccheck(cnt, -1) ) {
						txt -1, lang(name(cnt) + "は物音に気付き目を覚ました。", name(cnt) + " notice" + _s(cnt) + " the sound and wake" + _s(cnt) + " up.")
					}
					cEmoIcon(cnt) = 21 + 100 * 2
					if ( make_sound_arg5 ) {
						if ( rnd(500) == 0 ) {
							if ( synccheck(cnt, -1) ) {
								txtef COLOR_SKY_BLUE
								txt -1, lang(name(cnt) + "はキレた。", name(cnt) + " can no longer put up with it.")
								txt cnt, lang("「もう我慢できない」", cnvtalk("That's it."))
							}
							turn_aggro cnt, make_sound_arg6, 80
						}
					}
				}
			}
		}
	loop
	return

#defcfunc get_freechara
	locvar_get_freechara_f = -1
	repeat 188, 57
		if ( cExist(cnt) == CHAR_STATE_DEAD ) {
			locvar_get_freechara_f = cnt
			break
		}
	loop
	return locvar_get_freechara_f

#defcfunc get_freeally
	locvar_get_freechara_f = 0
	repeat limit(sCHR(CHARA_PLAYER) / 5 + 1, 2, 16 - 1), 1
		if ( cExist(cnt) != CHAR_STATE_DEAD ) {
			continue
		}
		locvar_get_freechara_f = cnt
		break
	loop
	return locvar_get_freechara_f

#deffunc del_chara int del_chara_arg1
	inv_getheader del_chara_arg1
	repeat invrange, invhead
		iNum(cnt) = 0
	loop
	repeat 10
		cdatan(cnt, del_chara_arg1) = ""
	loop
	memset ocAIStrategy(del_chara_arg1), 0, 1000
	memset sdata(SKILL_NONE, del_chara_arg1), 0, 4800
	memset sdataex(0, del_chara_arg1), 0, 2400
	memset cExist(del_chara_arg1), 0, 2000
	if ( del_chara_arg1 < 16 ) {
		resetcai del_chara_arg1
	}
	faction(del_chara_arg1) = ""
	return

#deffunc relocate_chara int relocate_chara_arg1, int relocate_chara_arg2, int relocate_chara_arg3
	locvar_relocate_chara_tc = relocate_chara_arg2
	if ( relocate_chara_arg1 == gRider ) {
		ride_end
		cX(relocate_chara_arg1) = cX(CHARA_PLAYER)
		cY(relocate_chara_arg1) = cY(CHARA_PLAYER)
	}
	else {
		if ( ocPetBeingRiddenIdx(relocate_chara_arg1) != 0 ) {
			locvar_relocate_chara_p = ocPetBeingRiddenIdx(relocate_chara_arg1)
			ride_end locvar_relocate_chara_p
			cX(relocate_chara_arg1) = cX(locvar_relocate_chara_p)
			cY(relocate_chara_arg1) = cY(locvar_relocate_chara_p)
		}
	}
	if ( locvar_relocate_chara_tc == (-1) ) {
		locvar_get_freechara_f = 0
		repeat 188, 57
			if ( cExist(cnt) == CHAR_STATE_DEAD ) {
				locvar_get_freechara_f = 1
				locvar_relocate_chara_tc = cnt
				break
			}
		loop
		if ( locvar_get_freechara_f == 0 ) {
			repeat
				locvar_relocate_chara_tc = 57 + rnd(245 - 57)
				if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
					if ( cRole(cnt) == ROLE_NONE ) {
						break
					}
				}
			loop
			chara_vanquish locvar_relocate_chara_tc
		}
	}
	if ( relocate_chara_arg3 == 1 ) {
		locvar_relocate_chara_x = cX(locvar_relocate_chara_tc)
		locvar_relocate_chara_y = cY(locvar_relocate_chara_tc)
	}
	locvar_relocate_chara_p1 = cRelation(locvar_relocate_chara_tc)
	locvar_relocate_chara_p2 = cAiAggro(locvar_relocate_chara_tc)
	locvar_relocate_chara_p3 = cExist(locvar_relocate_chara_tc)
	locvar_relocate_chara_hp = cHP(locvar_relocate_chara_tc)
	cAiItem(relocate_chara_arg1) = 0
	cbitmod CHARA_BIT_LIVESTOCK, relocate_chara_arg1, FALSE
	inv_getheader relocate_chara_arg1
	locvar_relocate_chara_p = invhead
	locvar_relocate_chara_invrangecc = invrange
	inv_getheader locvar_relocate_chara_tc
	repeat invrange, invhead
		locvar_relocate_chara_cnt2 = cnt
		if ( cnt == locvar_relocate_chara_invrangecc ) {
			break
		}
		if ( cc == relocate_chara_arg1 ) {
			if ( ci == locvar_relocate_chara_p ) {
				ci = locvar_relocate_chara_cnt2
			}
		}
		repeat 70
			inv(cnt, locvar_relocate_chara_cnt2) = inv(cnt, locvar_relocate_chara_p)
			inv(cnt, locvar_relocate_chara_p) = 0
		loop
		iEquip(cnt) = 0
		locvar_relocate_chara_p++
	loop
	repeat 1200
		sdata(cnt, locvar_relocate_chara_tc) = sdata(cnt, relocate_chara_arg1)
		sdata(cnt, relocate_chara_arg1) = 0
	loop
	repeat 500
		cdata(cnt, locvar_relocate_chara_tc) = cdata(cnt, relocate_chara_arg1)
		cdata(cnt, relocate_chara_arg1) = 0
	loop
	repeat 10
		cdatan(cnt, locvar_relocate_chara_tc) = cdatan(cnt, relocate_chara_arg1)
		cdatan(cnt, relocate_chara_arg1) = ""
	loop
	repeat 30, 100
		cdata(cnt, locvar_relocate_chara_tc) = cdata(cnt, locvar_relocate_chara_tc) / EXT_EQUIP_SLOTS * 10000
	loop
	repeat 250
		ocdata(cnt, locvar_relocate_chara_tc) = ocdata(cnt, relocate_chara_arg1)
		ocdata(cnt, relocate_chara_arg1) = 0
	loop
	repeat 600
		sdataex(cnt, locvar_relocate_chara_tc) = sdataex(cnt, relocate_chara_arg1)
		sdataex(cnt, relocate_chara_arg1) = 0
	loop
	faction(locvar_relocate_chara_tc) = faction(relocate_chara_arg1)
	faction(relocate_chara_arg1) = ""
	if ( relocate_chara_arg3 == 1 ) {
		cExist(locvar_relocate_chara_tc) = CHAR_STATE_ALIVE
		cX(locvar_relocate_chara_tc) = locvar_relocate_chara_x
		cY(locvar_relocate_chara_tc) = locvar_relocate_chara_y
		cRelation(locvar_relocate_chara_tc) = locvar_relocate_chara_p1
		cAiAggro(locvar_relocate_chara_tc) = locvar_relocate_chara_p2
		cHP(locvar_relocate_chara_tc) = locvar_relocate_chara_hp
		cExist(locvar_relocate_chara_tc) = locvar_relocate_chara_p3
		mapChara(cX(locvar_relocate_chara_tc), cY(locvar_relocate_chara_tc)) = locvar_relocate_chara_tc + 1
	}
	else {
		if ( relocate_chara_arg1 != 56 ) {
			mapChara(cX(locvar_relocate_chara_tc), cY(locvar_relocate_chara_tc)) = locvar_relocate_chara_tc + 1
		}
		else {
			rc = locvar_relocate_chara_tc
			cExist(locvar_relocate_chara_tc) = CHAR_STATE_ALIVE
			if ( relocate_chara_arg3 == (-3) ) {
				cxinit = -1
				cyinit = -1
			}
			else {
				cxinit = cX(CHARA_PLAYER)
				cyinit = cY(CHARA_PLAYER)
			}
			place_chara rc, cxinit, cyinit
		}
		unlockson locvar_relocate_chara_tc
		cAiAggro(locvar_relocate_chara_tc) = 0
	}
	if ( petcheck(locvar_relocate_chara_tc) ) {
		repeat 61 - 50, 50
			locvar_relocate_chara_p = 100
			if ( sorg(cnt, locvar_relocate_chara_tc) >= 500 | sorg(cnt, locvar_relocate_chara_tc) <= 100 ) {
				locvar_relocate_chara_p = sorg(cnt, locvar_relocate_chara_tc)
			}
			if ( locvar_relocate_chara_p > 500 ) {
				locvar_relocate_chara_p = 500
			}
			sdata(cnt + STARTING_SKILL_SPACT, locvar_relocate_chara_tc) = locvar_relocate_chara_p * 1000000
		loop
		if ( locvar_relocate_chara_tc < 16 ) {
			resetcai locvar_relocate_chara_tc
		}
	}
	rc = locvar_relocate_chara_tc
	gosub *label_3941
	r1 = locvar_relocate_chara_tc
	gosub *charaRefresh
	if ( relocate_chara_arg1 >= 57 & locvar_relocate_chara_tc <= 56 ) {
		addcrowd gCrowd, -1
	}
	if ( relocate_chara_arg1 <= 56 & locvar_relocate_chara_tc >= 57 ) {
		addcrowd gCrowd, 1
	}
	return relocate_chara_arg1

#deffunc hostileaction int hostileaction_target, int hostileaction_source
	if ( hostileaction_target >= MAX_CHARA_FOLLOWER & cRole(hostileaction_target) != ROLE_PET_SENTRY & cRole(hostileaction_target) != ROLE_PET_MAID & eqfaction(hostileaction_target, "petshop") == 0 | hostileaction_source == CHARA_PLAYER ) {
		return
	}
	if ( cRelation(hostileaction_source) != RELATION_ENEMY ) {
		cEmoIcon(hostileaction_source) = 18 + 100 * 4
	}
	if ( cRelation(hostileaction_source) == RELATION_ALLY ) {
		if ( weaponenc == 0 ) {
			txtef COLOR_PURPLE
			txt -1, lang(name(hostileaction_source) + "は嫌な顔をした。", name(hostileaction_source) + " glares at you.")
			ctalk hostileaction_source, 1258, hostileaction_target, hostileaction_source
		}
	}
	else {
		if ( cRelation(hostileaction_source) == RELATION_NEUTRAL ) {
			modkarma 0, -2
		}
		if ( cId(hostileaction_source) == CREATURE_ID_EBON_THE_FIRE_GIANT ) {
			if ( flagFireGiant == 0 ) {
				txtef COLOR_PURPLE
				txt -1, lang(name(hostileaction_source) + "は嫌な顔をした。", name(hostileaction_source) + " glares at you.")
				ctalk hostileaction_source, 1258, hostileaction_target, hostileaction_source
				return
			}
		}
		if ( cRelation(hostileaction_source) > RELATION_HATE ) {
			txtef COLOR_PURPLE
			txt -1, lang(name(hostileaction_source) + "は嫌な顔をした。", name(hostileaction_source) + " glares at you.")
			ctalk hostileaction_source, 1258, hostileaction_target, hostileaction_source
			cRelation(hostileaction_source) = RELATION_HATE
		}
		else {
			if ( cRelation(hostileaction_source) != RELATION_ENEMY ) {
				txtef COLOR_PURPLE
				txt -1, lang(name(hostileaction_source) + "は激怒した。", name(hostileaction_source) + " gets furious!")
			}
			cRelation(hostileaction_source) = RELATION_ENEMY
			cAiAggro(hostileaction_source) = 80
			lockon hostileaction_source, hostileaction_target, 2
		}
		if ( cbit(CHARA_BIT_SANDBAG, hostileaction_source) == FALSE ) {
			txtef COLOR_SKY_BLUE
			ctalk hostileaction_source, 101, hostileaction_source, hostileaction_target
		}
	}
	if ( cbit(CHARA_BIT_LIVESTOCK, hostileaction_source) == TRUE ) {
		if ( rnd(50) == 0 ) {
			txtef COLOR_RED
			txt -1, lang("家畜は興奮した！", "Animals get excited!")
			repeat 245
				if ( cbit(CHARA_BIT_LIVESTOCK, cnt) == TRUE ) {
					lockon cnt, 0, 3
					cAiAggro(cnt) = 20
					cEmoIcon(cnt) = 18 + 100 * 3
				}
			loop
		}
	}
	rowactend hostileaction_source
	return

#deffunc rowact_check int rowact_check_charid
	if ( cImmuneDamage(rowact_check_charid) < 100 ) {
		if ( cRowAct(rowact_check_charid) != ACTION_NONE ) {
			if ( cRowAct(rowact_check_charid) != ACTION_TRAVEL ) {
				cRowActWarn(rowact_check_charid) = 1
			}
		}
	}
	return

#deffunc rowact_item int rowact_item_arg1
	repeat 245
		if ( cExist(cnt) != CHAR_STATE_ALIVE ) {
			continue
		}
		if ( cActionPeriod(cnt) <= 0 ) {
			continue
		}
		if ( cRowAct(cnt) == ACTION_EAT | cRowAct(cnt) == ACTION_READ ) {
			if ( cItemUsing(cnt) == rowact_item_arg1 ) {
				rowactend cnt
				txt -1, lang(name(cnt) + "は行動を中断した。", name(cnt) + " cancel" + _s(cnt) + " " + his(cnt) + " action.")
			}
		}
	loop
	return

#deffunc wake_up
	if ( gHour  >= 7 & gHour  <= 22 ) {
		repeat 188, 57
			if ( cSleep(cnt) > 0 ) {
				if ( rnd(10) ) {
					cSleep(cnt) = 0
				}
			}
		loop
	}
	return

#deffunc incognitobegin
	repeat 229, 16
		if ( cExist(cnt) != CHAR_STATE_ALIVE ) {
			continue
		}
		if ( cRole(cnt) == ROLE_SHOP_WANDER ) {
			continue
		}
		if ( cRole(cnt) == ROLE_SHOP_GUARD ) {
			continue
		}
		if ( cOrgRelation(cnt) >= RELATION_HATE ) {
			if ( cRelation(cnt) <= RELATION_HATE ) {
				cAiAggro(cnt) = 0
				cRelation(cnt) = cOrgRelation(cnt)
				cEmoIcon(cnt) = 21 + 100 * 2
			}
		}
	loop
	return

#deffunc incognitoend
	repeat 229, 16
		if ( cExist(cnt) != CHAR_STATE_ALIVE ) {
			continue
		}
		if ( cRole(cnt) == ROLE_GUARD ) {
			if ( cKarma(CHARA_PLAYER) < (-30) ) {
				cRelation(cnt) = RELATION_ENEMY
				cAiAggro(cnt) = 80
				cEmoIcon(cnt) = 18 + 100 * 2
			}
		}
	loop
	return

#deffunc cell_setchara int cell_setchara_arg1, int cell_setchara_arg2, int cell_setchara_arg3
	mapChara(cell_setchara_arg2, cell_setchara_arg3) = cell_setchara_arg1 + 1
	cX(cell_setchara_arg1) = cell_setchara_arg2
	cY(cell_setchara_arg1) = cell_setchara_arg3
	return

#deffunc cell_removechara int cell_removechara_arg1, int cell_removechara_arg2
	mapChara(cell_removechara_arg1, cell_removechara_arg2) = 0
	return

#deffunc cell_findspace int cell_findspace_arg1, int cell_findspace_arg2, int cell_findspace_arg3
	locvar_cell_findspace_f = 0
	repeat cell_findspace_arg3 * 2 + 1
		locvar_cell_findspace_dy = cell_findspace_arg2 + cnt - 1
		if ( locvar_cell_findspace_dy < 0 | locvar_cell_findspace_dy >= mHeight ) {
			continue
		}
		repeat cell_findspace_arg3 * 2 + 1
			locvar_cell_findspace_dx = cell_findspace_arg1 + cnt - 1
			if ( locvar_cell_findspace_dx < 0 | locvar_cell_findspace_dx >= mWidth ) {
				continue
			}
			if ( mapChara(locvar_cell_findspace_dx, locvar_cell_findspace_dy) != 0 ) {
				continue
			}
			if ( chipm(CHIPM_ATTRIB, mapId(locvar_cell_findspace_dx, locvar_cell_findspace_dy)) & CHIPM_ATTRIB_CANT_PASS ) {
				continue
			}
			if ( chipm(CHIPM_ATTRIB, mapFeat(locvar_cell_findspace_dx, locvar_cell_findspace_dy) \ 1000) & CHIPM_ATTRIB_CANT_PASS ) {
				continue
			}
			rtval = locvar_cell_findspace_dx, locvar_cell_findspace_dy
			locvar_cell_findspace_f = 1
		loop
		if ( locvar_cell_findspace_f ) {
			break
		}
	loop
	return locvar_cell_findspace_f

#defcfunc findbuff int findbuff_charid, int findbuff_buffid
	locvar_findbuff_f = -1
	repeat 8 + 8
		if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + cnt * 3, findbuff_charid) == 0 ) {
			break
		}
		if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + cnt * 3, findbuff_charid) == findbuff_buffid ) {
			locvar_findbuff_f = cnt
			break
		}
	loop
	return locvar_findbuff_f

#deffunc addbuff int addbuff_charid, int addbuff_buffid, int addbuff_arg3, int addbuff_arg4, int addbuff_prm4
	if ( addbuff_arg4 <= 0 ) {
		return 0
	}
	if ( addbuff_buffid == 86 ) {
		if ( gTimeStopTime == 0 ) {
			ctalk cc, 1285, cc, cc
			txtef COLOR_SKY_BLUE
			txt -1, lang(name(addbuff_charid) + "は時を止めた。", name(addbuff_charid) + " stop" + _s(cc) + " time.")
			gTimeStopTime = addbuff_arg4
		}
		else {
			txt -1, lang("何もおきない… ", "Nothing happens...")
			return
		}
	}
	else {
		if ( addbuff_buffid == 94 ) {
			cSick(addbuff_charid) = 21 + addbuff_arg4
			cBleed(addbuff_charid) = 11 + addbuff_arg4
			cInsane(addbuff_charid) = 41 + addbuff_arg4
			return
		}
	}
	locvar_addbuff_p = -1
	repeat 8 + 8
		if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + cnt * 3, addbuff_charid) == addbuff_buffid ) {
			if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + cnt * 3 + 2, addbuff_charid) < addbuff_arg4 ) {
				locvar_addbuff_p = cnt
				break
			}
			else {
				locvar_addbuff_p = -2
				break
			}
		}
		if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + cnt * 3, addbuff_charid) == 0 ) {
			locvar_addbuff_p = cnt
			break
		}
	loop
	if ( locvar_addbuff_p == (-1) ) {
		locvar_addbuff_p = rnd(8 + 8)
	}
	if ( locvar_addbuff_p == (-2) & addbuff_buffid != 65 ) {
		if ( synccheck(addbuff_charid, -1) ) {
			txt -1, lang("しかし、効果はなかった。", "But it produces no effect.")
			return 0
		}
	}
	locvar_addbuff_fixeddur = addbuff_arg4
	if ( addbuff_prm4 == 0 ) {
		if ( bdataref(BDATAREF_BUFF_TYPE, addbuff_buffid) == BUFF_TYPE_HEX ) {
			locvar_check_stquest_amount_f = 0
			if ( sResMagic(addbuff_charid) / 2 > rndex(addbuff_arg3 * 2 + 100) ) {
				locvar_check_stquest_amount_f = 1
			}
			if ( addbuff_arg3 * 3 < sResMagic(addbuff_charid) ) {
				locvar_check_stquest_amount_f = 1
			}
			if ( addbuff_arg3 / 3 > sResMagic(addbuff_charid) ) {
				locvar_check_stquest_amount_f = 0
			}
			if ( cQuality(addbuff_charid) > FIX_QUALITY_GREAT ) {
				if ( rnd(4) ) {
					locvar_check_stquest_amount_f = 1
				}
				else {
					locvar_addbuff_fixeddur = addbuff_arg4 / 5 + 1
				}
				if ( locvar_check_stquest_amount_f ) {
					if ( cc != (-1) & addbuff_charid != cc ) {
						if ( nc_gettrait(cc, 107) > 0 ) {
							locvar_check_stquest_amount_f = 0
						}
					}
				}
			}
			if ( cQuality(addbuff_charid) >= FIX_QUALITY_MIRACLE ) {
				if ( addbuff_buffid == BUFF_DEATH_WORD ) {
					locvar_check_stquest_amount_f = 1
				}
			}
			if ( findbuff(addbuff_charid, BUFF_HOLY_VEIL) != (-1) ) {
				if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + findbuff(addbuff_charid, BUFF_HOLY_VEIL) * 3 + 1, addbuff_charid) + 50 > addbuff_arg3 * 5 / 2 | rnd(ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + findbuff(addbuff_charid, BUFF_HOLY_VEIL) * 3 + 1, addbuff_charid) + 50) > rndex(addbuff_arg3 + 1) ) {
					txt -1, lang("ホーリーヴェイルが呪いを防いだ。", "The holy veil repels the hex.")
					return
				}
			}
			if ( findfaction(addbuff_charid, "regist", "hex") ) {
				locvar_check_stquest_amount_f = 1
			}
			if ( locvar_check_stquest_amount_f == 1 ) {
				if ( synccheck(addbuff_charid, -1) ) {
					txt -1, lang(name(addbuff_charid) + "は抵抗した。", name(addbuff_charid) + " resist" + _s(addbuff_charid) + " the hex.")
				}
				return
			}
			if ( cc == CHARA_PLAYER ) {
				hostileaction CHARA_PLAYER, addbuff_charid
			}
		}
	}
	if ( bufftxt(0, addbuff_buffid) != "" ) {
		if ( synccheck(addbuff_charid, -1) ) {
			if ( addbuff_buffid >= 29 & addbuff_buffid <= 39 ) {
				ctalk addbuff_charid, 961, addbuff_charid, addbuff_charid
				if ( stat == 0 ) {
					txt -1, lang(name(addbuff_charid) + bufftxt(0, addbuff_buffid), name(addbuff_charid) + " " + bufftxt(0, addbuff_buffid) + _s(addbuff_charid) + bufftxt(1, addbuff_buffid))
				}
			}
			else {
				txt -1, lang(name(addbuff_charid) + bufftxt(0, addbuff_buffid), name(addbuff_charid) + " " + bufftxt(0, addbuff_buffid) + _s(addbuff_charid) + bufftxt(1, addbuff_buffid))
			}
			if ( cfg_dmgmonitor1 == 1 ) {
				mondmgn(mondmgcnt) = buffname(addbuff_buffid)
				mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 0, 0, 255, 255, 255, addbuff_charid, -1
				if ( addbuff_buffid == BUFF_MIST_OF_SILENCE | addbuff_buffid == BUFF_SLOW | addbuff_buffid == BUFF_MIST_OF_FRAILNESS | addbuff_buffid == BUFF_ELEMENT_SCAR | addbuff_buffid == BUFF_NIGHTMARE | addbuff_buffid == BUFF_PUNISHMENT | addbuff_buffid == BUFF_DEATH_WORD ) {
					ccolor 100
					if ( stat == 0 ) {
						mondmg(2, mondmgcnt) = 255, 255, 255, 150, 0, 0
					}
				}
				else {
					if ( addbuff_buffid >= 29 & addbuff_buffid <= 39 ) {
						locvar_colorres_i = addbuff_buffid + 21
						ccolor 101
						if ( stat == 0 ) {
							colorres
							mondmg(2, mondmgcnt) = 255, 255, 255, ginfo(16), ginfo(17), ginfo(18)
						}
					}
					else {
						ccolor 102
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 0, 150, 150
						}
					}
				}
				mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
			}
		}
	}
	ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + locvar_addbuff_p * 3, addbuff_charid) = addbuff_buffid, addbuff_arg3, locvar_addbuff_fixeddur
	r1 = addbuff_charid
	gosub *charaRefresh
	return

#deffunc delbuff int delbuff_charid, int delbuff_buffid
	if ( ocbit(7, delbuff_charid) ) {
		if ( cRelation(delbuff_charid) == RELATION_ALLY | cOrgRelation(delbuff_charid) == RELATION_ALLY ) {
			txt -1, lang(name(delbuff_charid) + "は消え去った。", name(delbuff_charid) + " vanish" + _s(delbuff_charid, 1) + ".")
			chara_vanquish delbuff_charid
		}
	}
	else {
		if ( synccheck(delbuff_charid, -1) ) {
			txtef COLOR_PURPLE
			txt -1, lang(name(delbuff_charid) + "の" + buffname(ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid)) + "の効果が切れた。", name(delbuff_charid) + " " + is(delbuff_charid) + " The effect of " + buffname(ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid)) + " ends.")
			if ( cfg_dmgmonitor1 == 1 ) {
				mondmgn(mondmgcnt) = buffname(ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid))
				mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 0, 0, 255, 255, 255, delbuff_charid, -1
				if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 2 | ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 6 | ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 8 | ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 9 | ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 11 | ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 13 | ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 16 ) {
					ccolor 103
					if ( stat == 0 ) {
						mondmg(2, mondmgcnt) = 255, 255, 255, 0, 150, 0
					}
				}
				else {
					if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) >= 29 & ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) <= 39 ) {
						locvar_colorres_i = ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) + 21
						ccolor 112
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 150, 150, 150
						}
					}
					else {
						ccolor 104
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 150, 150, 150
						}
					}
				}
				mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
			}
		}
	}
	if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 15 ) {
		if ( delbuff_charid == CHARA_PLAYER ) {
			incognitoend
		}
	}
	if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 16 ) {
		cbitmod CHARA_BIT_DEATH_COUNT, delbuff_charid, FALSE
	}
	if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) == 18 ) {
		cbitmod CHARA_BIT_CONTINGENCY, delbuff_charid, FALSE
	}
	ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + delbuff_buffid * 3, delbuff_charid) = 0
	repeat 8 + 8 - delbuff_buffid - 1, delbuff_buffid
		if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + cnt * 3, delbuff_charid) == 0 ) {
			if ( ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + (cnt + 1) * 3, delbuff_charid) != 0 ) {
				ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + cnt * 3, delbuff_charid) = ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + (cnt + 1) * 3, delbuff_charid), ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + (cnt + 1) * 3 + 1, delbuff_charid), ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + (cnt + 1) * 3 + 2, delbuff_charid)
				ocdata(OCDATA_STARTING_CURSE_BUFF_TYPE + (cnt + 1) * 3, delbuff_charid) = 0, 0, 0
			}
			else {
				break
			}
		}
	loop
	r1 = delbuff_charid
	gosub *charaRefresh
	return

#deffunc animeload int animeload_animid, int animeload_arg2, int animeload_prm2
	if ( mode != MODELIST_MAIN ) {
		return
	}
	if ( synccheck(animeload_arg2, -1) == 0 ) {
		return
	}
	if ( GetKeyState(145) | cfg_animewait == 0 ) {
		return
	}
	screenupdate = -1
	gosub *screen_draw
	gsel BUFFER_PIC
	picload_ exedir + "graphic\\anime" + animeload_animid + ".bmp"
	locvar_animeload_dx = (cX(animeload_arg2) - scx) * inf_tiles + inf_screenx
	locvar_animeload_dy = (cY(animeload_arg2) - scy) * inf_tiles + inf_screeny
	gsel BUFFER_BUF
	gmode 0
	pos 0, 0
	gcopy BUFFER_SCREEN, locvar_animeload_dx - 24, locvar_animeload_dy - 146, 96, 202
	gsel BUFFER_SCREEN
	gmode 2
	locvar_animeload_i = 5, 50
	locvar_animeload_r = 0
	if ( animeload_animid == 8 ) {
		snd SOUNDLIST_OFFER1
	}
	if ( animeload_animid == 10 ) {
		locvar_animeload_i = 8, 30
		locvar_animeload_r = 0.2
		snd SOUNDLIST_ENC2
	}
	if ( animeload_animid == 11 ) {
		snd SOUNDLIST_ENC
	}
	if ( animeload_animid == 14 ) {
		locvar_animeload_i = 6
	}
	repeat locvar_animeload_i
		gmode 2, 96, 96
		pos locvar_animeload_dx + 24, locvar_animeload_dy + 8
		grotate BUFFER_PIC, cnt * 96, 0, locvar_animeload_r * cnt, 96, 96
		if ( animeload_prm2 ) {
			color 0, 0, 0
			gmode 4, chipc(CHIPC_WIDTH, xy2pic(30, 11)), chipc(CHIPC_HEIGHT, xy2pic(30, 11)), 128 - cnt * 16
			chara_preparepic 393
			pos locvar_animeload_dx, locvar_animeload_dy - inf_tiles / 2 - chipc(CHIPC_HEIGHT, xy2pic(30, 11)) - cnt * 2
			gcopy BUFFER_CHR, 0, 960
		}
		gmode 0
		redraw 1
		redraw 0
		pos locvar_animeload_dx - 24, locvar_animeload_dy - 146
		gcopy BUFFER_BUF, 0, 0, 96, 202
		await cfg_animewait + locvar_animeload_i(1)
	loop
	gmode 2
	return

#deffunc animeblood int animeblood_arg1, int animeblood_arg2, int animeblood_arg3
	if ( synccheck(animeblood_arg1, -1) == 0 ) {
		return
	}
	if ( GetKeyState(145) | cfg_animewait == 0 ) {
		return
	}
	screenupdate = -1
	gosub *screen_draw
	if ( animeblood_arg2 == 0 ) {
		gsel BUFFER_ITEM
		color 0
		boxf 0, 960, chipi(CHIPI_WIDTH, xy2pic(16, 0)), chipi(CHIPI_HEIGHT, xy2pic(16, 0)) + 960
		pos 0, 960
		gcopy BUFFER_ITEM, chipi(CHIPI_X, xy2pic(16, 0)), chipi(CHIPI_Y, xy2pic(16, 0)), chipi(CHIPI_WIDTH, xy2pic(16, 0)), chipi(CHIPI_HEIGHT, xy2pic(16, 0))
		gfini chipi(CHIPI_WIDTH, xy2pic(16, 0)), chipi(CHIPI_HEIGHT, xy2pic(16, 0))
		gfdec2 c_col(0, COLOR_DEFAULT), c_col(1, COLOR_DEFAULT), c_col(2, COLOR_DEFAULT)
		gsel selcur
	}
	if ( animeblood_arg2 == 1 ) {
		gsel BUFFER_ITEM
		color 0
		boxf 0, 960, chipi(CHIPI_WIDTH, xy2pic(18, 0)), chipi(CHIPI_HEIGHT, xy2pic(18, 0)) + 960
		pos 0, 960
		gcopy BUFFER_ITEM, chipi(CHIPI_X, xy2pic(18, 0)), chipi(CHIPI_Y, xy2pic(18, 0)), chipi(CHIPI_WIDTH, xy2pic(18, 0)), chipi(CHIPI_HEIGHT, xy2pic(18, 0))
		gfini chipi(CHIPI_WIDTH, xy2pic(18, 0)), chipi(CHIPI_HEIGHT, xy2pic(18, 0))
		gfdec2 c_col(0, COLOR_DEFAULT), c_col(1, COLOR_DEFAULT), c_col(2, COLOR_DEFAULT)
		gsel selcur
	}
	locvar_animeload_dx = (cX(animeblood_arg1) - scx) * inf_tiles + inf_screenx
	locvar_animeload_dy = (cY(animeblood_arg1) - scy) * inf_tiles + inf_screeny, 0
	gsel BUFFER_BUF
	gmode 0
	pos 0, 0
	gcopy BUFFER_SCREEN, locvar_animeload_dx - 48, locvar_animeload_dy - 56, 144, 160
	locvar_animeblood_ele2 = 0
	if ( animeblood_arg3 == 52 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime18.bmp"
		locvar_animeload_dy(1) = -16
	}
	if ( animeblood_arg3 == 51 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime19.bmp"
		locvar_animeload_dy(1) = -16
	}
	if ( animeblood_arg3 == 50 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime20.bmp"
		locvar_animeload_dy(1) = -20
	}
	if ( animeblood_arg3 == 56 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime22.bmp"
		locvar_animeload_dy(1) = -24
	}
	if ( animeblood_arg3 == 53 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime21.bmp"
		locvar_animeload_dy(1) = -16
	}
	if ( animeblood_arg3 == 54 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime23.bmp"
		locvar_animeload_dy(1) = -16
	}
	if ( animeblood_arg3 == 57 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime24.bmp"
		locvar_animeload_dy(1) = -16
	}
	if ( animeblood_arg3 == 59 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime25.bmp"
		locvar_animeload_dy(1) = -16
	}
	if ( animeblood_arg3 == 58 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime26.bmp"
		locvar_animeload_dy(1) = -16
	}
	if ( animeblood_arg3 == 55 | animeblood_arg3 == 63 ) {
		locvar_animeblood_ele2 = 1
		gsel BUFFER_PIC
		picload_ exedir + "graphic\\anime27.bmp"
		locvar_animeload_dy(1) = -16
	}
	gmode 2
	gsel BUFFER_SCREEN
	repeat 20
		locvar_animeblood_x(cnt) = rnd(48) - 24
		locvar_animeblood_y(cnt) = rnd(16)
	loop
	repeat 6
		locvar_animeblood_cnt2 = cnt * 2
		gmode 2, inf_tiles, inf_tiles
		if ( locvar_animeblood_ele2 ) {
			pos locvar_animeload_dx - 24, locvar_animeload_dy - 32 + locvar_animeload_dy(1)
			gcopy BUFFER_PIC, cnt * 96, 0, 96, 96
		}
		repeat 20
			pos locvar_animeload_dx + 24 + locvar_animeblood_x(cnt) + (locvar_animeblood_x(cnt) < 3) * ((1 + (cnt \ 2 == 0)) * (-1)) * locvar_animeblood_cnt2 + (locvar_animeblood_x(cnt) > (-4)) * (1 + (cnt \ 2 == 0)) * locvar_animeblood_cnt2, locvar_animeload_dy + locvar_animeblood_y(cnt) + locvar_animeblood_cnt2 * locvar_animeblood_cnt2 / 2 - 12 + cnt
			grotate BUFFER_ITEM, 0, 960, 0.2 * cnt, 24 - locvar_animeblood_cnt2 * 2, 24 - locvar_animeblood_cnt2 * 2
		loop
		gmode 0
		redraw 1
		redraw 0
		pos locvar_animeload_dx - 48, locvar_animeload_dy - 56
		gcopy BUFFER_BUF, 0, 0, 144, 160
		await cfg_animewait + 15 + (locvar_animeblood_ele2 != 0) * 20
	loop
	gmode 2
	return

#deffunc resistmod int resistmod_charid, int resistmod_ele, int resistmod_arg3
	if ( resistmod_arg3 < 0 & sorg(resistmod_ele, resistmod_charid) <= 50 ) {
		return
	}
	if ( resistmod_arg3 >= 0 & sorg(resistmod_ele, resistmod_charid) >= 200 ) {
		return
	}
	locvar_resistmod_lv = sorg(resistmod_ele, resistmod_charid) + resistmod_arg3
	if ( locvar_resistmod_lv < 50 ) {
		locvar_resistmod_lv = 50
	}
	if ( locvar_resistmod_lv > 200 ) {
		locvar_resistmod_lv = 200
	}
	if ( resistmod_arg3 >= 50 ) {
		txtef COLOR_GREEN
		if ( resistmod_ele == SKILL_RES_FIRE ) {
			txt -1, lang(name(resistmod_charid) + "の身体は急に火照りだした。", "Suddenly, " + name(resistmod_charid) + " feel" + _s(resistmod_charid) + " very hot.")
		}
		if ( resistmod_ele == SKILL_RES_COLD ) {
			txt -1, lang(name(resistmod_charid) + "の身体は急に冷たくなった。", "Suddenly, " + name(resistmod_charid) + " feel" + _s(resistmod_charid) + " cool.")
		}
		if ( resistmod_ele == SKILL_RES_LIGHTNING ) {
			txt -1, lang(name(resistmod_charid) + "の身体に電気が走った。", name(resistmod_charid) + " " + is(resistmod_charid) + " struck by an electric shock.")
		}
		if ( resistmod_ele == SKILL_RES_MIND ) {
			txt -1, lang(name(resistmod_charid) + "は急に明晰になった。", "Suddenly, " + name(resistmod_charid) + your(resistmod_charid) + " mind becomes very clear.")
		}
		if ( resistmod_ele == SKILL_RES_NERVE ) {
			txt -1, lang(name(resistmod_charid) + "は急に神経が図太くなった。", name(resistmod_charid) + your(resistmod_charid) + " nerve is sharpened.")
		}
		if ( resistmod_ele == SKILL_RES_DARKNESS ) {
			txt -1, lang(name(resistmod_charid) + "は急に暗闇が怖くなくなった。", name(resistmod_charid) + " no longer fear" + _s(resistmod_charid) + " darkness.")
		}
		if ( resistmod_ele == SKILL_RES_SOUND ) {
			txt -1, lang(name(resistmod_charid) + "は騒音を気にしなくなった。", name(resistmod_charid) + your(resistmod_charid) + " eardrums get thick.")
		}
		if ( resistmod_ele == SKILL_RES_CHAOS ) {
			txt -1, lang(name(resistmod_charid) + "は急にカオスを理解した。", "Suddenly, " + name(resistmod_charid) + " understand" + _s(resistmod_charid) + " chaos.")
		}
		if ( resistmod_ele == SKILL_RES_POISON ) {
			txt -1, lang(name(resistmod_charid) + "の毒への耐性は強くなった。", name(resistmod_charid) + " now " + have(resistmod_charid) + " antibodies to poisons.")
		}
		if ( resistmod_ele == SKILL_RES_NETHER ) {
			txt -1, lang(name(resistmod_charid) + "の魂は地獄に近づいた。", name(resistmod_charid) + " " + is(resistmod_charid) + " no longer afraid" + _s(resistmod_charid) + " of hell.")
		}
		if ( resistmod_ele == SKILL_RES_MAGIC ) {
			txt -1, lang(name(resistmod_charid) + "の皮膚は魔力のオーラに包まれた。", name(resistmod_charid) + your(resistmod_charid) + " body is covered by a magical aura.")
		}
	}
	if ( resistmod_arg3 <= 50 * (-1) ) {
		txtef COLOR_PURPLE
		if ( resistmod_ele == SKILL_RES_FIRE ) {
			txt -1, lang(name(resistmod_charid) + "は急に汗をかきだした。", name(resistmod_charid) + " sweat" + _s(resistmod_charid) + ".")
		}
		if ( resistmod_ele == SKILL_RES_COLD ) {
			txt -1, lang(name(resistmod_charid) + "は急に寒気を感じた。", name(resistmod_charid) + " shivers" + _s(resistmod_charid) + ".")
		}
		if ( resistmod_ele == SKILL_RES_LIGHTNING ) {
			txt -1, lang(name(resistmod_charid) + "は急に電気に敏感になった。", name(resistmod_charid) + " " + is(resistmod_charid) + " shocked.")
		}
		if ( resistmod_ele == SKILL_RES_MIND ) {
			txt -1, lang(name(resistmod_charid) + "は以前ほど明晰ではなくなった。", name(resistmod_charid) + your(resistmod_charid) + " mind becomes slippery.")
		}
		if ( resistmod_ele == SKILL_RES_NERVE ) {
			txt -1, lang(name(resistmod_charid) + "の神経は急に萎縮した。", name(resistmod_charid) + " become" + _s(resistmod_charid) + " dull.")
		}
		if ( resistmod_ele == SKILL_RES_DARKNESS ) {
			txt -1, lang(name(resistmod_charid) + "は急に暗闇が怖くなった。", "Suddenly, " + name(resistmod_charid) + " fear" + _s(resistmod_charid) + " darkness.")
		}
		if ( resistmod_ele == SKILL_RES_SOUND ) {
			txt -1, lang(name(resistmod_charid) + "は急に辺りをうるさく感じた。", name(resistmod_charid) + " become" + _s(resistmod_charid) + " very sensitive to noises.")
		}
		if ( resistmod_ele == SKILL_RES_CHAOS ) {
			txt -1, lang(name(resistmod_charid) + "はカオスへの理解を失った。", name(resistmod_charid) + " no longer understand" + _s(resistmod_charid) + " chaos.")
		}
		if ( resistmod_ele == SKILL_RES_POISON ) {
			txt -1, lang(name(resistmod_charid) + "の毒への耐性は薄れた。", name(resistmod_charid) + " lose" + _s(resistmod_charid, 1) + " antibodies to poisons.")
		}
		if ( resistmod_ele == SKILL_RES_NETHER ) {
			txt -1, lang(name(resistmod_charid) + "の魂は地獄から遠ざかった。", name(resistmod_charid) + " " + is(resistmod_charid) + " afraid of hell.")
		}
		if ( resistmod_ele == SKILL_RES_MAGIC ) {
			txt -1, lang(name(resistmod_charid) + "の皮膚から魔力のオーラが消えた。", "The magical aura disappears from " + name(resistmod_charid) + your(resistmod_charid) + " body.")
		}
	}
	sdata(resistmod_ele + STARTING_SKILL_SPACT, resistmod_charid) = limit(locvar_resistmod_lv, 0, 2000) * 1000000 + sexp(resistmod_ele, resistmod_charid) * 1000 + sgrowth(resistmod_ele, resistmod_charid)
	snd SOUNDLIST_ATK_ELEC
	animeload 15, resistmod_charid
	r1 = resistmod_charid
	gosub *charaRefresh
	return

#deffunc modcorrupt int modcorrupt_arg1
	locvar_modcorrupt_org = gCorrupt / 1000
	locvar_modcorrupt_p = modcorrupt_arg1 + (modcorrupt_arg1 > 0) * gEtherSpeed
	if ( gettrait(0, 168) ) {
		if ( modcorrupt_arg1 > 0 ) {
			locvar_modcorrupt_p = locvar_modcorrupt_p * 100 / 150
		}
	}
	if ( have_bigench(0, 14) ) {
		locvar_modcorrupt_p = locvar_modcorrupt_p * 100 / 150
	}
	gCorrupt = limit(gCorrupt + locvar_modcorrupt_p, 0, 28000)
	locvar_modcorrupt_mod = gCorrupt / 1000 - locvar_modcorrupt_org
	if ( locvar_modcorrupt_mod > 0 ) {
		if ( locvar_modcorrupt_org == 0 ) {
			txtef COLOR_PURPLE
			txt -1, lang("エーテルの病が発症した。", "The symptom of the Ether disease is shown up on you.")
			if ( cfg_extrahelp ) {
				if ( gdata(STARTING_GDATA_HELP + 15) == 0 ) {
					if ( mode == MODELIST_MAIN ) {
						if ( cActionPeriod(CHARA_PLAYER) == 0 ) {
							gdata(STARTING_GDATA_HELP + 15) = 1
							ghelp = 15
							gosub *elona_help
						}
					}
				}
			}
		}
		if ( locvar_modcorrupt_org + locvar_modcorrupt_mod >= 28 ) {
			locvar_modcorrupt_p = 28 - locvar_modcorrupt_org
		}
		else {
			locvar_modcorrupt_p = locvar_modcorrupt_mod
		}
		repeat locvar_modcorrupt_p
			locvar_modcorrupt_cnt2 = cnt
			if ( gettrait(0, 194) < 0 | ogTitleChampionOfTheLabyrinths ) {
				if ( locvar_modcorrupt_org + locvar_modcorrupt_cnt2 > 34 ) {
					break
				}
			}
			else {
				if ( locvar_modcorrupt_org + locvar_modcorrupt_cnt2 > 28 ) {
					break
				}
			}
			repeat 100000
				await
				if ( gettrait(0, 194) < 0 | ogTitleChampionOfTheLabyrinths ) {
					tid = rnd(TRAIT_MUTATION_STAT_SPD) + STARTING_TRAIT_ETHER
				}
				else {
					tid = rnd(TRAIT_NORMAL_SPACT_TOUCH_OF_SLEEP) + STARTING_TRAIT_ETHER
				}
				traitmode = 0
				r1 = 0
				gosub *trait_ref
				if ( stat == 0 | traitref != 3 ) {
					continue
				}
				if ( gettrait(0, tid) <= traitref(1) ) {
					continue
				}
				addtrait 0, tid, -1
				locvar_modcorrupt_i = 700 + locvar_modcorrupt_org + locvar_modcorrupt_cnt2
				gdata(locvar_modcorrupt_i) = tid
				txtef COLOR_PURPLE
				txt -1, lang("あなたはエーテルに侵食された。", "Your disease is getting worse.")
				txtef COLOR_RED
				txt -1, traitrefn(1)
				if ( tid == TRAIT_ETHER_EQUIP_LEG ) {
					body = 9
					r1 = 0
					gosub *act_unequip_part
				}
				if ( tid == TRAIT_ETHER_EQUIP_BACK ) {
					body = 3
					r1 = 0
					gosub *act_unequip_part
				}
				if ( tid == TRAIT_ETHER_EQUIP_NECK ) {
					body = 2
					r1 = 0
					gosub *act_unequip_part
				}
				if ( tid == MAX_TRAIT ) {
					if ( gettrait(0, tid) != (-1) ) {
						body = 8
						r1 = 0
						gosub *act_unequip_part
					}
					body = 1
					r1 = 0
					gosub *act_unequip_part
				}
				if ( tid == 218 ) {
					body = 5
					r1 = 0
					gosub *act_unequip_part
				}
				throwsstpevent "EtherDisease", 0, traitrefn(1), 0
				break
			loop
		loop
		animeload 8, 0
		r1 = 0
		gosub *charaRefresh
		return
	}
	if ( locvar_modcorrupt_mod < 0 ) {
		if ( locvar_modcorrupt_org + locvar_modcorrupt_mod < 0 ) {
			locvar_modcorrupt_p = locvar_modcorrupt_org
		}
		else {
			locvar_modcorrupt_p = abs(locvar_modcorrupt_mod)
		}
		if ( locvar_modcorrupt_p < 0 ) {
			locvar_modcorrupt_p = 0
		}
		repeat locvar_modcorrupt_p
			locvar_modcorrupt_cnt2 = cnt
			repeat 100000
				await
				if ( gettrait(0, 194) < 0 | ogTitleChampionOfTheLabyrinths ) {
					tid = rnd(TRAIT_MUTATION_STAT_SPD) + STARTING_TRAIT_ETHER
				}
				else {
					tid = rnd(TRAIT_NORMAL_SPACT_TOUCH_OF_SLEEP) + STARTING_TRAIT_ETHER
				}
				if ( cnt == 0 ) {
					locvar_modcorrupt_i = 700 + locvar_modcorrupt_org - locvar_modcorrupt_cnt2 - 1
					if ( gdata(locvar_modcorrupt_i) != 0 ) {
						tid = gdata(locvar_modcorrupt_i)
						gdata(locvar_modcorrupt_i) = 0
					}
				}
				traitmode = 0
				r1 = 0
				gosub *trait_ref
				if ( stat == 0 | traitref != 3 ) {
					continue
				}
				if ( gettrait(0, tid) >= 0 ) {
					continue
				}
				addtrait 0, tid, 1
				txtef COLOR_GREEN
				txt -1, lang("あなたのエーテルの侵食はやわらいだ。", "The symptoms of the Ether disease seem to calm down.")
				txtef COLOR_GREEN
				txt -1, traitrefn(0)
				throwsstpevent "EtherDiseaseCured", 0, traitrefn(0), 0
				break
			loop
		loop
		animeload 10, 0
		r1 = 0
		gosub *charaRefresh
		return
	}
	return

#deffunc wet int wet_arg1, int wet_arg2
	if ( synccheck(wet_arg1, -1) ) {
		if ( cWet(wet_arg1) == 0 ) {
			txt -1, lang(name(wet_arg1) + "は濡れた。", name(wet_arg1) + " get" + _s(wet_arg1) + " wet.")
			if ( cbit(CHARA_BIT_INVISIBLE, wet_arg1) == TRUE ) {
				txt -1, lang(name(wet_arg1) + "の姿があらわになった。", name(wet_arg1) + " " + is(wet_arg1) + " revealed " + his(wet_arg1) + " shape.")
			}
		}
	}
	cWet(wet_arg1) += wet_arg2
	return

#deffunc dmgcon int dmgcon_charid, int dmgcon_cond, int dmgcon_power
	if ( dmgcon_power < 1 ) {
		locvar_dmgcon_f = 0
	}
	else {
		locvar_dmgcon_f = 1
	}
	if ( dmgcon_cond == CONDITION_BLIND ) {
		if ( cbit(CHARA_BIT_RES_BLIND, dmgcon_charid) == TRUE ) {
			if ( rnd(4) | gettrait(0, 194) == 0 ) {
				locvar_dmgcon_f = 0
			}
		}
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			if ( rnd(cLevel(dmgcon_charid) / 2 + 1) ) {
				locvar_dmgcon_f = 0
			}
		}
		locvar_dmgcon_res = 53
		gosub *conCalc
		if ( locvar_dmgcon_f == 0 ) {
			return 0
		}
		locvar_dmgcon_p = locvar_dmgcon_p / 6
		if ( locvar_dmgcon_p > 0 ) {
			if ( cBlind(dmgcon_charid) == 0 ) {
				cBlind(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は盲目になった。", name(dmgcon_charid) + " " + is(dmgcon_charid) + " blinded.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conblind
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						locvar_colorres_i = locvar_dmgcon_res
						ccolor 201
						if ( stat == 0 ) {
							colorres
							mondmg(5, mondmgcnt) = ginfo(16)
							mondmg(6, mondmgcnt) = ginfo(17)
							mondmg(7, mondmgcnt) = ginfo(18)
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cBlind(dmgcon_charid) += locvar_dmgcon_p / 3 + 1
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_CONFUSE ) {
		if ( cbit(CHARA_BIT_RES_CONFUSE, dmgcon_charid) == TRUE ) {
			if ( rnd(4) | gettrait(0, 194) == 0 ) {
				locvar_dmgcon_f = 0
			}
		}
		if ( findbuff(dmgcon_charid, BUFF_HERO) != (-1) ) {
			locvar_dmgcon_f = 0
		}
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			if ( rnd(cLevel(dmgcon_charid) / 2 + 1) ) {
				locvar_dmgcon_f = 0
			}
		}
		locvar_dmgcon_res = 54
		gosub *conCalc
		if ( locvar_dmgcon_f == 0 ) {
			return 0
		}
		locvar_dmgcon_p = locvar_dmgcon_p / 7
		if ( locvar_dmgcon_p > 0 ) {
			if ( cConfuse(dmgcon_charid) == 0 ) {
				cConfuse(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は混乱した。", name(dmgcon_charid) + " " + is(dmgcon_charid) + " confused.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conconfuse
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						locvar_colorres_i = locvar_dmgcon_res
						ccolor 202
						if ( stat == 0 ) {
							colorres
							mondmg(5, mondmgcnt) = ginfo(16)
							mondmg(6, mondmgcnt) = ginfo(17)
							mondmg(7, mondmgcnt) = ginfo(18)
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cConfuse(dmgcon_charid) += locvar_dmgcon_p / 3 + 1
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_PARALYZE ) {
		if ( cbit(CHARA_BIT_RES_PARALYZE, dmgcon_charid) == TRUE ) {
			if ( rnd(4) | gettrait(0, 194) == 0 ) {
				locvar_dmgcon_f = 0
			}
		}
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			if ( rnd(cLevel(dmgcon_charid) + 1) ) {
				locvar_dmgcon_f = 0
			}
		}
		locvar_dmgcon_res = 58
		gosub *conCalc
		if ( locvar_dmgcon_f == 0 ) {
			return 0
		}
		locvar_dmgcon_p = locvar_dmgcon_p / 10
		if ( locvar_dmgcon_p > 0 ) {
			if ( cParalyze(dmgcon_charid) == 0 ) {
				cParalyze(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					if ( locvar_dmgcon_p < 100 ) {
						txtef COLOR_PURPLE
						txt -1, lang(name(dmgcon_charid) + "は麻痺した。", name(dmgcon_charid) + " " + is(dmgcon_charid) + " paralyzed.")
					}
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conparalyze
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						locvar_colorres_i = locvar_dmgcon_res
						ccolor 203
						if ( stat == 0 ) {
							colorres
							mondmg(5, mondmgcnt) = ginfo(16)
							mondmg(6, mondmgcnt) = ginfo(17)
							mondmg(7, mondmgcnt) = ginfo(18)
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cParalyze(dmgcon_charid) += locvar_dmgcon_p / 3 + 1
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_POISON ) {
		if ( cbit(CHARA_BIT_RES_POISON, dmgcon_charid) == TRUE ) {
			if ( rnd(4) | gettrait(0, 194) == 0 ) {
				locvar_dmgcon_f = 0
			}
		}
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			if ( rnd(cLevel(dmgcon_charid) / 3 + 1) ) {
				locvar_dmgcon_f = 0
			}
		}
		locvar_dmgcon_res = 55
		gosub *conCalc
		if ( locvar_dmgcon_f == 0 ) {
			return 0
		}
		locvar_dmgcon_p = locvar_dmgcon_p / 5
		if ( locvar_dmgcon_p > 0 ) {
			if ( cPoison(dmgcon_charid) == 0 ) {
				cPoison(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は毒におかされた。", name(dmgcon_charid) + " " + is(dmgcon_charid) + " poisoned.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conpoison
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						locvar_colorres_i = locvar_dmgcon_res
						ccolor 204
						if ( stat == 0 ) {
							colorres
							mondmg(5, mondmgcnt) = ginfo(16)
							mondmg(6, mondmgcnt) = ginfo(17)
							mondmg(7, mondmgcnt) = ginfo(18)
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cPoison(dmgcon_charid) += locvar_dmgcon_p / 3 + 3
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_SLEEP ) {
		if ( cbit(CHARA_BIT_RES_SLEEP, dmgcon_charid) == TRUE ) {
			if ( rnd(4) | gettrait(0, 194) == 0 ) {
				locvar_dmgcon_f = 0
			}
		}
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			if ( rnd(cLevel(dmgcon_charid) / 5 + 1) ) {
				locvar_dmgcon_f = 0
			}
		}
		locvar_dmgcon_res = 58
		gosub *conCalc
		if ( locvar_dmgcon_f == 0 ) {
			return 0
		}
		locvar_dmgcon_p = locvar_dmgcon_p / 4
		if ( locvar_dmgcon_p > 0 ) {
			if ( cSleep(dmgcon_charid) == 0 ) {
				cSleep(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は眠りにおちた。", name(dmgcon_charid) + " fall" + _s(dmgcon_charid) + " asleep.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _consleep
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						locvar_colorres_i = locvar_dmgcon_res
						ccolor 205
						if ( stat == 0 ) {
							colorres
							mondmg(5, mondmgcnt) = ginfo(16)
							mondmg(6, mondmgcnt) = ginfo(17)
							mondmg(7, mondmgcnt) = ginfo(18)
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cSleep(dmgcon_charid) += locvar_dmgcon_p / 3 + 1
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_FEAR ) {
		if ( cbit(CHARA_BIT_RES_FEAR, dmgcon_charid) == TRUE ) {
			if ( rnd(4) | gettrait(0, 194) == 0 ) {
				locvar_dmgcon_f = 0
			}
		}
		if ( findbuff(dmgcon_charid, BUFF_HOLY_SHIELD) != (-1) ) {
			locvar_dmgcon_f = 0
		}
		if ( findbuff(dmgcon_charid, BUFF_HERO) != (-1) ) {
			locvar_dmgcon_f = 0
		}
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			if ( rnd(cLevel(dmgcon_charid) / 5 + 1) ) {
				locvar_dmgcon_f = 0
			}
		}
		locvar_dmgcon_res = 54
		gosub *conCalc
		if ( locvar_dmgcon_f == 0 ) {
			return 0
		}
		locvar_dmgcon_p = locvar_dmgcon_p / 7
		if ( locvar_dmgcon_p > 0 ) {
			if ( cFear(dmgcon_charid) == 0 ) {
				cFear(dmgcon_charid) = locvar_dmgcon_p
			}
			if ( synccheck(dmgcon_charid, -1) ) {
				txt -1, lang(name(dmgcon_charid) + "は恐怖に侵された。", name(dmgcon_charid) + " " + is(dmgcon_charid) + " frightened.")
				if ( cfg_dmgmonitor2 == 1 ) {
					mondmgn(mondmgcnt) = _confear
					mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
					locvar_colorres_i = locvar_dmgcon_res
					ccolor 206
					if ( stat == 0 ) {
						colorres
						mondmg(5, mondmgcnt) = ginfo(16)
						mondmg(6, mondmgcnt) = ginfo(17)
						mondmg(7, mondmgcnt) = ginfo(18)
					}
					mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
				}
			}
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_DIM ) {
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			if ( rnd(cLevel(dmgcon_charid) / 3 + 1) ) {
				locvar_dmgcon_f = 0
			}
		}
		if ( cnRace(dmgcon_charid) == "golem" | cbit(34, dmgcon_charid) ) {
			locvar_dmgcon_f = 0
		}
		if ( gettrait(dmgcon_charid, 157) ) {
			locvar_dmgcon_f = 0
		}
		locvar_dmgcon_res = 57
		gosub *conCalc
		if ( locvar_dmgcon_f == 0 ) {
			return 0
		}
		locvar_dmgcon_p = locvar_dmgcon_p / 8
		if ( locvar_dmgcon_p > 0 ) {
			if ( cDim(dmgcon_charid) == 0 ) {
				cDim(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は朦朧とした。", name(dmgcon_charid) + " " + is(dmgcon_charid) + " dimmed.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _condim
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						locvar_colorres_i = locvar_dmgcon_res
						ccolor 207
						if ( stat == 0 ) {
							colorres
							mondmg(5, mondmgcnt) = ginfo(16)
							mondmg(6, mondmgcnt) = ginfo(17)
							mondmg(7, mondmgcnt) = ginfo(18)
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cDim(dmgcon_charid) += locvar_dmgcon_p / 3 + 1
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_BLEED ) {
		locvar_dmgcon_p = dmgcon_power / 25
		if ( cQuality(dmgcon_charid) > FIX_QUALITY_GREAT ) {
			locvar_dmgcon_p /= 2
		}
		if ( locvar_dmgcon_p > 0 ) {
			if ( cBleed(dmgcon_charid) == 0 ) {
				cBleed(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は血を流し始めた。", name(dmgcon_charid) + " begin" + _s(dmgcon_charid) + " to bleed.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conbleed
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						ccolor 208
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cBleed(dmgcon_charid) += locvar_dmgcon_p
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_DRUNK ) {
		locvar_dmgcon_p = dmgcon_power / 10
		if ( locvar_dmgcon_p > 0 ) {
			if ( cDrunk(dmgcon_charid) == 0 ) {
				cDrunk(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txt -1, lang(name(dmgcon_charid) + "は酔っ払った。", name(dmgcon_charid) + " get" + _s(dmgcon_charid) + " drunk.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _condrunk
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						ccolor 209
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cDrunk(dmgcon_charid) += locvar_dmgcon_p
			}
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_INSANE ) {
		locvar_dmgcon_p = dmgcon_power / 8
		if ( locvar_dmgcon_p > 0 ) {
			if ( cInsane(dmgcon_charid) == 0 ) {
				cInsane(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は気が狂った。", name(dmgcon_charid) + " become" + _s(dmgcon_charid) + " insane.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _coninsane
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						ccolor 210
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cInsane(dmgcon_charid) += locvar_dmgcon_p / 3 + 1
			}
			rowactend dmgcon_charid
		}
		return 1
	}
	if ( dmgcon_cond == CONDITION_SICK ) {
		locvar_dmgcon_p = dmgcon_power / 10
		if ( locvar_dmgcon_p > 0 ) {
			if ( cSick(dmgcon_charid) == 0 ) {
				cSick(dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は病気になった。", name(dmgcon_charid) + " get" + _s(dmgcon_charid) + " sick.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _consick
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						ccolor 211
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				cSick(dmgcon_charid) += locvar_dmgcon_p / 10 + 1
			}
		}
		return 1
	}
	if ( dmgcon_cond == 13 ) {
		locvar_dmgcon_p = dmgcon_power
		if ( locvar_dmgcon_p > 0 ) {
			if ( cdata(265, dmgcon_charid) == 0 ) {
				cdata(265, dmgcon_charid) = locvar_dmgcon_p
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "の下半身は興奮した。", name(dmgcon_charid) + " get" + _s(dmgcon_charid) + " aphrodisiac.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _aphrodisiac
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						ccolor 211
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			else {
				if ( cdata(265, dmgcon_charid) < 100000000 ) {
					cdata(265, dmgcon_charid) += locvar_dmgcon_p / 2 + 1
				}
			}
		}
		return 1
	}
	if ( dmgcon_cond == 14 ) {
		locvar_dmgcon_p = dmgcon_power
		if ( locvar_dmgcon_p > 0 ) {
			if ( cdata(268, dmgcon_charid) == 0 ) {
				cdata(268, dmgcon_charid) = 100
				if ( synccheck(dmgcon_charid, -1) ) {
					txtef COLOR_PURPLE
					txt -1, lang(name(dmgcon_charid) + "は石化した。", name(dmgcon_charid) + " " + is(dmgcon_charid) + " storned.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _storned
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 255, 255, 255, 0, 0, 0, dmgcon_charid, -1
						ccolor 211
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 255, 255, 255, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
				if ( dmgcon_charid < MAX_CHARA_FOLLOWER ) {
					if ( cbit(CHARA_BIT_PCC, dmgcon_charid) == TRUE | dmgcon_charid == CHARA_PLAYER ) {
						create_pcpic dmgcon_charid, 1
					}
				}
			}
		}
		return 1
	}
	return

*conCalc
	locvar_dmgcon_p = rnd(dmgcon_power / 2 + 1) + dmgcon_power / 2
	locvar_dmgcon_r = sdata(locvar_dmgcon_res, dmgcon_charid) / 50
	locvar_dmgcon_p = locvar_dmgcon_p * 100 / (50 + locvar_dmgcon_r * 50)
	if ( locvar_dmgcon_r >= 3 ) {
		if ( locvar_dmgcon_p < 40 ) {
			locvar_dmgcon_f = 0
		}
	}
	return

#deffunc healhp int healhp_charid, int healhp_amount
	if ( healhp_amount < 0 ) {
		if ( eqfaction(healhp_charid, "overwish") ) {
			return
		}
	}
	lint_buff = limitintmax(cHP(healhp_charid) + healhp_amount)
	cHP(healhp_charid) = lint_buff
	if ( cHP(healhp_charid) > cMHP(healhp_charid) ) {
		cHP(healhp_charid) = cMHP(healhp_charid)
	}
	return

#deffunc healmp int healmp_charid, int healmp_amount
	lint_buff = limitintmax(cMP(healmp_charid) + healmp_amount)
	cMP(healmp_charid) = lint_buff
	if ( cMP(healmp_charid) > cMMP(healmp_charid) ) {
		cMP(healmp_charid) = cMMP(healmp_charid)
	}
	return

#deffunc healsp int healsp_charid, int healsp_amount
	cSP(healsp_charid) += healsp_amount
	if ( cSP(healsp_charid) > cMSP(healsp_charid) ) {
		cSP(healsp_charid) = cMSP(healsp_charid)
	}
	return

#deffunc healcon int healcon_charid, int healcon_cond, int healcon_arg3
	if ( healcon_cond == CONDITION_FEAR ) {
		if ( cFear(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cFear(healcon_charid) = 0
			}
			else {
				cFear(healcon_charid) -= healcon_arg3
			}
			if ( cFear(healcon_charid) <= 0 ) {
				cFear(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は恐怖から立ち直った。", name(healcon_charid) + " shake" + _s(healcon_charid) + " off " + his(healcon_charid) + " fear.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _confear
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 306
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			return
		}
	}
	if ( healcon_cond == CONDITION_BLIND ) {
		if ( cBlind(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cBlind(healcon_charid) = 0
			}
			else {
				cBlind(healcon_charid) -= healcon_arg3
			}
			if ( cBlind(healcon_charid) <= 0 ) {
				cBlind(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は盲目から回復した。", name(healcon_charid) + " can see again.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conblind
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 301
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			return
		}
	}
	if ( healcon_cond == CONDITION_CONFUSE ) {
		if ( cConfuse(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cConfuse(healcon_charid) = 0
			}
			else {
				cConfuse(healcon_charid) -= healcon_arg3
			}
			if ( cConfuse(healcon_charid) <= 0 ) {
				cConfuse(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は混乱から回復した。", name(healcon_charid) + " recover" + _s(healcon_charid) + " from confusion.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conconfuse
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 302
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			return
		}
	}
	if ( healcon_cond == CONDITION_PARALYZE ) {
		if ( cParalyze(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cParalyze(healcon_charid) = 0
			}
			else {
				cParalyze(healcon_charid) -= healcon_arg3
			}
			if ( cParalyze(healcon_charid) <= 0 ) {
				cParalyze(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は麻痺から回復した。", name(healcon_charid) + " recover" + _s(healcon_charid) + " from paralysis.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conparalyze
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 303
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			return
		}
	}
	if ( healcon_cond == CONDITION_POISON ) {
		if ( cPoison(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cPoison(healcon_charid) = 0
			}
			else {
				cPoison(healcon_charid) -= healcon_arg3
			}
			if ( cPoison(healcon_charid) <= 0 ) {
				cPoison(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は毒から回復した。", name(healcon_charid) + " recover" + _s(healcon_charid) + " from poison.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conpoison
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 304
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			return
		}
	}
	if ( healcon_cond == CONDITION_SLEEP ) {
		if ( cSleep(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cSleep(healcon_charid) = 0
			}
			else {
				cSleep(healcon_charid) -= healcon_arg3
			}
			if ( cSleep(healcon_charid) <= 0 ) {
				cSleep(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は心地よい眠りから覚めた。", name(healcon_charid) + " awake" + _s(healcon_charid) + " from " + his(healcon_charid) + " sleep.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _consleep
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 305
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
			return
		}
	}
	if ( healcon_cond == CONDITION_DIM ) {
		if ( cDim(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cDim(healcon_charid) = 0
			}
			else {
				cDim(healcon_charid) -= healcon_arg3
			}
			if ( cDim(healcon_charid) <= 0 ) {
				cDim(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "の意識ははっきりした。", name(healcon_charid) + " recover" + _s(healcon_charid) + " from dim.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _condim
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 307
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
		}
	}
	if ( healcon_cond == CONDITION_BLEED ) {
		if ( cBleed(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cBleed(healcon_charid) = 0
			}
			else {
				cBleed(healcon_charid) -= healcon_arg3
			}
			if ( cBleed(healcon_charid) <= 0 ) {
				cBleed(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "の出血は止まった。", name(healcon_charid) + your(healcon_charid) + " bleeding stops.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _conbleed
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 308
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
		}
	}
	if ( healcon_cond == CONDITION_DRUNK ) {
		if ( cDrunk(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cDrunk(healcon_charid) = 0
			}
			else {
				cDrunk(healcon_charid) -= healcon_arg3
			}
			if ( cDrunk(healcon_charid) <= 0 ) {
				cDrunk(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "の酔いは覚めた。", name(healcon_charid) + " get" + _s(healcon_charid) + " sober.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _condrunk
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 309
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
		}
	}
	if ( healcon_cond == CONDITION_INSANE ) {
		if ( cInsane(healcon_charid) > 0 ) {
			if ( healcon_arg3 == 0 ) {
				cInsane(healcon_charid) = 0
			}
			else {
				cInsane(healcon_charid) -= healcon_arg3
			}
			if ( cInsane(healcon_charid) <= 0 ) {
				cInsane(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は正気に戻った。", name(healcon_charid) + " come" + _s(healcon_charid) + " to " + yourself(healcon_charid) + " again.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _coninsane
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 310
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
		}
	}
	if ( healcon_cond == CONDITION_SICK ) {
		if ( cSick(healcon_charid) > 0 ) {
			if ( have_bigench(healcon_charid, 11) == 0 ) {
				if ( healcon_arg3 == 0 ) {
					cSick(healcon_charid) = 0
				}
				else {
					cSick(healcon_charid) -= healcon_arg3
				}
			}
			if ( cSick(healcon_charid) <= 0 ) {
				cSick(healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "の病気は治った。", name(healcon_charid) + " recover" + _s(healcon_charid) + " from " + his(healcon_charid) + " illness.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _consick
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 311
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
		}
	}
	if ( healcon_cond == 13 ) {
		if ( cdata(265, healcon_charid) > 0 ) {
			if ( have_bigench(healcon_charid, 11) == 0 ) {
				if ( healcon_arg3 == 0 ) {
					cdata(265, healcon_charid) = 0
				}
				else {
					cdata(265, healcon_charid) -= healcon_arg3
				}
			}
			if ( cdata(265, healcon_charid) <= 0 ) {
				cdata(265, healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "の下半身は落ち着いた。", name(healcon_charid) + " recover" + _s(healcon_charid) + " from " + his(healcon_charid) + " from Aphrodisiac.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _aphrodisiac
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 311
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
			}
		}
	}
	if ( healcon_cond == 14 ) {
		if ( cdata(268, healcon_charid) > 0 ) {
			cdata(268, healcon_charid) -= healcon_arg3
			if ( cdata(268, healcon_charid) <= 0 ) {
				cdata(268, healcon_charid) = 0
				if ( synccheck(healcon_charid, -1) ) {
					txt -1, lang(name(healcon_charid) + "は石化から回復した。", name(healcon_charid) + " recover" + _s(healcon_charid) + " from storned.")
					if ( cfg_dmgmonitor2 == 1 ) {
						mondmgn(mondmgcnt) = _storned
						mondmg(0, mondmgcnt) = timeGetTime(), 0, 0, 255, 0, 0, 0, 0, healcon_charid, -1
						ccolor 311
						if ( stat == 0 ) {
							mondmg(2, mondmgcnt) = 0, 255, 0, 0, 0, 0
						}
						mondmgcnt = (mondmgcnt + 1) \ length2(mondmg)
					}
				}
				if ( healcon_charid < MAX_CHARA_FOLLOWER ) {
					if ( cbit(CHARA_BIT_PCC, healcon_charid) == TRUE | healcon_charid == CHARA_PLAYER ) {
						create_pcpic healcon_charid, 1
					}
				}
			}
		}
	}
	return

#deffunc spillblood int spillblood_arg1, int spillblood_arg2, int spillblood_arg3
	repeat spillblood_arg3 + 1
		if ( cnt == 0 ) {
			locvar_spillblood_dx = spillblood_arg1
			locvar_spillblood_dy = spillblood_arg2
		}
		else {
			locvar_spillblood_dx = spillblood_arg1 + rnd(2) - rnd(2)
			locvar_spillblood_dy = spillblood_arg2 + rnd(2) - rnd(2)
		}
		if ( locvar_spillblood_dx < 0 | locvar_spillblood_dx >= mWidth | locvar_spillblood_dy < 0 | locvar_spillblood_dy >= mHeight ) {
			continue
		}
		if ( chipm(CHIPM_WALL, mapId(locvar_spillblood_dx, locvar_spillblood_dy)) ) {
			continue
		}
		if ( mapFragment(locvar_spillblood_dx, locvar_spillblood_dy) \ 10 < 5 ) {
			mapFragment(locvar_spillblood_dx, locvar_spillblood_dy)++
		}
	loop
	return

#deffunc spillfrag int spillfrag_arg1, int spillfrag_arg2, int spillfrag_arg3
	repeat spillfrag_arg3 + 1
		if ( cnt == 0 ) {
			locvar_spillblood_dx = spillfrag_arg1
			locvar_spillblood_dy = spillfrag_arg2
		}
		else {
			locvar_spillblood_dx = spillfrag_arg1 + rnd(2) - rnd(2)
			locvar_spillblood_dy = spillfrag_arg2 + rnd(2) - rnd(2)
		}
		if ( locvar_spillblood_dx < 0 | locvar_spillblood_dx >= mWidth | locvar_spillblood_dy < 0 | locvar_spillblood_dy >= mHeight ) {
			continue
		}
		if ( chipm(CHIPM_WALL, mapId(locvar_spillblood_dx, locvar_spillblood_dy)) ) {
			continue
		}
		if ( mapFragment(locvar_spillblood_dx, locvar_spillblood_dy) / 10 < 4 ) {
			mapFragment(locvar_spillblood_dx, locvar_spillblood_dy) = mapFragment(locvar_spillblood_dx, locvar_spillblood_dy) \ 10 + (mapFragment(locvar_spillblood_dx, locvar_spillblood_dy) / 10 + 1) * 10
		}
	loop
	return

#deffunc check_kill int check_kill_arg1, int check_kill_arg2
	if ( gArea  == AREA_PET_ARENA | gArea  == 49 | gArea  == AREA_SHOW_HOUSE | gArea  == AREA_ARENA | oabit(6, gArea ) ) {
		return
	}
	locvar_check_kill_p = 0
	if ( check_kill_arg1 >= 0 ) {
		if ( check_kill_arg1 == 0 | cRelation(check_kill_arg1) >= RELATION_ALLY ) {
			if ( check_kill_arg2 > 16 ) {
				gKilled++
				if ( cId(check_kill_arg2) == fFGTG ) {
					if ( fFGNorma > 0 ) {
						fFGNorma--
					}
				}
				if ( gettrait(check_kill_arg1, 181) != 0 ) {
					s = refchara(cId(check_kill_arg2), DBSPEC_CHARA_FILTER, 1)
					if ( instr(s, 0, "/man/") != (-1) ) {
						locvar_check_kill_p = -2
					}
				}
				if ( cOrgRelation(check_kill_arg2) >= RELATION_NEUTRAL ) {
					locvar_check_kill_p = -2
				}
				if ( cId(check_kill_arg2) == CREATURE_ID_RICH_PERSON ) {
					locvar_check_kill_p = -15
				}
				if ( cId(check_kill_arg2) == CREATURE_ID_NOBLE_CHILD ) {
					locvar_check_kill_p = -10
				}
				if ( cId(check_kill_arg2) == CREATURE_ID_TOURIST ) {
					locvar_check_kill_p = -5
				}
				if ( cRole(check_kill_arg2) >= (1000 /*!!!@[ROLE_SHOP_MIN @@@ ROLE_SHOP_WEAPON]@!!! */) & cRole(check_kill_arg2) < (2000 /*!!!@[ROLE_GUEST_BEGGAR @@@ ROLE_GUEST_MIN]@!!! */) | cRole(check_kill_arg2) == ROLE_GUEST_MERCHANT | cRole(check_kill_arg2) == ROLE_SHOP_MATERIAL | cRole(check_kill_arg2) == ROLE_SHOP_SPELLBOOK | cRole(check_kill_arg2) == ROLE_SHOP_APHRODISIAC | cRole(check_kill_arg2) == ROLE_SHOP_DOUJINSHI | cRole(check_kill_arg2) == ROLE_SHOP_UNKNOWN3104 | cRole(check_kill_arg2) == ROLE_SHOP_HERB_MERCHANT | cRole(check_kill_arg2) == ROLE_SHOP_PROSTITUTE_GUILD | cRole(check_kill_arg2) == ROLE_SHOP_BLACKSMITH_GUILD | cRole(check_kill_arg2) == ROLE_SHOP_MYSTERIOUS_PRODUCER | cRole(check_kill_arg2) == ROLE_SHOP_FAIRY | cRole(check_kill_arg2) == ROLE_SHOP_MORPHY ) {
					locvar_check_kill_p = -10
				}
				if ( cRole(check_kill_arg2) == ROLE_ADVENTURER & ocFormerPet(check_kill_arg2) != 20000 ) {
					modimp check_kill_arg2, -25
				}
			}
		}
		if ( cRelation(check_kill_arg1) >= RELATION_ALLY ) {
			if ( check_kill_arg1 != 0 ) {
				if ( cImpression(check_kill_arg1) < 200 ) {
					if ( rnd(2) ) {
						modimp check_kill_arg1, 1
						cEmoIcon(check_kill_arg1) = 17 + 100 * 3
					}
				}
				else {
					if ( rnd(10) == 0 ) {
						modimp check_kill_arg1, 1
						cEmoIcon(check_kill_arg1) = 17 + 100 * 3
					}
				}
			}
		}
	}
	if ( locvar_check_kill_p != 0 ) {
		modkarma 0, locvar_check_kill_p
	}
	return

#deffunc item_acid int item_acid_arg1, int item_acid_arg2
	if ( item_acid_arg2 != (-1) ) {
		locvar_item_acid_ci = item_acid_arg2
	}
	else {
		locvar_item_acid_ci = -1
		repeat 30, 100
			locvar_item_acid_body = cdata(cnt, item_acid_arg1) / EXT_EQUIP_SLOTS
			if ( locvar_item_acid_body == 0 ) {
				break
			}
			locvar_item_acid_p = cdata(cnt, item_acid_arg1) \ EXT_EQUIP_SLOTS - 1
			if ( locvar_item_acid_p == (-1) ) {
				continue
			}
			if ( rnd(limit(30, 1, 30)) == 0 ) {
				if ( iLevel(locvar_item_acid_p) > (-4) ) {
					locvar_item_acid_ci = locvar_item_acid_p
					break
				}
			}
		loop
	}
	if ( locvar_item_acid_ci == (-1) ) {
		return
	}
	if ( refitem(iID(locvar_item_acid_ci), DBSPEC_TYPE, locvar_item_acid_ci) >= FILTER_ITEM_MIN ) {
		return
	}
	if ( ibit(ITEM_BIT_ACIDPROOF, locvar_item_acid_ci) == FALSE ) {
		txtef COLOR_PURPLE
		txt -1, lang(name(item_acid_arg1) + "の" + itemname(locvar_item_acid_ci) + "は酸で傷ついた。", name(item_acid_arg1) + your(item_acid_arg1) + " " + itemname(locvar_item_acid_ci, , 1) + " is damaged by acid.")
		safe_subtract iLevel(locvar_item_acid_ci), 1
	}
	else {
		txt -1, lang(name(item_acid_arg1) + "の" + itemname(locvar_item_acid_ci) + "は酸では傷つかない。", name(item_acid_arg1) + your(item_acid_arg1) + " " + itemname(locvar_item_acid_ci, , 1) + " is immune to acid.")
	}
	return

#deffunc item_fire int item_fire_arg1, int item_fire_arg2
	procid = (procid + 1) \ 10
	proclist(procid) = "item_fire unit:" + item_fire_arg1 + " item:" + item_fire_arg2 + " ct:" + ct
	if ( dbg_outputdebuglog ) {
	}
	locvar_item_fire_max = 0
	locvar_item_fire_ti = -1
	if ( item_fire_arg2 != (-1) ) {
		itemfirex = iX(item_fire_arg2)
		itemfirey = iY(item_fire_arg2)
		if ( itemfirex >= 0 & itemfirey >= 0 & itemfirex < mWidth & itemfirey < mHeight ) {
			if ( mapChara(itemfirex, itemfirey) > 0 ) {
				if ( godcheck(mapChara(itemfirex, itemfirey) - 1) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(mapChara(itemfirex, itemfirey) - 1) == "itzpalt") ) {
					procid = (procid + 1) \ 10
					proclist(procid) = "item_fire end:0" + " ct:" + ct
					if ( dbg_outputdebuglog ) {
					}
					return 0
				}
			}
		}
		locvar_item_fire_list(0) = item_fire_arg2
		locvar_item_fire_max++
	}
	if ( item_fire_arg1 != (-1) ) {
		if ( godcheck(item_fire_arg1) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(item_fire_arg1) == "itzpalt") ) {
			procid = (procid + 1) \ 10
			proclist(procid) = "item_fire end:0" + " ct:" + ct
			if ( dbg_outputdebuglog ) {
			}
			return 0
		}
		if ( sResFire(item_fire_arg1) / 50 >= 6 | cQuality(item_fire_arg1) >= FIX_QUALITY_MIRACLE ) {
			procid = (procid + 1) \ 10
			proclist(procid) = "item_fire end:0" + " ct:" + ct
			if ( dbg_outputdebuglog ) {
			}
			return 0
		}
		inv_getheader item_fire_arg1
		repeat invrange, invhead
			if ( iNum(cnt) == 0 ) {
				continue
			}
			if ( iID(cnt) == ITEM_ID_FIREPROOF_BLANKET ) {
				if ( locvar_item_fire_ti == (-1) ) {
					locvar_item_fire_ti = cnt
					item_separate locvar_item_fire_ti
				}
				continue
			}
			if ( item_fire_arg2 == (-1) ) {
				locvar_item_fire_list(locvar_item_fire_max) = cnt
				locvar_item_fire_max++
			}
		loop
	}
	if ( locvar_item_fire_max == 0 ) {
		procid = (procid + 1) \ 10
		proclist(procid) = "item_fire end:0" + " ct:" + ct
		if ( dbg_outputdebuglog ) {
		}
		return 0
	}
	locvar_item_fire_f = 0
	repeat 3
		locvar_item_acid_ci = locvar_item_fire_list(rnd(locvar_item_fire_max))
		if ( iNum(locvar_item_acid_ci) <= 0 ) {
			continue
		}
		rowact_item locvar_item_acid_ci
		if ( ibit(ITEM_BIT_FIREPROOF, locvar_item_acid_ci) == FALSE ) {
			if ( ibit(ITEM_BIT_PRECIOUS, locvar_item_acid_ci) == FALSE ) {
				locvar_item_fire_a = refitem(iID(locvar_item_acid_ci), DBSPEC_TYPE, locvar_item_acid_ci)
				if ( locvar_item_fire_a == 57000 ) {
					if ( iParam2(locvar_item_acid_ci) == 0 ) {
						if ( item_fire_arg1 == (-1) ) {
							if ( synccheck(iX(locvar_item_acid_ci), iY(locvar_item_acid_ci)) ) {
								txtef COLOR_ORANGE
								txt -1, lang("地面の" + itemname(locvar_item_acid_ci, iNum(locvar_item_acid_ci)) + "はこんがりと焼き上がった。", itemname(locvar_item_acid_ci, iNum(locvar_item_acid_ci)) + " on the ground get" + _s2(iNum(locvar_item_acid_ci)) + " perfectly broiled.")
							}
						}
						if ( item_fire_arg1 != (-1) ) {
							if ( synccheck(item_fire_arg1, -1) ) {
								txtef COLOR_ORANGE
								txt -1, lang(name(item_fire_arg1) + "の" + itemname(locvar_item_acid_ci, iNum(locvar_item_acid_ci)) + "はこんがりと焼き上がった。", name(item_fire_arg1) + your(item_fire_arg1) + " " + itemname(locvar_item_acid_ci, iNum(locvar_item_acid_ci), 1) + " get" + _s2(iNum(locvar_item_acid_ci)) + " perfectly broiled.")
							}
						}
						make_dish locvar_item_acid_ci, rnd(5) + 1
						locvar_item_fire_f = 1
						continue
					}
				}
				if ( locvar_item_fire_a == 72000 | locvar_item_fire_a == 59000 | locvar_item_fire_a == 68000 | iQuality(locvar_item_acid_ci) >= FIX_QUALITY_MIRACLE ) {
					continue
				}
				if ( iEquip(locvar_item_acid_ci) != 0 ) {
					if ( rnd(2) ) {
						continue
					}
				}
				if ( locvar_item_fire_a != 56000 & locvar_item_fire_a != 80000 & locvar_item_fire_a != 55000 & locvar_item_fire_a != 53000 & locvar_item_fire_a != 54000 ) {
					if ( rnd(4) ) {
						continue
					}
					if ( item_fire_arg1 != (-1) ) {
						if ( rnd(4) ) {
							continue
						}
					}
				}
				if ( locvar_item_fire_ti != (-1) ) {
					if ( iNum(locvar_item_fire_ti) > 0 ) {
						if ( synccheck(item_fire_arg1, -1) ) {
							txt -1, lang(itemname(locvar_item_fire_ti, 1) + "が" + name(item_fire_arg1) + "の持ち物を炎から守った。", itemname(locvar_item_fire_ti, 1) + " protects " + name(item_fire_arg1) + your(item_fire_arg1) + " stuff from fire.")
						}
						if ( inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), locvar_item_fire_ti) > 0 ) {
							inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), locvar_item_fire_ti)--
						}
						else {
							if ( rnd(20) == 0 ) {
								iNum(locvar_item_fire_ti)--
								if ( synccheck(item_fire_arg1, -1) ) {
									txt -1, lang(itemname(locvar_item_fire_ti, 1) + "は灰と化した。", itemname(locvar_item_fire_ti, 1) + " turns to dust.")
									break
								}
							}
						}
						continue
					}
				}
				locvar_item_acid_p = rndex(iNum(locvar_item_acid_ci)) / 2 + 1
				if ( item_fire_arg1 != (-1) ) {
					if ( iEquip(locvar_item_acid_ci) != 0 ) {
						if ( synccheck(item_fire_arg1, -1) ) {
							txtef COLOR_PURPLE
							txt -1, lang(name(item_fire_arg1) + "の装備している" + itemname(locvar_item_acid_ci, locvar_item_acid_p) + "は灰と化した。", itemname(locvar_item_acid_ci, locvar_item_acid_p) + " " + name(item_fire_arg1) + " equip" + _s(item_fire_arg1) + " turn" + _s2(locvar_item_acid_p) + " to dust.")
							if ( godcheck(0) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(0) == "itzpalt") ) {
								burntoffering locvar_item_acid_ci, 0
							}
						}
						repeat 16 - 1, 1
							if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
								if ( godcheck(cnt) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(cnt) == "itzpalt") ) {
									if ( dist(cX(cnt), cY(cnt), cX(item_fire_arg1), cY(item_fire_arg1)) <= 6 ) {
										burntoffering locvar_item_acid_ci, cnt
									}
								}
							}
						loop
						cdata(iEquip(locvar_item_acid_ci), item_fire_arg1) = cdata(iEquip(locvar_item_acid_ci), item_fire_arg1) / EXT_EQUIP_SLOTS * 10000
						iEquip(locvar_item_acid_ci) = 0
						r1 = item_fire_arg1
						gosub *charaRefresh
					}
					else {
						if ( synccheck(item_fire_arg1, -1) ) {
							txtef COLOR_PURPLE
							txt -1, lang(name(item_fire_arg1) + "の" + itemname(locvar_item_acid_ci, locvar_item_acid_p) + "は灰と化した。", name(item_fire_arg1) + your(item_fire_arg1) + " " + itemname(locvar_item_acid_ci, locvar_item_acid_p, 1) + " turn" + _s2(locvar_item_acid_p) + " to dust.")
							if ( godcheck(0) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(0) == "itzpalt") ) {
								burntoffering locvar_item_acid_ci, 0
							}
						}
						repeat 16 - 1, 1
							if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
								if ( godcheck(cnt) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(cnt) == "itzpalt") ) {
									if ( dist(cX(cnt), cY(cnt), cX(item_fire_arg1), cY(item_fire_arg1)) <= 6 ) {
										burntoffering locvar_item_acid_ci, cnt
									}
								}
							}
						loop
					}
				}
				else {
					if ( synccheck(iX(locvar_item_acid_ci), iY(locvar_item_acid_ci)) ) {
						txtef COLOR_PURPLE
						txt -1, lang("地面の" + itemname(locvar_item_acid_ci, locvar_item_acid_p) + "は灰と化した。", itemname(locvar_item_acid_ci, locvar_item_acid_p) + " on the ground turn" + _s(locvar_item_acid_p) + " to dust.")
						if ( godcheck(0) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(0) == "itzpalt") ) {
							burntoffering locvar_item_acid_ci, 0
						}
					}
					repeat 16 - 1, 1
						if ( cExist(cnt) == CHAR_STATE_ALIVE ) {
							if ( godcheck(cnt) == "plamja" | (ogTitleElementalMaster == 2 & godcheck(cnt) == "itzpalt") ) {
								if ( dist(cX(cnt), cY(cnt), iX(item_fire_arg2), iY(item_fire_arg2)) <= 6 ) {
									burntoffering locvar_item_acid_ci, cnt
								}
							}
						}
					loop
				}
				iNum(locvar_item_acid_ci) -= locvar_item_acid_p
				cell_refresh iX(locvar_item_acid_ci), iY(locvar_item_acid_ci)
				locvar_item_fire_f = 1
			}
		}
	loop
	gosub *label_1681
	procid = (procid + 1) \ 10
	proclist(procid) = "item_fire end:" + locvar_item_fire_f + " ct:" + ct
	if ( dbg_outputdebuglog ) {
	}
	return locvar_item_fire_f

#deffunc mapitem_fire int mapitem_fire_arg1, int mapitem_fire_arg2
	if ( mapItems(mapitem_fire_arg1, mapitem_fire_arg2) == 0 ) {
		return
	}
	inv_getheader -1
	locvar_item_acid_ci = -1
	repeat invrange, invhead
		if ( iNum(cnt) == 0 ) {
			continue
		}
		if ( iX(cnt) == mapitem_fire_arg1 ) {
			if ( iY(cnt) == mapitem_fire_arg2 ) {
				locvar_item_acid_ci = cnt
				break
			}
		}
	loop
	if ( locvar_item_acid_ci != (-1) ) {
		item_fire -1, locvar_item_acid_ci
		if ( stat == 1 ) {
			if ( mapMef(mapitem_fire_arg1, mapitem_fire_arg2) == 0 ) {
				addmef mapitem_fire_arg1, mapitem_fire_arg2, MEF_TYPE_FIRE, xy2pic(24, 0), rnd(10) + 5, 100, cc
			}
		}
		cell_refresh mapitem_fire_arg1, mapitem_fire_arg2
	}
	return

#deffunc item_cold int item_cold_arg1, int item_cold_arg2
	locvar_item_fire_max = 0
	locvar_item_fire_ti = -1
	if ( item_cold_arg2 != (-1) ) {
		locvar_item_fire_list(0) = item_cold_arg2
		locvar_item_fire_max++
	}
	if ( item_cold_arg1 != (-1) ) {
		if ( sResCold(item_cold_arg1) / 50 >= 6 | cQuality(item_cold_arg1) >= FIX_QUALITY_MIRACLE ) {
			return 0
		}
		inv_getheader item_cold_arg1
		repeat invrange, invhead
			if ( iNum(cnt) == 0 ) {
				continue
			}
			if ( iID(cnt) == ITEM_ID_COLDPROOF_BLANKET ) {
				if ( locvar_item_fire_ti == (-1) ) {
					locvar_item_fire_ti = cnt
					item_separate locvar_item_fire_ti
				}
				continue
			}
			if ( item_cold_arg2 == (-1) ) {
				locvar_item_fire_list(locvar_item_fire_max) = cnt
				locvar_item_fire_max++
			}
		loop
	}
	if ( locvar_item_fire_max == 0 ) {
		return 0
	}
	locvar_item_fire_f = 0
	repeat 2
		locvar_item_acid_ci = locvar_item_fire_list(rnd(locvar_item_fire_max))
		if ( iNum(locvar_item_acid_ci) <= 0 ) {
			continue
		}
		rowact_item locvar_item_acid_ci
		if ( ibit(ITEM_BIT_PRECIOUS, locvar_item_acid_ci) == FALSE ) {
			locvar_item_fire_a = refitem(iID(locvar_item_acid_ci), DBSPEC_TYPE, locvar_item_acid_ci)
			if ( item_cold_arg1 == (-1) ) {
				locvar_item_cold_s = ""
			}
			else {
				locvar_item_cold_s = name(item_cold_arg1) + lang("の", your(item_cold_arg1))
			}
			if ( locvar_item_fire_a == 72000 | locvar_item_fire_a == 59000 | locvar_item_fire_a == 68000 ) {
				continue
			}
			if ( iQuality(locvar_item_acid_ci) >= FIX_QUALITY_MIRACLE | iEquip(locvar_item_acid_ci) != 0 ) {
				continue
			}
			if ( locvar_item_fire_a != 52000 ) {
				if ( rnd(30) ) {
					continue
				}
			}
			if ( locvar_item_fire_ti != (-1) ) {
				if ( iNum(locvar_item_fire_ti) > 0 ) {
					txt -1, lang(itemname(locvar_item_fire_ti, 1) + "が" + name(item_cold_arg1) + "の持ち物を冷気から守った。", itemname(locvar_item_fire_ti, 1) + " protects " + name(item_cold_arg1) + your(item_cold_arg1) + " stuff from cold.")
					if ( inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), locvar_item_fire_ti) > 0 ) {
						inv((9 /*!!!@[INV_ITEM_AMMO @@@ INV_ITEM_CHARGE @@@ INV_ITEM_CLIENT @@@ INV_ITEM_FILE @@@ INV_ITEM_NEXT_PERIOD]@!!! */), locvar_item_fire_ti)--
					}
					else {
						if ( rnd(20) == 0 ) {
							txt -1, lang(itemname(locvar_item_fire_ti, 1) + "は粉々に砕けた。", itemname(locvar_item_fire_ti, 1) + " is broken to pieces.")
							iNum(locvar_item_fire_ti)--
							break
						}
					}
					continue
				}
			}
			locvar_item_acid_p = rndex(iNum(locvar_item_acid_ci)) / 2 + 1
			txtef COLOR_PURPLE
			txt -1, lang(locvar_item_cold_s + itemname(locvar_item_acid_ci, locvar_item_acid_p) + "は粉々に砕けた。", locvar_item_cold_s + itemname(locvar_item_acid_ci, locvar_item_acid_p) + " break" + _s2(locvar_item_acid_p) + " to pieces.")
			iNum(locvar_item_acid_ci) -= locvar_item_acid_p
			locvar_item_fire_f = 1
		}
	loop
	gosub *label_1681
	return locvar_item_fire_f

#deffunc mapitem_cold int mapitem_cold_arg1, int mapitem_cold_arg2
	if ( mapItems(mapitem_cold_arg1, mapitem_cold_arg2) == 0 ) {
		return
	}
	inv_getheader -1
	locvar_item_acid_ci = -1
	repeat invrange, invhead
		if ( iNum(cnt) == 0 ) {
			continue
		}
		if ( iX(cnt) == mapitem_cold_arg1 ) {
			if ( iY(cnt) == mapitem_cold_arg2 ) {
				locvar_item_acid_ci = cnt
				break
			}
		}
	loop
	if ( locvar_item_acid_ci != (-1) ) {
		item_cold -1, locvar_item_acid_ci
		cell_refresh mapitem_cold_arg1, mapitem_cold_arg2
	}
	return

#deffunc copy_chara int copy_chara_arg1, int copy_chara_prm1, int copy_chara_prm2
	procid = (procid + 1) \ 10
	proclist(procid) = "copy_chara:Begin" + " ct:" + ct
	if ( dbg_outputdebuglog ) {
	}
	if ( copy_chara_arg1 != (-1) ) {
		locvar_copy_chara_c = copy_chara_arg1
	}
	else {
		locvar_copy_chara_c = 0
		repeat 188, 57
			if ( cExist(cnt) == CHAR_STATE_DEAD ) {
				locvar_copy_chara_c = cnt
				break
			}
		loop
	}
	if ( locvar_copy_chara_c == 0 ) {
		return 0
	}
	if ( copy_chara_prm2 == 0 ) {
		locvar_copy_chara_f = 0
		repeat 8
			locvar_copy_chara_y = cY(copy_chara_prm1) - rnd(cnt / 4 + 1) + rnd(cnt / 4 + 1)
			if ( locvar_copy_chara_y < 0 | locvar_copy_chara_y >= mHeight ) {
				continue
			}
			locvar_copy_chara_x = cX(copy_chara_prm1) - rnd(cnt / 4 + 1) + rnd(cnt / 4 + 1)
			if ( locvar_copy_chara_x < 0 | locvar_copy_chara_x >= mWidth ) {
				continue
			}
			if ( mapChara(locvar_copy_chara_x, locvar_copy_chara_y) == 0 ) {
				if ( (chipm(CHIPM_ATTRIB, mapId(locvar_copy_chara_x, locvar_copy_chara_y)) & CHIPM_ATTRIB_CANT_PASS) == 0 ) {
					locvar_copy_chara_f = 1
					break
				}
			}
		loop
		if ( locvar_copy_chara_f == 0 ) {
			return 0
		}
	}
	procid = (procid + 1) \ 10
	proclist(procid) = "copy_chara:Proc" + " ct:" + ct
	if ( dbg_outputdebuglog ) {
	}
	del_chara locvar_copy_chara_c
	memcpy sdata(SKILL_NONE, locvar_copy_chara_c), sdata(SKILL_NONE, copy_chara_prm1), 4800
	memcpy sdataex(0, locvar_copy_chara_c), sdataex(0, copy_chara_prm1), 2400
	memcpy cExist(locvar_copy_chara_c), cExist(copy_chara_prm1), 2000
	memcpy ocAIStrategy(locvar_copy_chara_c), ocAIStrategy(copy_chara_prm1), 1000
	repeat 10
		cdatan(cnt, locvar_copy_chara_c) = cdatan(cnt, copy_chara_prm1)
	loop
	faction(locvar_copy_chara_c) = faction(copy_chara_prm1)
	if ( copy_chara_prm2 == 0 ) {
		mapChara(locvar_copy_chara_x, locvar_copy_chara_y) = locvar_copy_chara_c + 1
		cX(locvar_copy_chara_c) = locvar_copy_chara_x
		cY(locvar_copy_chara_c) = locvar_copy_chara_y
		cXorg(locvar_copy_chara_c) = cX(locvar_copy_chara_c)
		cYorg(locvar_copy_chara_c) = cY(locvar_copy_chara_c)
	}
	cImpression(locvar_copy_chara_c) = 0
	cGold(locvar_copy_chara_c) = 0
	repeat 30, 100
		cdata(cnt, locvar_copy_chara_c) = cdata(cnt, locvar_copy_chara_c) / EXT_EQUIP_SLOTS * 10000
	loop
	cRole(locvar_copy_chara_c) = ROLE_NONE
	cOrgRelation(locvar_copy_chara_c) = RELATION_ENEMY
	ocPetJobSkill(locvar_copy_chara_c) = 0
	ocdata(80, locvar_copy_chara_c) = 0
	cbitmod CHARA_BIT_STETHOSCOPE, locvar_copy_chara_c, FALSE
	cbitmod CHARA_BIT_PCC, locvar_copy_chara_c, FALSE
	cbitmod CHARA_BIT_LEASHED, locvar_copy_chara_c, FALSE
	cbitmod CHARA_BIT_LIVESTOCK, locvar_copy_chara_c, FALSE
	cbitmod CHARA_BIT_MARRIED, locvar_copy_chara_c, FALSE
	cbitmod CHARA_BIT_RIDE, locvar_copy_chara_c, FALSE
	cbitmod CHARA_BIT_REFRESH, locvar_copy_chara_c, TRUE
	cbitmod CHARA_BIT_SANDBAG, locvar_copy_chara_c, FALSE
	memset cRowAct(locvar_copy_chara_c), 0, 24
	procid = (procid + 1) \ 10
	proclist(procid) = "copy_chara:end" + " ct:" + ct
	if ( dbg_outputdebuglog ) {
	}
	return 1

#deffunc txteledmg int txteledmg_arg1, int txteledmg_arg2, int txteledmg_arg3, int txteledmg_ele
	if ( txteledmg_ele == 50 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は燃え上がった。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " burnt.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("燃やし尽くした。", "burn" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " to death.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は燃え尽きて灰になった。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " burnt to ashes.")
		}
		return
	}
	if ( txteledmg_ele == 51 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は凍えた。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " frozen.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("氷の塊に変えた。", "transform" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " to an ice sculpture.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は氷の彫像になった。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " frozen and turn" + _s(txteledmg_arg3) + " into an ice sculpture.")
		}
		return
	}
	if ( txteledmg_ele == 52 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "に電流が走った。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " shocked.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("焦げカスにした。", "electrocute" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " to death.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は雷に打たれ死んだ。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " struck by lightning and die" + _s(txteledmg_arg3) + ".")
		}
		return
	}
	if ( txteledmg_ele == 53 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は闇の力で傷ついた。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " struck by dark force.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("闇に飲み込んだ。", "let" + _s(txteledmg_arg2) + " the depths swallow " + him(txteledmg_arg3) + ".")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は闇に蝕まれて死んだ。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " consumed by darkness.")
		}
		return
	}
	if ( txteledmg_ele == 58 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "の神経は傷ついた。", name(txteledmg_arg3) + your(txteledmg_arg3) + " nerves are hurt.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("神経を破壊した。", "destroy" + _s(txteledmg_arg2) + " " + his(txteledmg_arg3) + " nerves.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は神経を蝕まれて死んだ。", name(txteledmg_arg3) + " die" + _s(txteledmg_arg3) + " from neurofibroma.")
		}
		return
	}
	if ( txteledmg_ele == 54 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は狂気に襲われた。", name(txteledmg_arg3) + " suffer" + _s(txteledmg_arg3) + " a splitting headache.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("再起不能にした。", "completely disable" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + ".")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は発狂して死んだ。", name(txteledmg_arg3) + " lose" + _s(txteledmg_arg3) + " " + his(txteledmg_arg3) + " mind and commit" + _s(txteledmg_arg3) + " a suicide.")
		}
		return
	}
	if ( txteledmg_ele == 59 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は混沌の渦で傷ついた。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " hurt by chaotic force.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("混沌の渦に吸い込んだ。", "let" + _s(txteledmg_arg2) + " the chaos consume " + him(txteledmg_arg3) + ".")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は混沌の渦に吸収された。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " drawn into a chaotic vortex.")
		}
		return
	}
	if ( txteledmg_ele == 56 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は冥界の冷気で傷ついた。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " chilled by infernal squall.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("冥界に墜とした。", "entrap" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " into the inferno.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は冥界に墜ちた。", name(txteledmg_arg3) + " go" + _s(txteledmg_arg3, 1) + " to hell.")
		}
		return
	}
	if ( txteledmg_ele == 55 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は吐き気を催した。", name(txteledmg_arg3) + " suffer" + _s(txteledmg_arg3) + " from venom.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("毒殺した。", "kill" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " with poison.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は毒に蝕まれて死んだ。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " poisoned to death.")
		}
		return
	}
	if ( txteledmg_ele == 57 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は轟音の衝撃を受けた。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " shocked by a shrill sound.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("聴覚を破壊し殺した。", "shatter" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " to atoms.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は朦朧となって死んだ。", name(txteledmg_arg3) + " resonate" + _s(txteledmg_arg3) + " and break up.")
		}
		return
	}
	if ( txteledmg_ele == 63 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は酸に焼かれた。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " burnt by acid.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("ドロドロに溶かした。", "melt" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " away.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は酸に焼かれ溶けた。", name(txteledmg_arg3) + " melt" + _s(txteledmg_arg3) + ".")
		}
		return
	}
	if ( txteledmg_ele == 61 ) {
		if ( txteledmg_arg1 == 0 ) {
			if ( synccheck(txteledmg_arg3, -1) ) {
				txt -1, lang(name(txteledmg_arg3) + "は切り傷を負った。", name(txteledmg_arg3) + " get" + _s(txteledmg_arg3) + " a cut.")
			}
		}
		if ( txteledmg_arg1 == 1 ) {
			txt -1, lang("千切りにした。", "cut" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + " into thin strips.")
		}
		if ( txteledmg_arg1 == 2 ) {
			txt -1, lang(name(txteledmg_arg3) + "は千切りになった。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " cut into thin strips.")
		}
		return
	}
	if ( txteledmg_arg1 == 0 ) {
		if ( synccheck(txteledmg_arg3, -1) ) {
			txt -1, lang(name(txteledmg_arg3) + "は傷ついた。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " wounded.")
		}
	}
	if ( txteledmg_arg1 == 1 ) {
		txt -1, lang("殺した。", "kill" + _s(txteledmg_arg2) + " " + him(txteledmg_arg3) + ".")
	}
	if ( txteledmg_arg1 == 2 ) {
		txt -1, lang(name(txteledmg_arg3) + "は死んだ。", name(txteledmg_arg3) + " " + is(txteledmg_arg3) + " killed.")
	}
	return



































































